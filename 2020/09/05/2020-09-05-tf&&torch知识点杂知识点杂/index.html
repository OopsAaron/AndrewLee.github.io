<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/robot-4291692_1280.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/robot-4291692_1280.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-barber-shop.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <meta name="description" content="è®°å½•æ‚ä¹±çš„çŸ¥è¯†ç‚¹ï¼ŒæŒç»­æ›´æ–°">
<meta property="og:type" content="article">
<meta property="og:title" content="2020-09-05-tf&amp;&amp;torchçŸ¥è¯†ç‚¹æ‚">
<meta property="og:url" content="http://yoursite.com/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/index.html">
<meta property="og:site_name" content="æ€å»ºçš„NLPä¹‹æ—…">
<meta property="og:description" content="è®°å½•æ‚ä¹±çš„çŸ¥è¯†ç‚¹ï¼ŒæŒç»­æ›´æ–°">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/09/29/kRYmSZn8BbwJ4NK.png">
<meta property="article:published_time" content="2020-09-05T11:56:22.000Z">
<meta property="article:modified_time" content="2020-11-10T13:40:14.308Z">
<meta property="article:author" content="ææ€å»º">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/09/29/kRYmSZn8BbwJ4NK.png">

<link rel="canonical" href="http://yoursite.com/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>2020-09-05-tf&&torchçŸ¥è¯†ç‚¹æ‚ | æ€å»ºçš„NLPä¹‹æ—…</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>



<link rel="alternate" href="/atom.xml" title="æ€å»ºçš„NLPä¹‹æ—…" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>




    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">æ€å»ºçš„NLPä¹‹æ—…</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">æ²‰æ·€è‡ªå·±</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">24</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»<span class="badge">21</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">74</span></a>

  </li>
        <li class="menu-item menu-item-tools">

    <a href="/tools/" rel="section"><i class="fas fa-location-arrow fa-fw"></i>åˆ©å™¨</a>

  </li>
        <li class="menu-item menu-item-onesentence">

    <a href="/onesentence" rel="section"><i class="fas fa-bowling-ball fa-fw"></i>ä¸€å¥è¯</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>å¤§ä½¬</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/OopsAaron" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/touxiang.jpg">
      <meta itemprop="name" content="ææ€å»º">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ€å»ºçš„NLPä¹‹æ—…">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2020-09-05-tf&&torchçŸ¥è¯†ç‚¹æ‚
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-09-05 19:56:22" itemprop="dateCreated datePublished" datetime="2020-09-05T19:56:22+08:00">2020-09-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-11-10 21:40:14" itemprop="dateModified" datetime="2020-11-10T21:40:14+08:00">2020-11-10</time>
              </span>

          
            <span id="/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/" class="post-meta-item leancloud_visitors" data-flag-title="2020-09-05-tf&&torchçŸ¥è¯†ç‚¹æ‚" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/09/05/2020-09-05-tf&&torch%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>13 åˆ†é’Ÿ</span>
            </span>
            <div class="post-description">è®°å½•æ‚ä¹±çš„çŸ¥è¯†ç‚¹ï¼ŒæŒç»­æ›´æ–°</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="others">ğŸš€others</h2>
<h3 id="pythonçš„einops-rearrangeå‡½æ•°">pythonçš„einops rearrange()å‡½æ•°</h3>
<p>ä¾‹å­ï¼š</p>
<p>å‡è®¾æˆ‘æœ‰ä¸€ä¸ª3-Dæ•°ç»„ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[[[0,1,2],</span><br><span class="line">  [0,1,2],</span><br><span class="line">  [0,1,2]],</span><br><span class="line"></span><br><span class="line"> [[3,4,5],</span><br><span class="line">  [3,4,5],</span><br><span class="line">  [3,4,5]]]</span><br></pre></td></tr></tbody></table></figure>
<p>æˆ‘æƒ³æŒ‰åˆ—é‡æ–°æ’åˆ—ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[0,1,2,3,4,5],</span><br><span class="line"> [0,1,2,3,4,5],</span><br><span class="line"> [0,1,2,3,4,5]]</span><br></pre></td></tr></tbody></table></figure>
<p>ä½¿ç”¨einopsï¼š</p>
<figure class="highlight py"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">einops.rearrange(a, <span class="string">'x y z -&gt; y (x z) '</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>å¹¶ä¸”æˆ‘å»ºè®®æ ¹æ®ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚æ—¶é—´ï¼Œé«˜åº¦ç­‰ï¼‰ä¸ºè½´æŒ‡å®šæœ‰æ„ä¹‰çš„åç§°ï¼ˆè€Œä¸æ˜¯xyzï¼‰ã€‚ è¿™å°†ä½¿æ‚¨æ˜“äºç†è§£ä»£ç çš„ä½œç”¨</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In : einops.rearrange(a, 'x y z -&gt; y (x z) ')</span><br><span class="line">Out:</span><br><span class="line">array([[0, 1, 2, 3, 4, 5],</span><br><span class="line">       [0, 1, 2, 3, 4, 5],</span><br><span class="line">       [0, 1, 2, 3, 4, 5]])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="epochiterationbatch_size">Epochã€Iterationã€Batch_size</h3>
<blockquote>
<p><a href="https://blog.csdn.net/program_developer/article/details/78597738" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/program_developer/article/details/78597738</a></p>
</blockquote>
<h2 id="tensorflow">ğŸš€tensorflow</h2>
<h3 id="tf.tileç”¨æ³•">tf.tile()ç”¨æ³•</h3>
<blockquote>
<p><a href="https://blog.csdn.net/tsyccnh/article/details/82459859" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/tsyccnh/article/details/82459859</a></p>
</blockquote>
<h3 id="dataset-api-å’Œ-iterator">Dataset API å’Œ Iterator</h3>
<blockquote>
<p>Dataset API å’Œ Iterator</p>
<p><a href="https://blog.csdn.net/briblue/article/details/80962728" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/briblue/article/details/80962728</a></p>
<p>TensorFlowä¸­çš„Dataset API</p>
<p><a href="https://blog.csdn.net/dqcfkyqdxym3f8rb0/article/details/79342369" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/dqcfkyqdxym3f8rb0/article/details/79342369</a></p>
<p>TensorFlow dataæ¨¡å—è¯¦è§£</p>
<p><a href="https://www.weaf.top/posts/cd5ba0c4/" target="_blank" rel="noopener" class="uri">https://www.weaf.top/posts/cd5ba0c4/</a></p>
<p>ä½¿ç”¨Tensorflowçš„DataSetå’ŒIteratorè¯»å–æ•°æ®</p>
<p><a href="https://www.jianshu.com/p/bcff8a99b15b" target="_blank" rel="noopener" class="uri">https://www.jianshu.com/p/bcff8a99b15b</a></p>
<p>tensorflowæ•°æ®è¯»å–æœºåˆ¶ï¼ˆé™„ä»£ç ï¼‰</p>
<p><a href="https://zhuanlan.zhihu.com/p/27238630" target="_blank" rel="noopener" class="uri">https://zhuanlan.zhihu.com/p/27238630</a></p>
<p>Dataset APIå…¥é—¨æ•™ç¨‹</p>
<p><a href="https://zhuanlan.zhihu.com/p/30751039" target="_blank" rel="noopener" class="uri">https://zhuanlan.zhihu.com/p/30751039</a></p>
<p>Dataset.from_generator</p>
<p><a href="https://blog.csdn.net/foreseerwang/article/details/80572182" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/foreseerwang/article/details/80572182</a></p>
</blockquote>
<p>çœ‹ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªDatasetå¯¹è±¡</span><br><span class="line">dataset = tf.data.Dataset.from_tensor_slices([1,2,3,4,5,6,7,8,9])</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨</span><br><span class="line">iterator = dataset.make_one_shot_iterator()</span><br><span class="line"></span><br><span class="line">#get_next()å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»è¿­ä»£å™¨ä¸­è·å–å…ƒç´ </span><br><span class="line">element = iterator.get_next()</span><br><span class="line"></span><br><span class="line">#éå†è¿­ä»£å™¨ï¼Œè·å–æ‰€æœ‰å…ƒç´ </span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">   for i in range(9):</span><br><span class="line">       print(sess.run(element))</span><br></pre></td></tr></tbody></table></figure>
<p>ä»¥ä¸Šæ‰“å°ç»“æœä¸ºï¼š1 2 3 4 5 6 7 8 9</p>
<p>from_generator</p>
<p>åˆ›å»ºDatasetç”±å…¶ç”Ÿæˆå…ƒç´ çš„å…ƒç´ generatorã€‚</p>
<p>å‡½æ•°å½¢å¼ï¼šfrom_generator(generator,output_types,output_shapes=None,args=None)</p>
<p>å‚æ•°generator:ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒè¿”å›æ”¯æŒè¯¥iter()åè®®çš„å¯¹è±¡ ã€‚å¦‚æœargsæœªæŒ‡å®šï¼Œgeneratoråˆ™ä¸å¾—å‚æ•°; å¦åˆ™å®ƒå¿…é¡»é‡‡å–ä¸æœ‰å€¼ä¸€æ ·å¤šçš„å‚æ•°argsã€‚ å‚æ•°output_typesï¼štf.DTypeå¯¹åº”äºç”±å…ƒç´ ç”Ÿæˆçš„å…ƒç´ çš„æ¯ä¸ªç»„ä»¶çš„å¯¹è±¡çš„åµŒå¥—ç»“æ„generatorã€‚ å‚æ•°output_shapes:tf.TensorShape å¯¹åº”äºç”±å…ƒç´ ç”Ÿæˆçš„å…ƒç´ çš„æ¯ä¸ªç»„ä»¶çš„å¯¹è±¡ çš„åµŒå¥—ç»“æ„generator å‚æ•°args:tf.Tensorå°†è¢«è®¡ç®—å¹¶å°†generatorä½œä¸ºNumPyæ•°ç»„å‚æ•°ä¼ é€’çš„å¯¹è±¡å…ƒç»„ã€‚</p>
<p>å…·ä½“ä¾‹å­</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨</span><br><span class="line">def data_generator():</span><br><span class="line">    dataset = np.array(range(9))</span><br><span class="line">    for i in dataset:</span><br><span class="line">        yield i</span><br><span class="line"></span><br><span class="line">#æ¥æ”¶ç”Ÿæˆå™¨ï¼Œå¹¶ç”Ÿäº§datasetæ•°æ®ç»“æ„</span><br><span class="line">dataset = tf.data.Dataset.from_generator(data_generator, (tf.int32))</span><br><span class="line"></span><br><span class="line">iterator = concat_dataset.make_one_shot_iterator()</span><br><span class="line"></span><br><span class="line">element = iterator.get_next()</span><br><span class="line"></span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">   for i in range(3):</span><br><span class="line">       print(sess.run(element))</span><br></pre></td></tr></tbody></table></figure>
<p>ä»¥ä¸Šä»£ç è¿è¡Œç»“æœï¼š0 1 2</p>
<h3 id="tf-strip-å’Œ-split">tf strip() å’Œ split()</h3>
<blockquote>
<p><a href="https://blog.csdn.net/hjxu2016/article/details/78676859" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/hjxu2016/article/details/78676859</a></p>
</blockquote>
<h3 id="summaryç”¨æ³•--tensorboradå¯è§†åŒ–">Summaryç”¨æ³• -tensorboradå¯è§†åŒ–</h3>
<blockquote>
<p><a href="https://www.cnblogs.com/lyc-seu/p/8647792.html" target="_blank" rel="noopener" class="uri">https://www.cnblogs.com/lyc-seu/p/8647792.html</a></p>
</blockquote>
<h3 id="math.ceil">math.ceil()</h3>
<blockquote>
<p><a href="https://www.runoob.com/python/func-number-ceil.html" target="_blank" rel="noopener" class="uri">https://www.runoob.com/python/func-number-ceil.html</a></p>
</blockquote>
<h3 id="format-æ ¼å¼åŒ–å‡½æ•°">.format() æ ¼å¼åŒ–å‡½æ•°</h3>
<blockquote>
<p><a href="https://www.runoob.com/python/att-string-format.html" target="_blank" rel="noopener" class="uri">https://www.runoob.com/python/att-string-format.html</a></p>
</blockquote>
<h3 id="tf.shapea-å’Œ-a.get_shape.as_list-å’Œ-tf.split">tf.shape(A) å’Œ A.get_shape().as_list() å’Œ tf.split()</h3>
<blockquote>
<p><a href="https://www.itread01.com/content/1544436557.html" target="_blank" rel="noopener" class="uri">https://www.itread01.com/content/1544436557.html</a></p>
<p><a href="https://blog.csdn.net/xc_zhou/article/details/85632109" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/xc_zhou/article/details/85632109</a></p>
</blockquote>
<ul>
<li>tf.shape(A) # ç²å–å¼µé‡Aï¼ˆé™£åˆ—ï¼Œlist, tensorå¼µé‡ï¼‰çš„å¤§å°ï¼Œè¿”å›çš„æ˜¯ä¸€å€‹list</li>
<li>x.get_shape()ï¼Œåªæœ‰<strong>tensor</strong>æ‰å¯ä»¥ä½¿ç”¨é€™ç¨®æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€å€‹å…ƒçµ„</li>
<li>tf.split(dimension, num_split, input)ï¼šdimensionçš„æ„æ€å°±æ˜¯è¼¸å…¥å¼µé‡çš„å“ªä¸€å€‹ç¶­åº¦ï¼Œå¦‚æœæ˜¯0å°±è¡¨ç¤ºå°ç¬¬0ç¶­åº¦é€²è¡Œåˆ‡å‰²ã€‚num_splitå°±æ˜¯åˆ‡å‰²çš„æ•¸é‡ï¼Œå¦‚æœæ˜¯2å°±è¡¨ç¤ºè¼¸å…¥å¼µé‡è¢«åˆ‡æˆ2ä»½ï¼Œæ¯ä¸€ä»½æ˜¯ä¸€å€‹åˆ—è¡¨ã€‚</li>
</ul>
<h3 id="tf.range">tf.range()</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w=tf.range(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">print</span> (sess.run(w))<span class="comment">#è¾“å‡º[0 1 2]</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="os.path">os.pathï¼ˆï¼‰</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">æ–¹æ³•</th>
<th style="text-align: left;">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">os.path.abspath(path)</td>
<td style="text-align: left;">è¿”å›ç»å¯¹è·¯å¾„</td>
</tr>
<tr class="even">
<td style="text-align: left;">os.path.basename(path)</td>
<td style="text-align: left;">è¿”å›æ–‡ä»¶å</td>
</tr>
<tr class="odd">
<td style="text-align: left;">os.path.join(path1[, path2[, ...]])</td>
<td style="text-align: left;">æŠŠç›®å½•å’Œæ–‡ä»¶ååˆæˆä¸€ä¸ªè·¯å¾„</td>
</tr>
<tr class="even">
<td style="text-align: left;">os.path.dirname(path)</td>
<td style="text-align: left;">è¿”å›æ–‡ä»¶è·¯å¾„</td>
</tr>
<tr class="odd">
<td style="text-align: left;">os.path.exists(path)</td>
<td style="text-align: left;">å¦‚æœè·¯å¾„ path å­˜åœ¨ï¼Œè¿”å› Trueï¼›å¦‚æœè·¯å¾„ path ä¸å­˜åœ¨ï¼Œè¿”å› Falseã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;">os.path.split(path)</td>
<td style="text-align: left;">æŠŠè·¯å¾„åˆ†å‰²æˆ dirname å’Œ basenameï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://www.runoob.com/python/python-os-path.html" target="_blank" rel="noopener" class="uri">https://www.runoob.com/python/python-os-path.html</a></p>
</blockquote>
<h3 id="embedding_lookup">embedding_lookup()</h3>
<p>tf.nn.embedding_lookup()å°±æ˜¯æ ¹æ®input_idsä¸­çš„idï¼Œå¯»æ‰¾embeddingsä¸­çš„ç¬¬idè¡Œã€‚æ¯”å¦‚input_ids=[1,3,5]ï¼Œåˆ™æ‰¾å‡ºembeddingsä¸­ç¬¬1ï¼Œ3ï¼Œ5è¡Œï¼Œç»„æˆä¸€ä¸ªtensorè¿”å›ã€‚</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/7bb87873f89e" target="_blank" rel="noopener" class="uri">https://www.jianshu.com/p/7bb87873f89e</a></p>
<p><a href="https://www.zhihu.com/question/52250059" target="_blank" rel="noopener" class="uri">https://www.zhihu.com/question/52250059</a></p>
</blockquote>
<h3 id="æ¨¡å‹ä¿å­˜å’ŒåŠ è½½">æ¨¡å‹ä¿å­˜å’ŒåŠ è½½</h3>
<p>Saverçš„ä½œç”¨æ˜¯å°†æˆ‘ä»¬è®­ç»ƒå¥½çš„æ¨¡å‹çš„å‚æ•°ä¿å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡ç»§ç»­ç”¨äºè®­ç»ƒæˆ–æµ‹è¯•ï¼›Restoreçš„ç”¨æ³•æ˜¯å°†è®­ç»ƒå¥½çš„å‚æ•°æå–å‡ºæ¥ã€‚</p>
<p>1.Saverç±»è®­ç»ƒå®Œåï¼Œæ˜¯ä»¥<strong>checkpointsæ–‡ä»¶å½¢å¼</strong>ä¿å­˜ã€‚æå–çš„æ—¶å€™ä¹Ÿæ˜¯ä»checkpointsæ–‡ä»¶ä¸­æ¢å¤å˜é‡ã€‚ Checkpointsæ–‡ä»¶æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒæŠŠå˜é‡åæ˜ å°„åˆ°å¯¹åº”çš„tensorå€¼ ã€‚</p>
<p>2.é€šè¿‡forå¾ªç¯ï¼ŒSaverç±»å¯ä»¥è‡ªåŠ¨çš„ç”Ÿæˆcheckpointæ–‡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥<strong>ä¿å­˜å¤šä¸ªè®­ç»ƒç»“æœ</strong>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜æ¯ä¸€æ­¥è®­ç»ƒçš„ç»“æœã€‚ä½†æ˜¯ä¸ºäº†é¿å…å¡«æ»¡æ•´ä¸ªç£ç›˜ï¼Œ<strong>Saverå¯ä»¥è‡ªåŠ¨çš„ç®¡ç†Checkpointsæ–‡ä»¶</strong>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¿å­˜æœ€è¿‘çš„Nä¸ªCheckpointsæ–‡ä»¶ã€‚</p>
<h3 id="tensorflowæ¨¡å‹ä¿å­˜å’Œè¯»å–tf.train.saver">Tensorflowæ¨¡å‹ä¿å­˜å’Œè¯»å–tf.train.Saver</h3>
<p>ç›®æ ‡ï¼šè®­ç»ƒç½‘ç»œåæƒ³ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä»¥åŠåœ¨ç¨‹åºä¸­è¯»å–ä»¥ä¿å­˜çš„è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚</p>
<p>é¦–å…ˆï¼Œä¿å­˜å’Œæ¢å¤éƒ½éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ª tf.train.Saverã€‚</p>
<blockquote>
<p>saver = tf.train.Saver()</p>
</blockquote>
<p>ç„¶åï¼Œåœ¨è®­ç»ƒå¾ªç¯ä¸­ï¼Œå®šæœŸè°ƒç”¨ saver.save() æ–¹æ³•ï¼Œå‘æ–‡ä»¶å¤¹ä¸­å†™å…¥åŒ…å«äº†å½“å‰æ¨¡å‹ä¸­æ‰€æœ‰å¯è®­ç»ƒå˜é‡çš„ checkpoint æ–‡ä»¶ã€‚</p>
<blockquote>
<p>saver.save(sess, save_path, global_step=step)</p>
</blockquote>
<p>ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ saver.restore() æ–¹æ³•ï¼Œé‡è½½æ¨¡å‹çš„å‚æ•°ï¼Œç»§ç»­è®­ç»ƒæˆ–ç”¨äºæµ‹è¯•æ•°æ®ã€‚</p>
<blockquote>
<p>saver.restore(sess, save_path)</p>
</blockquote>
<p>æ¨¡å‹çš„æ¢å¤ç”¨çš„æ˜¯restore()å‡½æ•°ï¼Œå®ƒéœ€è¦ä¸¤ä¸ªå‚æ•°restore(sess, save_path)ï¼Œsave_pathæŒ‡çš„æ˜¯ä¿å­˜çš„æ¨¡å‹è·¯å¾„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>tf.train.latest_checkpointï¼ˆï¼‰</code>æ¥è‡ªåŠ¨è·å–æœ€åä¸€æ¬¡ä¿å­˜çš„æ¨¡å‹ã€‚å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model_file=tf.train.latest_checkpoint(<span class="string">'ckpt/'</span>)</span><br><span class="line">saver.restore(sess,model_file)</span><br></pre></td></tr></tbody></table></figure>
<p>ä¸€æ¬¡ saver.save() åå¯ä»¥åœ¨æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°æ–°å¢çš„å››ä¸ªæ–‡ä»¶ï¼Œ</p>
<p><img src="https://i.loli.net/2020/09/29/kRYmSZn8BbwJ4NK.png" alt="image-20200929102459806"></p>
<p>å®é™…ä¸Šæ¯è°ƒç”¨ä¸€æ¬¡ä¿å­˜æ“ä½œä¼šåˆ›å»ºå3ä¸ªæ•°æ®æ–‡ä»¶å¹¶åˆ›å»ºä¸€ä¸ªæ£€æŸ¥ç‚¹ï¼ˆcheckpointï¼‰æ–‡ä»¶ï¼Œç®€å•ç†è§£å°±æ˜¯æƒé‡ç­‰å‚æ•°è¢«ä¿å­˜åˆ° .ckpt.data æ–‡ä»¶ä¸­ï¼Œä»¥å­—å…¸çš„å½¢å¼ï¼›å›¾å’Œå…ƒæ•°æ®è¢«ä¿å­˜åˆ° .ckpt.meta æ–‡ä»¶ä¸­ï¼Œå¯ä»¥è¢« tf.train.import_meta_graph åŠ è½½åˆ°å½“å‰é»˜è®¤çš„å›¾ã€‚</p>
<p>saver.restore()æ—¶å¡«çš„æ–‡ä»¶åï¼Œå› ä¸ºåœ¨saver.saveçš„æ—¶å€™ï¼Œæ¯ä¸ªcheckpointä¼šä¿å­˜ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¦‚ <code>my-model-10000.meta</code>, <code>my-model-10000.index</code>, <code>my-model-10000.data-00000-of-00001</code></p>
<p>åœ¨<code>import_meta_graph</code>æ—¶å¡«çš„å°±æ˜¯<code>meta</code>æ–‡ä»¶åï¼Œæˆ‘ä»¬çŸ¥é“æƒå€¼éƒ½ä¿å­˜åœ¨my-model-10000.data-00000-of-00001è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å¦‚æœåœ¨restoreæ–¹æ³•ä¸­å¡«è¿™ä¸ªæ–‡ä»¶åï¼Œå°±ä¼šæŠ¥é”™ï¼Œåº”è¯¥å¡«çš„æ˜¯å‰ç¼€ï¼Œè¿™ä¸ªå‰ç¼€å¯ä»¥ä½¿ç”¨<code>tf.train.latest_checkpoint(checkpoint_dir)</code>è¿™ä¸ªæ–¹æ³•è·å–ã€‚</p>
<p>ä¸‹é¢ä»£ç æ˜¯ç®€å•çš„ä¿å­˜å’Œè¯»å–æ¨¡å‹ï¼šï¼ˆä¸åŒ…æ‹¬åŠ è½½å›¾æ•°æ®ï¼‰</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"> </span><br><span class="line">#ç”¨numpyäº§ç”Ÿæ•°æ®</span><br><span class="line">x_data = np.linspace(-1,1,300)[:, np.newaxis] #è½¬ç½®</span><br><span class="line">noise = np.random.normal(<span class="number">0</span>,<span class="number">0.05</span>, x_data.shape)</span><br><span class="line">y_data = np.square(x_data)<span class="number">-0.5</span>+noise</span><br><span class="line"> </span><br><span class="line">#è¾“å…¥å±‚</span><br><span class="line">x_ph = tf.placeholder(tf.float32, [None, <span class="number">1</span>])</span><br><span class="line">y_ph = tf.placeholder(tf.float32, [None, <span class="number">1</span>])</span><br><span class="line"> </span><br><span class="line">#éšè—å±‚</span><br><span class="line">w1 = tf.Variable(tf.random_normal([<span class="number">1</span>,<span class="number">10</span>]))</span><br><span class="line">b1 = tf.Variable(tf.zeros([<span class="number">1</span>,<span class="number">10</span>])+<span class="number">0.1</span>)</span><br><span class="line">wx_plus_b1 = tf.matmul(x_ph, w1) + b1</span><br><span class="line">hidden = tf.nn.relu(wx_plus_b1)</span><br><span class="line"> </span><br><span class="line">#è¾“å‡ºå±‚</span><br><span class="line">w2 = tf.Variable(tf.random_normal([<span class="number">10</span>,<span class="number">1</span>]))</span><br><span class="line">b2 = tf.Variable(tf.zeros([<span class="number">1</span>,<span class="number">1</span>])+<span class="number">0.1</span>)</span><br><span class="line">wx_plus_b2 = tf.matmul(hidden, w2) + b2</span><br><span class="line">y = wx_plus_b2</span><br><span class="line"> </span><br><span class="line">#æŸå¤±</span><br><span class="line">loss = tf.reduce_mean(tf.reduce_sum(tf.square(y_ph-y),reduction_indices=[<span class="number">1</span>]))</span><br><span class="line">train_op = tf.train.GradientDescentOptimizer(<span class="number">0.1</span>).minimize(loss)</span><br><span class="line"> </span><br><span class="line">#ä¿å­˜æ¨¡å‹å¯¹è±¡saver</span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line"> </span><br><span class="line">#åˆ¤æ–­æ¨¡å‹ä¿å­˜è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»º</span><br><span class="line"><span class="keyword">if</span> not os.path.exists(<span class="string">'tmp/'</span>):</span><br><span class="line">    os.mkdir(<span class="string">'tmp/'</span>)</span><br><span class="line"> </span><br><span class="line">#åˆå§‹åŒ–</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    if os.path.exists('tmp/checkpoint'):         #åˆ¤æ–­æ¨¡å‹æ˜¯å¦å­˜åœ¨</span><br><span class="line">        saver.restore(sess, 'tmp/model.ckpt')    #å­˜åœ¨å°±ä»æ¨¡å‹ä¸­æ¢å¤å˜é‡</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        init = tf.global_variables_initializer() #ä¸å­˜åœ¨å°±åˆå§‹åŒ–å˜é‡</span><br><span class="line">        sess.run(init)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">        _,loss_value = sess.run([train_op,loss], feed_dict={<span class="attr">x_ph</span>:x_data, <span class="attr">y_ph</span>:y_data})</span><br><span class="line">        <span class="keyword">if</span>(i%<span class="number">50</span>==<span class="number">0</span>):</span><br><span class="line">            save_path = saver.save(sess, <span class="string">'tmp/model.ckpt'</span>)</span><br><span class="line">            print(<span class="string">"è¿­ä»£æ¬¡æ•°ï¼š%d , è®­ç»ƒæŸå¤±ï¼š%s"</span>%(i, loss_value))</span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨ï¼š</p>
<ul>
<li>saver çš„æ“ä½œå¿…é¡»åœ¨ sess å»ºç«‹åè¿›è¡Œã€‚</li>
<li>model.ckpt å¿…é¡»å­˜åœ¨ç»™å®šæ–‡ä»¶å¤¹ä¸­ï¼Œâ€˜tmp/model.ckptâ€™ è¿™é‡Œè‡³å°‘è¦æœ‰ä¸€å±‚æ–‡ä»¶å¤¹ï¼Œå¦åˆ™æ— æ³•ä¿å­˜ã€‚</li>
<li>æ¢å¤æ¨¡å‹æ—¶åŒä¿å­˜æ—¶ä¸€æ ·ï¼Œæ˜¯ â€˜tmp/model.ckptâ€™ï¼Œå’Œé‚£3ä¸ªæ–‡ä»¶åéƒ½ä¸ä¸€æ ·ã€‚</li>
</ul>
<p>å¦‚æœä¸ç”¨<code>tf.train.latest_checkpointï¼ˆï¼‰</code>æ¥è‡ªåŠ¨è·å–æœ€åä¸€æ¬¡ä¿å­˜çš„æ¨¡å‹ï¼Œåˆ™æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/7ebee4d10e49" target="_blank" rel="noopener" class="uri">https://www.jianshu.com/p/7ebee4d10e49</a></p>
<p><a href="https://blog.csdn.net/mylove0414/article/details/55097486" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/mylove0414/article/details/55097486</a></p>
</blockquote>
<h3 id="saverä¸­çš„max_to_keep-å‚æ•°">Saverä¸­çš„max_to_keep å‚æ•°</h3>
<h3 id="kerasä¸­çš„timedistributedå‡½æ•°">kerasä¸­çš„TimeDistributedå‡½æ•°</h3>
<blockquote>
<p><a href="https://blog.csdn.net/u012193416/article/details/79477220" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/u012193416/article/details/79477220</a></p>
<p><a href="https://keras.io/zh/layers/wrappers/" target="_blank" rel="noopener" class="uri">https://keras.io/zh/layers/wrappers/</a></p>
<p><a href="https://blog.csdn.net/zh_JNU/article/details/85160379" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/zh_JNU/article/details/85160379</a></p>
<p><a href="https://www.cnblogs.com/CheeseZH/p/13408658.html" target="_blank" rel="noopener" class="uri">https://www.cnblogs.com/CheeseZH/p/13408658.html</a></p>
</blockquote>
<h3 id="tf.concatè¯¦è§£">tf.concat()è¯¦è§£</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tf.concat([tensor1, tensor2, tensor3,...], axis)</span><br><span class="line"><span class="comment"># axis=0     ä»£è¡¨åœ¨ç¬¬0ä¸ªç»´åº¦æ‹¼æ¥</span></span><br><span class="line"><span class="comment"># axis=1     ä»£è¡¨åœ¨ç¬¬1ä¸ªç»´åº¦æ‹¼æ¥ </span></span><br><span class="line"><span class="comment">#axis=-1	 ä»£è¡¨å€’æ•°ç¬¬ä¸€ä¸ªç»´åº¦</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/leviopku/article/details/82380118" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/leviopku/article/details/82380118</a></p>
</blockquote>
<h3 id="shape">shape</h3>
<p>numpyæ•°æ®çš„å½¢çŠ¶ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x.shape()</span><br></pre></td></tr></tbody></table></figure>
<p>list æ•°æ®çš„å½¢çŠ¶ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.shape(x)</span><br></pre></td></tr></tbody></table></figure>
<p><strong>æ³¨ï¼š</strong>å¦‚æœå†™<code>x.shape()</code> , åˆ™ä¼šæŠ¥é”™<code>ValueError: invalid literal for int() with base 10</code></p>
<p>torsorå½¢çŠ¶ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x.get_shape()</span><br></pre></td></tr></tbody></table></figure>
<h3 id="keras-çš„-fitå‡½æ•°">keras çš„ fitå‡½æ•°</h3>
<p>fitä¸­ä»¥call()æ–¹æ³•çš„å½¢å¼æ¥run session</p>
<blockquote>
<p><a href="https://blog.csdn.net/u012526436/article/details/102488164" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/u012526436/article/details/102488164</a></p>
</blockquote>
<h3 id="model-ç±»ç»§æ‰¿">Model ç±»ç»§æ‰¿</h3>
<p><strong>å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>Model</code> ç±»å¹¶åœ¨ <code>call</code> æ–¹æ³•ä¸­å®ç°ä½ è‡ªå·±çš„å‰å‘ä¼ æ’­ï¼Œä»¥åˆ›å»ºä½ è‡ªå·±çš„å®Œå…¨å®šåˆ¶åŒ–çš„æ¨¡å‹ï¼Œ</strong>ï¼ˆ<code>Model</code> ç±»ç»§æ‰¿ API å¼•å…¥äº Keras 2.2.0ï¼‰ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨ <code>Model</code> ç±»ç»§æ‰¿å†™çš„ç®€å•çš„å¤šå±‚æ„ŸçŸ¥å™¨çš„ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleMLP</span><span class="params">(keras.Model)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, use_bn=False, use_dp=False, num_classes=<span class="number">10</span>)</span>:</span></span><br><span class="line">        super(SimpleMLP, self).__init__(name=<span class="string">'mlp'</span>)</span><br><span class="line">        self.use_bn = use_bn</span><br><span class="line">        self.use_dp = use_dp</span><br><span class="line">        self.num_classes = num_classes</span><br><span class="line"></span><br><span class="line">        self.dense1 = keras.layers.Dense(<span class="number">32</span>, activation=<span class="string">'relu'</span>)</span><br><span class="line">        self.dense2 = keras.layers.Dense(num_classes, activation=<span class="string">'softmax'</span>)</span><br><span class="line">        <span class="keyword">if</span> self.use_dp:</span><br><span class="line">            self.dp = keras.layers.Dropout(<span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">if</span> self.use_bn:</span><br><span class="line">            self.bn = keras.layers.BatchNormalization(axis=<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs)</span>:</span></span><br><span class="line">        x = self.dense1(inputs)</span><br><span class="line">        <span class="keyword">if</span> self.use_dp:</span><br><span class="line">            x = self.dp(x)</span><br><span class="line">        <span class="keyword">if</span> self.use_bn:</span><br><span class="line">            x = self.bn(x)</span><br><span class="line">        <span class="keyword">return</span> self.dense2(x)</span><br><span class="line"></span><br><span class="line">model = SimpleMLP()</span><br><span class="line">model.compile(...)</span><br><span class="line">model.fit(...)</span><br></pre></td></tr></tbody></table></figure>
<p>ç½‘ç»œå±‚å®šä¹‰åœ¨ <code>__init__(self, ...)</code> ä¸­ï¼Œå‰å‘ä¼ æ’­åœ¨ <code>call(self, inputs)</code> ä¸­æŒ‡å®šã€‚åœ¨ <code>call</code> ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šè‡ªå®šä¹‰çš„æŸå¤±å‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨ <code>self.add_loss(loss_tensor)</code> ï¼ˆå°±åƒä½ åœ¨è‡ªå®šä¹‰å±‚ä¸­ä¸€æ ·ï¼‰ã€‚</p>
<p>åœ¨ç±»ç»§æ‰¿æ¨¡å‹ä¸­ï¼Œæ¨¡å‹çš„æ‹“æ‰‘ç»“æ„æ˜¯ç”± Python ä»£ç å®šä¹‰çš„ï¼ˆè€Œä¸æ˜¯ç½‘ç»œå±‚çš„é™æ€å›¾ï¼‰ã€‚è¿™æ„å‘³ç€è¯¥æ¨¡å‹çš„æ‹“æ‰‘ç»“æ„ä¸èƒ½è¢«æ£€æŸ¥æˆ–åºåˆ—åŒ–ã€‚å› æ­¤ï¼Œä»¥ä¸‹æ–¹æ³•å’Œå±æ€§<strong>ä¸é€‚ç”¨äºç±»ç»§æ‰¿æ¨¡å‹</strong>ï¼š</p>
<ul>
<li><code>model.inputs</code> å’Œ <code>model.outputs</code>ã€‚</li>
<li><code>model.to_yaml()</code> å’Œ <code>model.to_json()</code>ã€‚</li>
<li><code>model.get_config()</code> å’Œ <code>model.save()</code>ã€‚</li>
</ul>
<p><strong>å…³é”®ç‚¹</strong>ï¼šä¸ºæ¯ä¸ªä»»åŠ¡ä½¿ç”¨æ­£ç¡®çš„ APIã€‚<code>Model</code> ç±»ç»§æ‰¿ API å¯ä»¥ä¸ºå®ç°å¤æ‚æ¨¡å‹æä¾›æ›´å¤§çš„çµæ´»æ€§ï¼Œä½†å®ƒéœ€è¦ä»˜å‡ºä»£ä»·ï¼ˆæ¯”å¦‚ç¼ºå¤±çš„ç‰¹æ€§ï¼‰ï¼šå®ƒæ›´å†—é•¿ï¼Œæ›´å¤æ‚ï¼Œå¹¶ä¸”æœ‰æ›´å¤šçš„ç”¨æˆ·é”™è¯¯æœºä¼šã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œå°½å¯èƒ½ä½¿ç”¨å‡½æ•°å¼ APIï¼Œè¿™å¯¹ç”¨æˆ·æ›´å‹å¥½ã€‚</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_27825451/article/details/90517036" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_27825451/article/details/90517036</a></p>
</blockquote>
<h3 id="å…³äºtensorflowçš„sessiontensorshapeç­‰åŸºç¡€çŸ¥è¯†æ•´ç†">å…³äºtensorflowçš„sessionã€tensorã€shapeç­‰åŸºç¡€çŸ¥è¯†ï¼ˆæ•´ç†ï¼‰</h3>
<p>åœ¨tensorflowç¨‹åºä¸­ï¼Œtensoråªæ˜¯å ä½ç¬¦ï¼Œåœ¨ä¼šè¯å±‚æ²¡æœ‰runå‡ºtensorçš„å€¼ä¹‹å‰ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•è·çŸ¥tensorçš„å€¼çš„</p>
<blockquote>
<p><a href="https://blog.csdn.net/jiongnima/article/details/78524551" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/jiongnima/article/details/78524551</a></p>
<p><a href="https://www.tensorflow.org/guide/tensor?hl=zh-cn" target="_blank" rel="noopener" class="uri">https://www.tensorflow.org/guide/tensor?hl=zh-cn</a></p>
<p><a href="https://www.jianshu.com/p/75a903a44cf2" target="_blank" rel="noopener" class="uri">https://www.jianshu.com/p/75a903a44cf2</a></p>
</blockquote>
<h3 id="tf.layers.flatten">tf.layers.flatten</h3>
<p>åœ¨ä¿ç•™ç¬¬0è½´çš„æƒ…å†µä¸‹å¯¹è¾“å…¥çš„å¼ é‡è¿›è¡ŒFlatten(æ‰å¹³åŒ–)</p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=tf.placeholder(shape=(<span class="literal">None</span>,<span class="number">4</span>,<span class="number">4</span>),dtype=<span class="string">'float32'</span>)</span><br><span class="line"></span><br><span class="line">y=tf.layers.flatten(x)</span><br><span class="line"></span><br><span class="line">print(y)</span><br></pre></td></tr></tbody></table></figure>
<p>è¾“å‡ºï¼š å°†åä¸¤ç»´è¿›è¡Œåˆå¹¶</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tensor("flatten/Reshape:0", shape=(?, 16), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="tf.layers.dense">tf.layers.dense</h3>
<p>å…¨è¿æ¥å±‚ ï¼Œç›¸å½“äºæ·»åŠ ä¸€ä¸ªå±‚ã€‚åª<strong>æ”¹å˜è¾“å…¥çš„æœ€åä¸€ç»´</strong></p>
<h3 id="python---tensorflowä¸­-none-1å’Œä¹‹é—´çš„åŒºåˆ«">python - Tensorflowä¸­ Noneï¼Œ-1å’Œï¼Ÿä¹‹é—´çš„åŒºåˆ«</h3>
<p><code>None</code>è¡¨ç¤ºæœªæŒ‡å®šçš„ç»´åº¦ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å®šä¹‰äº†ä¸€ä¸ªå ä½ç¬¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>None</code>æ¥è¡¨ç¤ºâ€œè¿™ä¸ªç»´åº¦å¯ä»¥æœ‰ä»»ä½•å¤§å°â€ã€‚ å ä½ç¬¦å¯ä»¥æœ‰å¤šä¸ª<code>None</code>ç»´åº¦è¿™ä»…ä»…æ„å‘³ç€å¤šä¸ªç»´åº¦å¯ä»¥æ˜¯ä¸åŒçš„å¤§å°ç”šè‡³æ•´ä¸ªå½¢çŠ¶éƒ½å¯ä»¥<code>None</code>æ¥æŒ‡å®šæœªçŸ¥çš„ç»´æ•°ã€‚ <code>-1</code>æ˜¯TensorFlowçš„ä¸€æ¡æŒ‡ä»¤ï¼Œç”¨äºè‡ªè¡Œæ¨æ–­ç»´åº¦çš„å¤§å°ã€‚åœ¨<code>tf.reshape(input, [-1, input_size])</code>ä¸­ï¼Œè¿™æ„å‘³ç€â€œé‡å¡‘å®ƒï¼Œä½¿ç¬¬äºŒä¸ªç»´åº¦<code>input_size</code>ï¼Œç¬¬ä¸€ä¸ªç»´åº¦æ˜¯åŒ¹é…å…ƒç´ æ€»æ•°æ‰€éœ€çš„ä»»ä½•å†…å®¹â€ã€‚ è¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€ç»´æ•°æ˜¯æœªçŸ¥çš„ï¼Œå› ä¸ºå¯¹äº<code>None</code>å¦‚æœè¾“å…¥å¼ é‡çš„å·²çŸ¥å¤§å°ä¸º10ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å°†å…¶é‡å¡‘ä¸º<code>[-1, 2]</code>ï¼Œåˆ™å¼ é‡æµèƒ½å¤Ÿæ¨æ–­å‡ºå®Œæ•´çš„å½¢çŠ¶<code>[5, 2]</code>ã€‚ <code>-1</code>çº¯ç²¹æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚ä½ å¯ä»¥æŠŠå½¢çŠ¶å†™ä¸‹æ¥ï¼Œè€Œä¸æ˜¯è®©Tensorflowæ¨æ–­å‡ºæ¥<code>None</code>å¦ä¸€æ–¹é¢ï¼Œå¯¹äºæ¥å—å¯å˜å¤§å°å¼ é‡æ˜¯å¿…è¦çš„ã€‚ ä¸€ä¸ªå½¢çŠ¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª<code>-1</code>ã€‚å¤šä¸ªæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºä¸å¯èƒ½æ¨æ–­å‡ºå½¢çŠ¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå¼ é‡ä¸­æœ‰12ä¸ªå…ƒç´ ï¼Œåˆ™æœªå®šä¹‰å°†å…¶é‡å¡‘ä¸º<code>[-1, -1, 2]</code>â€”â€”æˆ‘ä»¬æ˜¯å¦åº”è¯¥è¿™æ ·åšï¼Ÿ<code>[3, 2, 2]</code>ï¼Ÿ<code>[2, 3, 2]</code>ï¼Ÿâ€¦ æœ€åï¼Œé—®å·æ­£æ˜¯tensorflowåœ¨æ‰“å°å¼ é‡å’Œ/æˆ–å…¶å½¢çŠ¶æ—¶ç”¨æ¥æ ‡è®°â€œæœªçŸ¥â€ç»´åº¦çš„å†…å®¹ã€‚æ‚¨å‘å¸ƒçš„ç¤ºä¾‹å®é™…ä¸Šä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯â€”â€”æ‚¨ä¸èƒ½è‡ªå·±ä½¿ç”¨é—®å·ã€‚æœªçŸ¥ç»´åº¦çš„åŸå› å½“ç„¶å¯ä»¥æ˜¯å…·æœ‰<code>[6, 1, 2]</code>ç»´åº¦çš„å ä½ç¬¦ï¼Œå¹¶ä¸”é€šå¸¸æ ¹æ®å ä½ç¬¦å®šä¹‰çš„å¼ é‡ï¼ˆå³åº”ç”¨äºå®ƒä»¬çš„æŸäº›è¿ç®—çš„ç»“æœï¼‰ä¹Ÿå°†å…·æœ‰æœªçŸ¥ç»´åº¦ã€‚æ­¤å¤–ï¼Œæœ‰äº›æ“ä½œå¯èƒ½æ²¡æœ‰æŒ‡å®šï¼ˆéƒ¨åˆ†ï¼‰å®ƒä»¬çš„è¾“å‡ºå½¢çŠ¶ï¼Œè¿™ä¹Ÿå¯èƒ½å¯¼è‡´æœªçŸ¥ã€‚ è¿™é‡Œå¯èƒ½è¿˜æœ‰ä¸€äº›æˆ‘é—æ¼çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä½†æ ¹æ®ç»éªŒï¼šä½¿ç”¨<code>None</code>ä½œä¸ºå ä½ç¬¦ï¼Œä½¿ç”¨<code>None</code>è¿›è¡Œæ•´å½¢ã€‚è¿™åº”è¯¥æ¶µç›–å¤§å¤šæ•°ç”¨ä¾‹ã€‚</p>
<blockquote>
<p><code>ï¼Ÿ</code>== <code>None</code> ï¼Œç»´åº¦æ˜¯æœªçŸ¥çš„</p>
<p><code>-1</code>ä»£è¡¨æ ¹æ®æ¨æ–­ä¹‹åçš„ç»´åº¦</p>
<p><code>(3,)</code> è¡¨æ˜å¼ é‡æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦ä¸º3</p>
</blockquote>
<blockquote>
<p><a href="https://www.coder.work/article/2032326" target="_blank" rel="noopener" class="uri">https://www.coder.work/article/2032326</a></p>
</blockquote>
<h3 id="kerasçš„-call-å‡½æ•°build-å‡½æ•°">kerasçš„ call å‡½æ•°ã€build å‡½æ•°</h3>
<p>build() ç”¨æ¥åˆå§‹åŒ–å®šä¹‰weights, è¿™é‡Œå¯ä»¥ç”¨çˆ¶ç±»çš„self.add_weight() å‡½æ•°æ¥åˆå§‹åŒ–æ•°æ®, è¯¥å‡½æ•°å¿…é¡»å°† self.built è®¾ç½®ä¸ºTrue, ä»¥ä¿è¯è¯¥ Layer å·²ç»æˆåŠŸ build , é€šå¸¸å¦‚ä¸Šæ‰€ç¤º, ä½¿ç”¨ super(MyLayer, self).build(input_shape) æ¥å®Œæˆã€‚</p>
<p>call() ç”¨æ¥æ‰§è¡Œ Layer çš„èŒèƒ½, xå°±æ˜¯è¯¥å±‚çš„è¾“å…¥ï¼Œxä¸æƒé‡kernelåšç‚¹ç§¯ï¼Œç”Ÿæˆæ–°çš„èŠ‚ç‚¹å±‚ï¼Œå³å½“å‰ Layer æ‰€æœ‰çš„è®¡ç®—è¿‡ç¨‹å‡åœ¨è¯¥å‡½æ•°ä¸­å®Œæˆã€‚</p>
<p><code>__init__()</code>å’Œ<code>build()</code>å‡½æ•°éƒ½åœ¨å¯¹Layerè¿›è¡Œåˆå§‹åŒ–ï¼Œéƒ½åˆå§‹åŒ–äº†ä¸€äº›æˆå‘˜å‡½æ•°</p>
<p><code>__init__()</code>ï¼šä¿å­˜æˆå‘˜å˜é‡çš„è®¾ç½®</p>
<p><code>build()</code>ï¼šåœ¨<code>call()</code>å‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œè¿™æ—¶å€™å¯ä»¥çŸ¥é“è¾“å…¥æ•°æ®çš„<code>shape</code>ã€‚è¿”å›å»çœ‹ä¸€çœ‹ï¼Œæœç„¶æ˜¯<code>__init__()</code>å‡½æ•°ä¸­åªåˆå§‹åŒ–äº†è¾“å‡ºæ•°æ®çš„<code>shape</code>ï¼Œè€Œè¾“å…¥æ•°æ®çš„<code>shape</code>éœ€è¦åœ¨<code>build()</code>å‡½æ•°ä¸­åŠ¨æ€è·å–ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨æœ‰<code>__init__()</code>å‡½æ•°æ—¶è¿˜éœ€è¦ä½¿ç”¨<code>build()</code>å‡½æ•°</p>
<p><code>call()</code>å‡½æ•°åˆ™æ˜¯åœ¨è¯¥layerè¢«è°ƒç”¨æ—¶æ‰§è¡Œã€‚</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_32623363/article/details/104128497" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_32623363/article/details/104128497</a></p>
<p><a href="https://blog.csdn.net/qq_27825451/article/details/90517036" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_27825451/article/details/90517036</a></p>
</blockquote>
<h3 id="tf.expand_dims">tf.expand_dimsï¼ˆï¼‰</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tf.expand_dims(input, dim, name=<span class="literal">None</span>) <span class="comment">#åœ¨æŒ‡å®šä½ç½®å¢åŠ ç»´åº¦</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/jasonzzj/article/details/60811035" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/jasonzzj/article/details/60811035</a></p>
</blockquote>
<h3 id="tf.boolean_mask">tf.boolean_maskï¼ˆï¼‰</h3>
<p>é€‰æ‹©å¼ é‡çš„ç‰¹å®šç»´åº¦çš„å€¼</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tf.boolean_mask(tensor,mask,name=<span class="string">'boolean_mask'</span>,axis=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1-D example</span></span><br><span class="line">tensor = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">mask = np.array([<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">False</span>])</span><br><span class="line">boolean_mask(tensor, mask)  <span class="comment"># [0, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2-D example</span></span><br><span class="line">tensor = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">mask = np.array([<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>])</span><br><span class="line">boolean_mask(tensor, mask)  <span class="comment"># [[1, 2], [5, 6]]</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/wuguangbin1230/article/details/81334544" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/wuguangbin1230/article/details/81334544</a></p>
</blockquote>
<h2 id="pytorch">ğŸš€pytorch</h2>
<h3 id="pytorch-torch.nn.parameter">PyTorch torch.nn.Parameter()</h3>
<p><strong>ä½œç”¨</strong>ï¼šå¯¹äº<code>self.v = torch.nn.Parameter(torch.FloatTensor(hidden_size))</code>ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ªä¸å¯è®­ç»ƒçš„ç±»å‹<code>Tensor</code>è½¬æ¢æˆå¯ä»¥è®­ç»ƒçš„ç±»å‹<code>parameter</code>å¹¶å°†è¿™ä¸ª<code>parameter</code>ç»‘å®šåˆ°è¿™ä¸ª<code>module</code>é‡Œé¢(<code>net.parameter()</code>ä¸­å°±æœ‰è¿™ä¸ªç»‘å®šçš„<code>parameter</code>ï¼Œæ‰€ä»¥åœ¨å‚æ•°ä¼˜åŒ–çš„æ—¶å€™å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„)ï¼Œæ‰€ä»¥ç»è¿‡ç±»å‹è½¬æ¢è¿™ä¸ª<code>self.v</code>å˜æˆäº†æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œæˆä¸ºäº†æ¨¡å‹ä¸­æ ¹æ®è®­ç»ƒå¯ä»¥æ”¹åŠ¨çš„å‚æ•°äº†ã€‚</p>
<p>ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„ç›®çš„ä¹Ÿæ˜¯æƒ³è®©æŸäº›å˜é‡åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ä¸æ–­çš„ä¿®æ”¹å…¶å€¼ä»¥è¾¾åˆ°æœ€ä¼˜åŒ–ã€‚</p>
<blockquote>
<p><a href="https://www.jianshu.com/p/d8b77cc02410" target="_blank" rel="noopener" class="uri">https://www.jianshu.com/p/d8b77cc02410</a></p>
</blockquote>
<h3 id="pytorch-nn.linear">PyTorch nn.Linearï¼ˆï¼‰</h3>
<p>ç”¨äºè®¾ç½®ç½‘ç»œä¸­çš„<strong>å…¨è¿æ¥å±‚çš„</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_42079689/article/details/102873766" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_42079689/article/details/102873766</a></p>
</blockquote>
<h3 id="pytorch-nn.embedding-è¯å‘é‡">pytorch nn.embedding() è¯å‘é‡</h3>
<p>è¯åµŒå…¥åœ¨ pytorch ä¸­éå¸¸ç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ <code>torch.nn.Embedding(m, n)</code> å°±å¯ä»¥äº†ï¼Œm è¡¨ç¤ºå•è¯çš„æ€»æ•°ç›®ï¼Œn è¡¨ç¤ºè¯åµŒå…¥çš„ç»´åº¦ï¼Œå…¶å®è¯åµŒå…¥å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå¤§çŸ©é˜µï¼ŒçŸ©é˜µçš„æ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªå•è¯ã€‚</p>
<p><strong>éšæœºåˆå§‹åŒ–</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/david0611/article/details/81090371" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/david0611/article/details/81090371</a></p>
</blockquote>
<h3 id="pytorch-torch.mean">pytorch torch.mean()</h3>
<p><strong>torch.mean(input, dim, keepdim=False, out=None)</strong></p>
<p>è¿”å›æ–°çš„å¼ é‡ï¼Œå…¶ä¸­åŒ…å«è¾“å…¥å¼ é‡inputæŒ‡å®šç»´åº¦dimä¸­æ¯è¡Œçš„å¹³å‡å€¼ã€‚</p>
<p>è‹¥keepdimå€¼ä¸ºTrueï¼Œåˆ™åœ¨è¾“å‡ºå¼ é‡ä¸­ï¼Œé™¤äº†è¢«æ“ä½œçš„dimç»´åº¦å€¼é™ä¸º1ï¼Œå…¶å®ƒç»´åº¦ä¸è¾“å…¥å¼ é‡inputç›¸åŒã€‚å¦åˆ™ï¼Œdimç»´åº¦ç›¸å½“äºè¢«æ‰§è¡Œtorch.squeeze()ç»´åº¦å‹ç¼©æ“ä½œï¼Œå¯¼è‡´æ­¤ç»´åº¦æ¶ˆå¤±ï¼Œæœ€ç»ˆè¾“å‡ºå¼ é‡ä¼šæ¯”è¾“å…¥å¼ é‡å°‘ä¸€ä¸ªç»´åº¦ã€‚</p>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>input (Tensor) - è¾“å…¥å¼ é‡</li>
<li>dim (int) - æŒ‡å®šè¿›è¡Œå‡å€¼è®¡ç®—çš„ç»´åº¦</li>
<li>keepdim (bool, optional) - è¾“å‡ºå¼ é‡æ˜¯å¦ä¿æŒä¸è¾“å…¥å¼ é‡æœ‰ç›¸åŒæ•°é‡çš„ç»´åº¦</li>
<li>out (Tensor) - ç»“æœå¼ é‡</li>
</ul>
<p><strong>ä¾‹å­ï¼š</strong></p>
<blockquote>
<p>a = torch.randn(4, 5) a 0.3168 0.4953 -0.6758 -0.5559 -0.6906 0.2241 2.2450 1.5735 -1.3815 -1.5199 0.0033 0.5236 -0.9070 -0.5961 -2.1281 0.9605 1.5314 -0.6555 -1.2584 -0.4160 [torch.FloatTensor of size 4x5] torch.mean(a, 1, True) -0.2220 0.2283 -0.6209 0.0324 [torch.FloatTensor of size 4x1]</p>
</blockquote>
<h3 id="np.triu-np.tril">np.triu() &amp; np.tril()</h3>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">triu</span>ï¼ˆ<span class="title">m</span>ï¼Œ <span class="title">k</span>ï¼‰ï¼š</span></span><br><span class="line"><span class="function">#å–ä¸Šä¸‰è§’é˜µ  </span></span><br><span class="line"><span class="function">#<span class="title">m</span>ï¼šè¡¨ç¤ºä¸€ä¸ªçŸ©é˜µ</span></span><br><span class="line"><span class="function">#<span class="title">K</span>ï¼šè¡¨ç¤ºå¯¹è§’çº¿çš„èµ·å§‹ä½ç½®ï¼ˆ<span class="title">k</span>å–å€¼é»˜è®¤ä¸º0ï¼‰</span></span><br><span class="line"><span class="function"></span></span><br><span class="line">#k=0è¡¨ç¤ºæ­£å¸¸çš„ä¸Šä¸‰è§’çŸ©é˜µ</span><br><span class="line"><span class="comment">#k=-1è¡¨ç¤ºå¯¹è§’çº¿çš„ä½ç½®ä¸‹ç§»1ä¸ªå¯¹è§’çº¿</span></span><br><span class="line"><span class="comment">#k=1è¡¨ç¤ºå¯¹è§’çº¿çš„ä½ç½®ä¸Šç§»1ä¸ªå¯¹è§’çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒç†ï¼Œnp.trilå–ä¸‹ä¸‰è§’é˜µ</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><a href="https://blog.csdn.net/weixin_37724529/article/details/102881776" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/weixin_37724529/article/details/102881776</a></p>
</blockquote>
<h3 id="pytorch-forwardçš„ä½¿ç”¨ä»¥åŠåŸç†---pytorchä½¿ç”¨">pytorch forwardçš„ä½¿ç”¨ä»¥åŠåŸç† --pytorchä½¿ç”¨</h3>
<blockquote>
<p><a href="https://blog.csdn.net/u011501388/article/details/84062483" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/u011501388/article/details/84062483</a></p>
</blockquote>
<h3 id="pytorch-torch.nn.parameterè¯¦è§£">PyTorch torch.nn.Parameter()è¯¦è§£</h3>
<blockquote>
<p><a href="https://cloud.tencent.com/developer/article/1608348" target="_blank" rel="noopener" class="uri">https://cloud.tencent.com/developer/article/1608348</a></p>
</blockquote>
<h3 id="pytorch-view">pytorch view()</h3>
<p>PyTorchä¸­<strong>view</strong>å‡½æ•°ä½œç”¨ä¸ºé‡æ„å¼ é‡çš„ç»´åº¦</p>
<blockquote>
<p>torch.view(å‚æ•°a,å‚æ•°b,.....)ï¼Œå…¶ä¸­å‚æ•°a=3,å‚æ•°b=2å†³å®šäº†å°†ä¸€ç»´çš„tt1é‡æ„æˆ3*2ç»´çš„å¼ é‡ã€‚ æœ‰æ—¶å€™ä¼šå‡ºç°torch.view(-1)æˆ–è€…torch.view(å‚æ•°a,-1)è¿™ç§æƒ…å†µã€‚åˆ™-1å‚æ•°æ˜¯éœ€è¦ä¼°ç®—çš„ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">tt3=torch.tensor([[<span class="number">-0.3623</span>,<span class="number">-0.6115</span>],[<span class="number">0.7283</span>,<span class="number">0.4699</span>],[<span class="number">2.3261</span>,<span class="number">0.1599</span>]])</span><br><span class="line">result2=tt3.view(<span class="number">2</span>,<span class="number">-1</span>).contiguous()</span><br></pre></td></tr></tbody></table></figure>
<p>åˆ™<code>result2</code>ä¸º</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tensor</span>(<span class="selector-attr">[[-0.3623, -0.6115,  0.7283]</span>,</span><br><span class="line">        <span class="selector-attr">[ 0.4699,  2.3261,  0.1599]</span>])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="pytorch-model.parameters">pytorch model.parameters()</h3>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè·å¾—æ¨¡å‹çš„å‚æ•°ä¿¡æ¯ ã€‚</p>
<p>model.parameters()æ–¹æ³•<strong>è¿”å›çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨generatorï¼Œæ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä»å¼€å¤´åˆ°ç»“å°¾çš„å‚æ•°</strong>ï¼Œparametersæ²¡æœ‰å¯¹åº”çš„keyåç§°ï¼Œæ˜¯ä¸€ä¸ªç”±çº¯å‚æ•°ç»„æˆçš„generatorï¼ŒæŸ¥çœ‹Moduleçš„å‚æ•°ä¿¡æ¯ï¼Œ<strong>ç”¨äºæ›´æ–°å‚æ•°ï¼Œæˆ–è€…ç”¨äºæ¨¡å‹çš„ä¿å­˜ã€‚</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_27825451/article/details/95888267" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_27825451/article/details/95888267</a></p>
</blockquote>
<h3 id="pytorch-torch.optim.lr_scheduler">pytorch torch.optim.lr_scheduler</h3>
<p>ç”¨äºè®¾ç½®å­¦ä¹ ç‡çš„è¡°å‡</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/69411064" target="_blank" rel="noopener" class="uri">https://zhuanlan.zhihu.com/p/69411064</a></p>
</blockquote>
<h3 id="pytorch-torch.gather">pytorch torch.gatherï¼ˆï¼‰</h3>
<p>ä¾‹å­</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">b = torch.Tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="keyword">print</span> b</span><br><span class="line">index_1 = torch.LongTensor([[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">2</span>,<span class="number">0</span>]])</span><br><span class="line">index_2 = torch.LongTensor([[<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]])</span><br><span class="line"><span class="keyword">print</span> torch.gather(b, dim=<span class="number">1</span>, index=index_1)</span><br><span class="line"><span class="keyword">print</span> torch.gather(b, dim=<span class="number">0</span>, index=index_2)</span><br></pre></td></tr></tbody></table></figure>
<p>è§‚å¯Ÿå®ƒçš„è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> 1  2  3</span><br><span class="line"> 4  5  6</span><br><span class="line">[torch.FloatTensor of size 2x3]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 1  2</span><br><span class="line"> 6  4</span><br><span class="line">[torch.FloatTensor of size 2x2]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 1  5  6</span><br><span class="line"> 1  2  3</span><br><span class="line">[torch.FloatTensor of size 2x3]</span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é‡Œæ˜¯å®˜æ–¹æ–‡æ¡£çš„è§£é‡Š</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">torch.gather(input, dim, index, out=None) â†’ Tensor</span><br><span class="line"></span><br><span class="line">    Gathers values along an axis specified by dim.</span><br><span class="line"></span><br><span class="line">    For a 3-D tensor the output is specified by:</span><br><span class="line"></span><br><span class="line">    out[i][j][k] = input[index[i][j][k]][j][k]  # dim=0</span><br><span class="line">    out[i][j][k] = input[i][index[i][j][k]][k]  # dim=1</span><br><span class="line">    out[i][j][k] = input[i][j][index[i][j][k]]  # dim=2</span><br><span class="line"></span><br><span class="line">    Parameters:	</span><br><span class="line"></span><br><span class="line">        input (Tensor) â€“ The source tensor</span><br><span class="line">        dim (int) â€“ The axis along which to index</span><br><span class="line">        index (LongTensor) â€“ The indices of elements to gather</span><br><span class="line">        out (Tensor, optional) â€“ Destination tensor</span><br><span class="line"></span><br><span class="line">    Example:</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt; t = torch.Tensor([[1,2],[3,4]])</span><br><span class="line">    &gt;&gt;&gt; torch.gather(t, 1, torch.LongTensor([[0,0],[1,0]]))</span><br><span class="line">     1  1</span><br><span class="line">     4  3</span><br><span class="line">    [torch.FloatTensor of size 2x2]</span><br></pre></td></tr></tbody></table></figure>
<p><span class="github-emoji" style="display:inline;vertical-align:middle;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8">â­</span> å¯ä»¥çœ‹å‡ºï¼Œgatherçš„ä½œç”¨æ˜¯è¿™æ ·çš„ï¼Œindexå®é™…ä¸Šæ˜¯ç´¢å¼•ï¼Œå…·ä½“æ˜¯è¡Œè¿˜æ˜¯åˆ—çš„ç´¢å¼•è¦çœ‹å‰é¢dim çš„æŒ‡å®šï¼Œæ¯”å¦‚å¯¹äºæˆ‘ä»¬çš„æ —å­ï¼Œã€1,2,3;4,5,6,ã€‘ï¼ŒæŒ‡å®šdim=1ï¼Œä¹Ÿå°±æ˜¯æ¨ªå‘ï¼Œé‚£ä¹ˆç´¢å¼•å°±æ˜¯åˆ—å·ã€‚indexçš„å¤§å°å°±æ˜¯è¾“å‡ºçš„å¤§å°ï¼Œæ‰€ä»¥æ¯”å¦‚indexæ˜¯ã€1,0;0,0ã€‘ï¼Œé‚£ä¹ˆçœ‹indexç¬¬ä¸€è¡Œï¼Œ1åˆ—æŒ‡çš„æ˜¯2ï¼Œ 0åˆ—æŒ‡çš„æ˜¯1ï¼ŒåŒç†ï¼Œç¬¬äºŒè¡Œä¸º4ï¼Œ4 ã€‚è¿™æ ·å°±è¾“å…¥ä¸ºã€2,1;4,4ã€‘ï¼Œå‚è€ƒè¿™æ ·çš„è§£é‡Šçœ‹ä¸Šé¢çš„è¾“å‡ºç»“æœï¼Œå³å¯ç†è§£gatherçš„å«ä¹‰ã€‚</p>
<p>gatheråœ¨one-hotä¸ºè¾“å‡ºçš„å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œå¯ä»¥æŠŠæœ€å¤§å€¼åæ ‡ä½œä¸ºindexä¼ è¿›å»ï¼Œç„¶åæå–åˆ°æ¯ä¸€è¡Œçš„æ­£ç¡®é¢„æµ‹ç»“æœï¼Œè¿™ä¹Ÿæ˜¯gatherå¯èƒ½çš„ä¸€ä¸ªä½œç”¨ã€‚</p>
<blockquote>
<p><a href="https://blog.csdn.net/edogawachia/article/details/80515038" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/edogawachia/article/details/80515038</a></p>
<p><a href="https://www.cnblogs.com/HongjianChen/p/9451526.html" target="_blank" rel="noopener" class="uri">https://www.cnblogs.com/HongjianChen/p/9451526.html</a></p>
</blockquote>
<h3 id="pytorch-æŸå¤±å‡½æ•°nlllosså’Œcrossentropyloss">pytorch æŸå¤±å‡½æ•°NLLLosså’ŒCrossEntropyLoss ()</h3>
<blockquote>
<p><a href="https://blog.csdn.net/qq_22210253/article/details/85229988" target="_blank" rel="noopener" class="uri">https://blog.csdn.net/qq_22210253/article/details/85229988</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/98785902" target="_blank" rel="noopener" class="uri">https://zhuanlan.zhihu.com/p/98785902</a></p>
</blockquote>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>

    
    
    

      <div style="text-align:center;color: #ccc;font-size:14px;">-------------æœ¬æ–‡ç»“æŸ<i class="fab fa-gratipay"></i>æ„Ÿè°¢é˜…è¯»-------------</div>
        <div class="reward-container">
  <div>å‘å¾®åšä¸»ï¼Œåœ¨çº¿æ±‚èµ</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="ææ€å»º å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>

  </div>
</div>

    
      
   
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/05/2020-09-05-%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82/" rel="prev" title="2020-09-05-çŸ¥è¯†ç‚¹æ‚">
      <i class="fa fa-chevron-left"></i> 2020-09-05-çŸ¥è¯†ç‚¹æ‚
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/09/06/2020-09-06-%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7%E7%A0%94%E7%A9%B6/" rel="next" title="2020-09-06-ä¸ç¡®å®šæ€§ç ”ç©¶">
      2020-09-06-ä¸ç¡®å®šæ€§ç ”ç©¶ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  





          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#others"><span class="nav-number">1.</span> <span class="nav-text">ğŸš€others</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pythonçš„einops-rearrangeå‡½æ•°"><span class="nav-number">1.1.</span> <span class="nav-text">pythonçš„einops rearrange()å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#epochiterationbatch_size"><span class="nav-number">1.2.</span> <span class="nav-text">Epochã€Iterationã€Batch_size</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tensorflow"><span class="nav-number">2.</span> <span class="nav-text">ğŸš€tensorflow</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.tileç”¨æ³•"><span class="nav-number">2.1.</span> <span class="nav-text">tf.tile()ç”¨æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dataset-api-å’Œ-iterator"><span class="nav-number">2.2.</span> <span class="nav-text">Dataset API å’Œ Iterator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf-strip-å’Œ-split"><span class="nav-number">2.3.</span> <span class="nav-text">tf strip() å’Œ split()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#summaryç”¨æ³•--tensorboradå¯è§†åŒ–"><span class="nav-number">2.4.</span> <span class="nav-text">Summaryç”¨æ³• -tensorboradå¯è§†åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#math.ceil"><span class="nav-number">2.5.</span> <span class="nav-text">math.ceil()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#format-æ ¼å¼åŒ–å‡½æ•°"><span class="nav-number">2.6.</span> <span class="nav-text">.format() æ ¼å¼åŒ–å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.shapea-å’Œ-a.get_shape.as_list-å’Œ-tf.split"><span class="nav-number">2.7.</span> <span class="nav-text">tf.shape(A) å’Œ A.get_shape().as_list() å’Œ tf.split()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.range"><span class="nav-number">2.8.</span> <span class="nav-text">tf.range()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#os.path"><span class="nav-number">2.9.</span> <span class="nav-text">os.pathï¼ˆï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#embedding_lookup"><span class="nav-number">2.10.</span> <span class="nav-text">embedding_lookup()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¨¡å‹ä¿å­˜å’ŒåŠ è½½"><span class="nav-number">2.11.</span> <span class="nav-text">æ¨¡å‹ä¿å­˜å’ŒåŠ è½½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tensorflowæ¨¡å‹ä¿å­˜å’Œè¯»å–tf.train.saver"><span class="nav-number">2.12.</span> <span class="nav-text">Tensorflowæ¨¡å‹ä¿å­˜å’Œè¯»å–tf.train.Saver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#saverä¸­çš„max_to_keep-å‚æ•°"><span class="nav-number">2.13.</span> <span class="nav-text">Saverä¸­çš„max_to_keep å‚æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kerasä¸­çš„timedistributedå‡½æ•°"><span class="nav-number">2.14.</span> <span class="nav-text">kerasä¸­çš„TimeDistributedå‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.concatè¯¦è§£"><span class="nav-number">2.15.</span> <span class="nav-text">tf.concat()è¯¦è§£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shape"><span class="nav-number">2.16.</span> <span class="nav-text">shape</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#keras-çš„-fitå‡½æ•°"><span class="nav-number">2.17.</span> <span class="nav-text">keras çš„ fitå‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#model-ç±»ç»§æ‰¿"><span class="nav-number">2.18.</span> <span class="nav-text">Model ç±»ç»§æ‰¿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…³äºtensorflowçš„sessiontensorshapeç­‰åŸºç¡€çŸ¥è¯†æ•´ç†"><span class="nav-number">2.19.</span> <span class="nav-text">å…³äºtensorflowçš„sessionã€tensorã€shapeç­‰åŸºç¡€çŸ¥è¯†ï¼ˆæ•´ç†ï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.layers.flatten"><span class="nav-number">2.20.</span> <span class="nav-text">tf.layers.flatten</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.layers.dense"><span class="nav-number">2.21.</span> <span class="nav-text">tf.layers.dense</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python---tensorflowä¸­-none-1å’Œä¹‹é—´çš„åŒºåˆ«"><span class="nav-number">2.22.</span> <span class="nav-text">python - Tensorflowä¸­ Noneï¼Œ-1å’Œï¼Ÿä¹‹é—´çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kerasçš„-call-å‡½æ•°build-å‡½æ•°"><span class="nav-number">2.23.</span> <span class="nav-text">kerasçš„ call å‡½æ•°ã€build å‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.expand_dims"><span class="nav-number">2.24.</span> <span class="nav-text">tf.expand_dimsï¼ˆï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tf.boolean_mask"><span class="nav-number">2.25.</span> <span class="nav-text">tf.boolean_maskï¼ˆï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pytorch"><span class="nav-number">3.</span> <span class="nav-text">ğŸš€pytorch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-torch.nn.parameter"><span class="nav-number">3.1.</span> <span class="nav-text">PyTorch torch.nn.Parameter()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-nn.linear"><span class="nav-number">3.2.</span> <span class="nav-text">PyTorch nn.Linearï¼ˆï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-nn.embedding-è¯å‘é‡"><span class="nav-number">3.3.</span> <span class="nav-text">pytorch nn.embedding() è¯å‘é‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-torch.mean"><span class="nav-number">3.4.</span> <span class="nav-text">pytorch torch.mean()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#np.triu-np.tril"><span class="nav-number">3.5.</span> <span class="nav-text">np.triu() &amp; np.tril()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-forwardçš„ä½¿ç”¨ä»¥åŠåŸç†---pytorchä½¿ç”¨"><span class="nav-number">3.6.</span> <span class="nav-text">pytorch forwardçš„ä½¿ç”¨ä»¥åŠåŸç† --pytorchä½¿ç”¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-torch.nn.parameterè¯¦è§£"><span class="nav-number">3.7.</span> <span class="nav-text">PyTorch torch.nn.Parameter()è¯¦è§£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-view"><span class="nav-number">3.8.</span> <span class="nav-text">pytorch view()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-model.parameters"><span class="nav-number">3.9.</span> <span class="nav-text">pytorch model.parameters()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-torch.optim.lr_scheduler"><span class="nav-number">3.10.</span> <span class="nav-text">pytorch torch.optim.lr_scheduler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-torch.gather"><span class="nav-number">3.11.</span> <span class="nav-text">pytorch torch.gatherï¼ˆï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pytorch-æŸå¤±å‡½æ•°nlllosså’Œcrossentropyloss"><span class="nav-number">3.12.</span> <span class="nav-text">pytorch æŸå¤±å‡½æ•°NLLLosså’ŒCrossEntropyLoss ()</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ææ€å»º"
      src="/images/touxiang.jpg">
  <p class="site-author-name" itemprop="name">ææ€å»º</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element">
    <a onclick="tidioChatApi.open();"><i class="fa fa-comment"></i>
    Chat
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/OopsAaron" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;OopsAaron" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:li1574468139@outlook.com" title="E-Mail â†’ mailto:li1574468139@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5871697996" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5871697996" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/AaronLe48891280" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;AaronLe48891280" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://ife.baidu.com/" title="http:&#x2F;&#x2F;ife.baidu.com&#x2F;" rel="noopener" target="_blank">ç™¾åº¦å‰ç«¯æŠ€æœ¯å­¦é™¢</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://wf.uisdc.com/cn/" title="http:&#x2F;&#x2F;wf.uisdc.com&#x2F;cn&#x2F;" rel="noopener" target="_blank">googleå‰ç«¯å¼€å‘åŸºç¡€</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>

 


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fas fa-atom"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ææ€å»º</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">401k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">6:04</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>


        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>
  
        
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>



  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>






  <script src="//code.tidio.co/6hx5cq5nmltu08pt7pfkqy85wvgnhr1r.js"></script>







    <div id="pjax">
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'V06xtKF2qonsMYpPA6OqiRH0-gzGzoHsz',
      appKey     : 'Q8gXivQlmWVnr48ahETG2v5X',
      placeholder: "Just go go",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
  


</body>


</html>
