<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/robot-4291692_1280.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/robot-4291692_1280.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-barber-shop.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <meta name="description" content="transformer代码注解">
<meta property="og:type" content="article">
<meta property="og:title" content="2020-07-25-transformer代码">
<meta property="og:url" content="http://yoursite.com/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/index.html">
<meta property="og:site_name" content="思建的NLP之旅">
<meta property="og:description" content="transformer代码注解">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://render.githubusercontent.com/render/math?math=%5CLarge%7BPE_%7B(pos%252C%202i)%7D%20%253D%20sin(pos%20%252F%2010000%5E%7B2i%20%252F%20d_%7Bmodel%7D%7D)%7D%20%2524%2524%2524%2524%5CLarge%7BPE_%7B(pos%252C%202i%252B1)%7D%20%253D%20cos(pos%20%252F%2010000%5E%7B2i%20%252F%20d_%7Bmodel%7D%7D)%7D&amp;mode=display">
<meta property="og:image" content="data:image/png;base64,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%0A">
<meta property="og:image" content="https://camo.githubusercontent.com/22371733ed7ffa9065a60e80d3b83b10d832072a/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f7363616c65645f617474656e74696f6e2e706e67">
<meta property="og:image" content="https://render.githubusercontent.com/render/math?math=%5CLarge%7BAttention(Q%252C%20K%252C%20V)%20%253D%20softmax_k(%5Cfrac%7BQK%5ET%7D%7B%5Csqrt%7Bd_k%7D%7D)%20V%7D&amp;mode=display">
<meta property="og:image" content="https://camo.githubusercontent.com/5464abc4535579fdb88afb7117617f6f23ff50af/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f6d756c74695f686561645f617474656e74696f6e2e706e67">
<meta property="og:image" content="https://camo.githubusercontent.com/ce5d9e0b508ffa8c84c943258c677b7576f35757/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f7472616e73666f726d65722e706e67">
<meta property="og:image" content="https://render.githubusercontent.com/render/math?math=%5CLarge%7Blrate%20%253D%20d_%7Bmodel%7D%5E%7B-0.5%7D%20*%20min(step%7B%5C_%7Dnum%5E%7B-0.5%7D%252C%20step%7B%5C_%7Dnum%20*%20warmup%7B%5C_%7Dsteps%5E%7B-1.5%7D)%7D&amp;mode=display">
<meta property="og:image" content="data:image/png;base64,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%0A">
<meta property="article:published_time" content="2020-07-25T02:40:24.000Z">
<meta property="article:modified_time" content="2020-08-10T16:15:50.165Z">
<meta property="article:author" content="李思建">
<meta property="article:tag" content="transformer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://render.githubusercontent.com/render/math?math=%5CLarge%7BPE_%7B(pos%252C%202i)%7D%20%253D%20sin(pos%20%252F%2010000%5E%7B2i%20%252F%20d_%7Bmodel%7D%7D)%7D%20%2524%2524%2524%2524%5CLarge%7BPE_%7B(pos%252C%202i%252B1)%7D%20%253D%20cos(pos%20%252F%2010000%5E%7B2i%20%252F%20d_%7Bmodel%7D%7D)%7D&amp;mode=display">

<link rel="canonical" href="http://yoursite.com/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>2020-07-25-transformer代码 | 思建的NLP之旅</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>



<link rel="alternate" href="/atom.xml" title="思建的NLP之旅" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>




    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">思建的NLP之旅</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">沉淀自己</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">25</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">21</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">54</span></a>

  </li>
        <li class="menu-item menu-item-tools">

    <a href="/tools/" rel="section"><i class="fas fa-location-arrow fa-fw"></i>利器</a>

  </li>
        <li class="menu-item menu-item-onesentence">

    <a href="/onesentence" rel="section"><i class="fas fa-bowling-ball fa-fw"></i>一句话</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links" rel="section"><i class="fas fa-link fa-fw"></i>大佬</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/OopsAaron" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/touxiang.jpg">
      <meta itemprop="name" content="李思建">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="思建的NLP之旅">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          2020-07-25-transformer代码
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-25 10:40:24" itemprop="dateCreated datePublished" datetime="2020-07-25T10:40:24+08:00">2020-07-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-11 00:15:50" itemprop="dateModified" datetime="2020-08-11T00:15:50+08:00">2020-08-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/transformer/" itemprop="url" rel="index"><span itemprop="name">transformer</span></a>
                </span>
            </span>

          
            <span id="/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/" class="post-meta-item leancloud_visitors" data-flag-title="2020-07-25-transformer代码" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/25/2020-07-25-transformer%E4%BB%A3%E7%A0%81/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>27k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>25 分钟</span>
            </span>
            <div class="post-description">transformer代码注解</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="tensorflow-2.0-教程-transformer">TensorFlow 2.0 教程-Transformer</h1>
<p>这里我们将实现一个Transformer模型，将葡萄牙语翻译为英语。Transformer的核心思想是self-attention--通过关注序列不同位置的内容获取句子的表示。</p>
<p>Transformer的一些优点：</p>
<ul>
<li>不受限于数据的时间/空间关系</li>
<li>可以并行计算</li>
<li>远距离token的相互影响不需要通过很长的时间步或很深的卷积层</li>
<li>可以学习远程依赖</li>
</ul>
<p>Transformer的缺点：</p>
<ul>
<li>对于时间序列，输出需要根据整个历史，而不是当前状态和输入，可能造成效率较低</li>
<li>如果想要获取时间空间信息，需要额外的位置编码</li>
</ul>
<p>In [1]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from __future__ import absolute_import, division, print_function, unicode_literals</span><br><span class="line"># 安装tfds pip install tfds-nightly==1.0.2.dev201904090105</span><br><span class="line">import tensorflow_datasets as tfds</span><br><span class="line">import tensorflow as tf</span><br><span class="line">import tensorflow.keras.layers as layers</span><br><span class="line"></span><br><span class="line">import time</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">print(tf.__version__)</span><br><span class="line">2.0.0-alpha0</span><br></pre></td></tr></tbody></table></figure>
<h2 id="数据输入pipeline">1.数据输入pipeline</h2>
<p>我们将使用到Portugese-English翻译数据集。</p>
<p>该数据集包含大约50000个训练样例，1100个验证示例和2000个测试示例。</p>
<p>tfds.load :加载数据集.1.下载数据并将其另存为tfrecord文件. 2.加载tfrecord并创建tf.data.Dataset. metadata: 元数据 用于描述数据的数据，比如数码照片的EXIF信息，它就是一种用来描述数码图片的元数据</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">examples, metadata = tfds.load('ted_hrlr_translate/pt_to_en', with_info=True,</span><br><span class="line">                              as_supervised=True)</span><br></pre></td></tr></tbody></table></figure>
<p>将数据转化为subwords格式</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_examples, val_examples = examples['train'], examples['validation']</span><br></pre></td></tr></tbody></table></figure>
<p>把单词用英语和葡萄牙语分别进行编码</p>
<p>2**13： 2的3次方大小的词汇表大小</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tokenizer_en = tfds.features.text.SubwordTextEncoder.build_from_corpus(</span><br><span class="line">(en.numpy() for pt, en in train_examples), target_vocab_size=2**13)</span><br><span class="line">tokenizer_pt = tfds.features.text.SubwordTextEncoder.build_from_corpus(</span><br><span class="line">(pt.numpy() for pt, en in train_examples), target_vocab_size=2**13)</span><br></pre></td></tr></tbody></table></figure>
<p>token转化测试</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sample_str = 'hello world, tensorflow 2'</span><br><span class="line">tokenized_str = tokenizer_en.encode(sample_str)</span><br><span class="line">print(tokenized_str)</span><br><span class="line">original_str = tokenizer_en.decode(tokenized_str)</span><br><span class="line">print(original_str)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[3222, 439, 150, 7345, 1378, 2824, 2370, 7881]</span><br><span class="line">hello world, tensorflow 2</span><br></pre></td></tr></tbody></table></figure>
<p>添加start、end的token表示</p>
<p>lang1：用于葡萄牙语翻译的开始</p>
<p>lang2：用于英语翻译完成的结束</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def encode(lang1, lang2):</span><br><span class="line">    lang1 = [tokenizer_pt.vocab_size] + tokenizer_pt.encode(</span><br><span class="line">        lang1.numpy()) + [tokenizer_pt.vocab_size+1]</span><br><span class="line">    lang2 = [tokenizer_en.vocab_size] + tokenizer_en.encode(</span><br><span class="line">        lang2.numpy()) + [tokenizer_en.vocab_size+1]</span><br><span class="line">    return lang1, lang2</span><br></pre></td></tr></tbody></table></figure>
<p>过滤长度超过40的数据</p>
<p>tf.logical_and ： 与运算</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MAX_LENGTH=40</span><br><span class="line">def filter_long_sent(x, y, max_length=MAX_LENGTH):</span><br><span class="line">    return tf.logical_and(tf.size(x) &lt;= max_length,</span><br><span class="line">                         tf.size(y) &lt;= max_length)</span><br></pre></td></tr></tbody></table></figure>
<p>将python运算，转换为tensorflow运算节点。</p>
<p>这是一个可以把 TensorFlow 和 Python 原生代码无缝衔接起来的函数，有了它，你就可以在 TensorFlow 里面自由的实现你想要的功能，而不用考虑 TensorFlow 有没有实现它的 API</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def tf_encode(pt, en):</span><br><span class="line">    return tf.py_function(encode, [pt, en], [tf.int64, tf.int64])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="构造数据集">构造数据集</h3>
<p>In [9]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">BUFFER_SIZE = 20000</span><br><span class="line">BATCH_SIZE = 64</span><br><span class="line"></span><br><span class="line"># 使用.map()运行相关图操作</span><br><span class="line">train_dataset = train_examples.map(tf_encode)</span><br><span class="line"># 过滤过长的数据</span><br><span class="line">train_dataset = train_dataset.filter(filter_long_sent) # 这个函数为什么不加（） ？？？</span><br><span class="line"># 使用缓存数据加速读入</span><br><span class="line">train_dataset = train_dataset.cache()</span><br><span class="line"># 打乱并获取批数据</span><br><span class="line">train_dataset = train_dataset.padded_batch(</span><br><span class="line">BATCH_SIZE, padded_shapes=([40], [40]))  # 填充为最大长度-90</span><br><span class="line"># 设置预取数据</span><br><span class="line">train_dataset = train_dataset.prefetch(tf.data.experimental.AUTOTUNE)</span><br><span class="line"></span><br><span class="line"># 验证集数据</span><br><span class="line">val_dataset = val_examples.map(tf_encode)</span><br><span class="line">val_dataset = val_dataset.filter(filter_long_sent).padded_batch(</span><br><span class="line">BATCH_SIZE, padded_shapes=([40], [40]))</span><br></pre></td></tr></tbody></table></figure>
<p>In [10]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">de_batch, en_batch = next(iter(train_dataset))</span><br><span class="line">de_batch, en_batch</span><br></pre></td></tr></tbody></table></figure>
<p>Out[10]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(&lt;tf.Tensor: id=311363, shape=(64, 40), dtype=int64, numpy=</span><br><span class="line"> array([[8214,  116,   84, ...,    0,    0,    0],</span><br><span class="line">        [8214,    7,  261, ...,    0,    0,    0],</span><br><span class="line">        [8214,  155,   39, ...,    0,    0,    0],</span><br><span class="line">        ...,</span><br><span class="line">        [8214,  639,  590, ...,    0,    0,    0],</span><br><span class="line">        [8214,  204, 3441, ...,    0,    0,    0],</span><br><span class="line">        [8214,   27,   13, ...,    0,    0,    0]])&gt;,</span><br><span class="line"> &lt;tf.Tensor: id=311364, shape=(64, 40), dtype=int64, numpy=</span><br><span class="line"> array([[8087,   83,  145, ...,    0,    0,    0],</span><br><span class="line">        [8087, 4670, 1783, ...,    0,    0,    0],</span><br><span class="line">        [8087,  169,   56, ...,    0,    0,    0],</span><br><span class="line">        ...,</span><br><span class="line">        [8087,  174,   79, ...,    0,    0,    0],</span><br><span class="line">        [8087,   11,   16, ...,    0,    0,    0],</span><br><span class="line">        [8087,    4,   12, ...,    0,    0,    0]])&gt;)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="位置嵌入">2.位置嵌入</h2>
<p>将位置编码矢量添加得到词嵌入，相同位置的词嵌入将会更接近，但并不能直接编码相对位置</p>
<p>基于角度的位置编码方法如下：</p>
<p><img src="https://render.githubusercontent.com/render/math?math=%5CLarge%7BPE_%7B%28pos%2C%202i%29%7D%20%3D%20sin%28pos%20%2F%2010000%5E%7B2i%20%2F%20d_%7Bmodel%7D%7D%29%7D%20%24%24%24%24%5CLarge%7BPE_%7B%28pos%2C%202i%2B1%29%7D%20%3D%20cos%28pos%20%2F%2010000%5E%7B2i%20%2F%20d_%7Bmodel%7D%7D%29%7D&amp;mode=display" alt="\Large{PE_{(pos, 2i)} = sin(pos / 10000^{2i / d_{model}})} \Large{PE_{(pos, 2i+1)} = cos(pos / 10000^{2i / d_{model}})} "></p>
<p>得到角度</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def get_angles(pos, i, d_model):</span><br><span class="line">    # 这里的i等价与上面公式中的2i和2i+1</span><br><span class="line">    angle_rates = 1 / np.power(10000, (2*(i // 2))/ np.float32(d_model))</span><br><span class="line">    return pos * angle_rates</span><br></pre></td></tr></tbody></table></figure>
<p>In [12]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def positional_encoding(position, d_model):</span><br><span class="line">	#numpy.arange(start, stop, step, dtype = None) np.arange(position) = [0,...,position-1]</span><br><span class="line">    angle_rads = get_angles(np.arange(position)[:, np.newaxis],   # shape(position,1)</span><br><span class="line">                           np.arange(d_model)[np.newaxis,:],  # shape(1,d_model)</span><br><span class="line">                           d_model)</span><br><span class="line">    # 第2i项使用sin</span><br><span class="line">    sines = np.sin(angle_rads[:, 0::2])  #从0开始，步长为2</span><br><span class="line">    # 第2i+1项使用cos</span><br><span class="line">    cones = np.cos(angle_rads[:, 1::2]) #从1开始，步长为2</span><br><span class="line">    pos_encoding = np.concatenate([sines, cones], axis=-1)</span><br><span class="line">    pos_encoding = pos_encoding[np.newaxis, ...]</span><br><span class="line">    </span><br><span class="line">    return tf.cast(pos_encoding, dtype=tf.float32)</span><br></pre></td></tr></tbody></table></figure>
<p>获得位置嵌入编码</p>
<p>position： 一句话中某个token的位置（0-50）， 如果一句话不够50个单词，那么就需要padding</p>
<p>depth ： 对每一个token进行编码 d_model：512维</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pos_encoding = positional_encoding(50, 512)</span><br><span class="line">print(pos_encoding.shape)</span><br><span class="line"></span><br><span class="line">plt.pcolormesh(pos_encoding[0], cmap='RdBu')</span><br><span class="line">plt.xlabel('Depth')</span><br><span class="line">plt.xlim((0, 512))</span><br><span class="line">plt.ylabel('Position')</span><br><span class="line">plt.colorbar()</span><br><span class="line">plt.show() # 在这里左右边分别为原来2i 和 2i+1的特征</span><br><span class="line">(1, 50, 512)</span><br></pre></td></tr></tbody></table></figure>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAX0AAAEKCAYAAAD+XoUoAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDMuMC4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvnQurowAAIABJREFUeJzsnXl4VNX5xz/n3lmTmewrSSCsAoosooJYFfd9t6K1xarVWqu1LnVrtVVrtbbazbqW/tSquFVFxAVF6wqyiMoiENaQhOzrZNZ7z++PeyeZhAADJEjwfJ7nPHebO3MyDGfOvO/5fl8hpUShUCgU3w20b7sDCoVCodhzqEFfoVAovkOoQV+hUCi+Q6hBX6FQKL5DqEFfoVAovkOoQV+hUCi+Q/TpoC+E2CCE+FoIsVQIscg+lyWEmCuEWGNvM/uyDwqFQvFtIYSYIYSoEUIs28Z1IYT4mxCiTAjxlRBiQsK16fY4uUYIMb23+rQnZvpTpZTjpJQT7eObgfeklMOB9+xjhUKh2Bf5P+DE7Vw/CRhut8uBh8GaHAN3AIcChwB39NYE+dsI75wBPGnvPwmc+S30QaFQKPocKeWHQMN2HnIG8JS0mA9kCCEKgROAuVLKBillIzCX7X95JI2jN55kO0jgHSGEBB6VUj4G5Espq+zrW4D8nm4UQlyO9c0HwnFQjtSoT0mjZGAhrnVlrNVTGOmM4C3M5YtNzYwr9NCwsY7WksG0NLZyYIGLTasqSHdouEaNZNW6SlypfkYXptC8fA2tMZPcbC+OgUMoqwnQ3tQEpoHD6yMrK5UBfjc0VRPY0kRryCAqJQ4BKbqGx+9C97hwpqeBx0/YFLRGDNpCUUJhg1jUwIxFMGNRpGlab0Nc+SwECA2haQihIXQdoelomo4QAqFhbwWaJtCEQNcFuhBoGvbWOq8J6yk1Iaynje/HXwbrPFjX7Pe18z3u8n53e/+3+gfZwfUdnN/lR27jYS3hGOlOgRQaWqSdNa2QWr6BgvH7s3JzM+m15eQduD8r1lUxOjVKa22A0OCh1FTVMm5EEVVLl2NIKB5ZzKoWB+2N9fhzcxieptH0zXqaYyaZHgf+wQNo1lKoqGsnFg5hhINoDhduv4+8dA+ZHici0EC4oYlwc5j2mElUSiTWjMohBC5N4HJpOL1OHCluNI8bzZ2CdLiQmgNTQsyURExJ1DCJGCbRmCRimBiGiTQlpimRJkgp7WaCaSLtz5aU9mdMmkjo/LzZ2y7n2IEKv5+r9GWwvk5Kmbur92tpxZJYKNnXWg4kPvgxe5xLliKgPOF4s31uW+d3m74e9A+XUlYIIfKAuUKIbxIvSiml/YWwFfYb9xiAlpIjzwn6+L/RJ3LrP25h4Pmnc0bmQTxVuJEDb7sC38/f4uObh/PclU/y3u+eYu7LH/DZDSVcc8TNnJCdysA33ueIC37HwIOn8tltE3jjgBN4v7adK08bQ97fZnL6Q/P54rVXiYXayBs9hQunTeL2Y4bAK/ez8E9v8L9v6tkSipHl1JmQ4WG/oweROaKIvBNPRO4/lbXtDj7a2Mj/VtWwZn0jDVWttFZvJNRYTTTYhhmLIE0DAM3hQnO4cHp9ODypuFLTcaam40pJxe1x4vI6cLh03B4nbq+DFI+DjBQnPo8Tv9uBz2M1r1MnxamjCYHboeFxaDg1a9+paTh10bHVhUC3f9Pp9heEJhL2sb4M4l8i8XPQ+SWhia7jb+dju47KWpJfDlr3b5ltsK2HzV3XxAnFLqIOL95NizjtA51DfvkjbvrkEybc8g6nP3QtP3vvQ8aefy9vTKrig0c+ZcVfXuBvf3icT9++k7uzx9EcNfnTjD9y5PsZLH7xGaZccRmzj3cxe8rFzNnSxjml2Ux9+k7meA/i1hmLqFm7mqYNy0jNLWHE4Yfzs1NGct7oXPTPXmDDzFcpe7OMpfVBKkNRDAkuTZDj0hmc6qS4JI38MXnkHDgE/8gRuIYdiJlVQtiXT3vUpC5oUNkapqIlxOamIJsbg1Q1BWlqDRMKRAkHo0SCMSLhGKZhEg21Y4SDmLEIRixiTTKiEfuzZiJNA2kamPbnThpGx2cwvu2+v71z/Yno0n9v3K0niIVw7Hd6sq8VSghd9wv6NLwjpaywtzXAK1ixqWr75wv2tqYv+6BQKBQ7hRAITU+q9QIVQEnCcbF9blvnd5s+G/SFEKlCCH98HzgeWAbMAuKZ6OnAa33VB4VCodh5RMcv8h21XmAW8CN7Fc8koNkOf78NHC+EyLQTuMfb53abvgzv5AOv2D//HcCzUsq3hBALgReEEJcCG4Hv92EfFAqFYuewZ/q981TiOeAoIEcIsRlrRY4TQEr5CDAHOBkoA9qBH9vXGoQQdwEL7ae6U0q5vYRw0vTZoC+lXAeM7eF8PXDMzjxXanY2l40p5o3sSfxw0/O4P3iSQfev55lHr6P2gSMZONnB+zf8luOumMztb37B6CMOZuXf76PA42DMufvz5wUbiQaaGT++EHPRHL5uDpPvdlB0xDi+rA1SU95MLNSG5nCRnp/HmKJ03K1bqF5dTlNVG20x0+qHruFPd5OSl0ZqQTaO7AICDi9NoXYa2yPUt0WIBGMd8dZ4XLV7jNRK3mpoTlfnT0Uh0BwaukOzkrEaCE3gcmjommbH5TtbPCauC6tZid3O+H18mxgT77K/jfe6pxh69zh99+NtnU8+qZt8X+IM/M10Dij4KQ9/cA8PX/8PZp2WRm3jCZz08AKe+uX3eOkhuPjpJYw75Tjeu/unHHXZIdw5ZxUDxh6BOfcJasMGEzI8xMadQvk/nsGTnssZ44sILniaFS1hfA6NvDF5yIFjWLykiZa6RkKN1QB4MwvIyEmhJN2DI1BHtHoT7TVtNIdiBAwTw85S6QK8uobPoeFOc+NK8+JM9aKl+BEuL9KVQsSQdjNpjxqEYibBiEEkZhKJmRgxK5lrGhLTTtiaZmcarOMzZmz9Oet4jNG/Y/R7GoH1f7Q3kFJesIPrErhqG9dmADN6pSMJ9HUiV6FQKPoXQqD10kx/b0QN+gqFQtGN3grv7I2oQV+hUCgS6cWY/t6IGvQVCoUiAYFAczi/7W70Gf3CZXOEX5L11Ku8ff/ZPDj9cS791OTZm44ix+Xg2oc+4zeXHsycihYKr/sddasX8pvT9+fTd9YzpTSdQdMv4sNPN+FMTWfaxBIq3pxHdTjG6DQXqYcezScbG2iuXA+AKzWdzHwfo3N9iC1raCqrpDZsEDRMXJog3amRku0lpSAbd14OZmoWbRGThmCMmpYwoWCUSDjWKZqJRrok1+JJWy1hnW986Zfu0NA0W4lrJ3R1TeCwE7cuh2Ynde1kbjx5m5jU3UaGtXsyd1uJ2DjdhVm9TbLCrO3xyH9XsXnRu7yyspbZDz3Bu0dcSN3F97Bg5guM/uQhLjhtOEtmvcWjPxjP/IYgxb+4lYol73PyscNY/ths0p0aEyYX8e76Jho3LiO9ZBRHD85i8/tLqA7HyHc7KJg4jEZXNks2NhKo2UQk0Izu8uLNzGN4vp+iNDd6aw2BilraqgM0R00iCUlWlybw6gKPx4Er1YnLn4ozLQUtNQ3T5UU63ERsJW48iRuKWUncYCRGJGZaKlxbkWvGLHVuYuLW7GGhQHdhlmIn2bPr9Pc4aqavUCgU3eivA3oyqEFfoVAoEhGi15Zs7o2oQV+hUCgSEOzbM/1+EdPf8s0mvnf1c2i//hFRKXnxn08z/K37mX7jUaz/eBYXZdWS5dJ5cr3ElZrOUSl1LGsJMfbSw2kccQyVyxaRPWwCU0vTWf/uWgwJJRMKiA06iPdX1hCsr0R3eUnJHsB+gzIoSXMS3fgNzRtbqA0bHeZZWS4dX34qqQXZ6NmFmCmZtEVM6tsjNAQihIMxouEYRiRoO2z2IMxKiONrHTF+ga5raLq91QRCiI4YvsuhdcT2rXi+FcuPx/UhLtDqFGl1NFsiZZmodY2lJ5qt7Qp9FfNPhnsfvZAH/nojN954JIXjj+XVdY2cffc8UrIHMPOq/7D/Q/8k3NrAoCUzGeBx8HpDGkYkyC++V8r8TzYzKcvLqB9OZcanG4gGminar5hS0Uj5J+UEDckwn5P0ceMoawxRWd5MpK0RMxbBlZqOP8vL8AIfOV4HZs0m2ipqaa8P0hw1OmL6icIsZ6oLd7obZ1oKeqofLdWPdKZgOtwd4qxQzCRsC7PaIwbhBGGWETMxY6YV14/H9Lt9tjrN1Mwe369kzdYUgNDQHa6kWn9EzfQVCoUiEbFvz/TVoK9QKBQJCNQ6fYVCofhOsS8P+v0ipu/QoKl8JX+fsZTrH70Ity+Tx697Ccd1fyGteARfXHUjZxxdyp+f+5LSSVOpevhPVgx+2uU8t6yaQG05g8eU4F3zEV9taibLpVNy1GjKWiQV6xqJBJrxpOfgyy9h/KAMMmSA1tVradncQkvMinv6HBrpHgcpeT6cufk4cgowvBm0hA3q2yPUt4UJB6NEQyFikWCXwilxhKZ3mK0J3Y7tO11outZRKUtowortd8Tz9R7N1hLj+l0M2BLM1uL0ZITWfa28Jrqv5+8snhK/p6fn2ll2t3hKnGt953Lam7/nq+n3Me/ek/nREQPZ+OnrXHf9eSxsDPG7LyIMPvxkPr7+cU6eOoh7Xv6a7GETGFjxGStbwxxw1ihcx/6I5V9Uobu8HHtQEeaX77GmohWXJhgwJg/H6EksqWqhobqNSKAZAHd6Dhm5qQzNSsVvthOrWm9VV2sOE7LX3IOVA/JowjZbc+Hye3D5UxApaQivH+l0E46ZHTH99qhJOGZYZmuGZbZmGlYsX8oEszX7c9WlGVvH63cVFedHrdNXKBSK7xYqvKNQKBTfGYQQaM7+uTInGdSgr1AoFIkowzWFQqH4brEvD/r9IpGbs/9w7rv/Gk4uSuPVAy7jjt9cRGUoyjkPL2DaxSfz4rvrGf/Ab9nw6dv8/JwDWPD4fI7ISWGZKOI/75ahu7z88HuDqXn9FcqDUUb4XGR+7yg+3tRIY0Ul0jRIzR1IdoGfMXl+HHXraFxdTnVrhKAh0QWkOTRS81NJLcxGzy4Afw6tYYO69gi1LWFaA1bVLCMcxIxGtjLC6m62pjk6q2bp8YpZDq1DnKVrAneiwVqC8VpipSyw9uOirUREQnI2Lsza3UTstujtqlk74tn7/8Hdd85l+rUPE7j6fCa8+SZDjzqTmwsrOWdkNk888Q73/eQQ3lhVx7jf38iajz5k3NSxrH3oEXQhGHTR91ka9FO7ajHpxSM464BCquZ+wIb2CDkuncKJpQSzhvDpmjoCtZuQpoHmcJGSXURpvp9BGR70liraN1fSWtlGQ8ToqLDm0oRttqbhdem409240lJxpaWi+TOQLi/SmZKQxDUIxwxChiXOiputGTFpi7OkbbTW1WwtkUTxVaLZmqqatWto9sKKHbX+SL8Y9BUKhWJPIYS1ii6ZluTznSiEWCWEKBNC3NzD9QeFEEvttloI0ZRwzUi4Nqs3/j4V3lEoFIpu6HrvzIeFEDrwEHAcsBlYKISYJaVcEX+MlPKXCY+/Ghif8BRBKeW4XumMjZrpKxQKRSKC3pzpHwKUSSnXSSkjwEzgjO08/gLguV74K7ZJvxj0V1SHuGDxPzl+yWyu/fWT/DT8MZecN4olr7zMA0fnETEl74r9APjxyFQ+rGtn3EUT+PP7ZWxY8iWZpQdwyogcyl7/kqAhGT4qB0ZO4Z3lW2ir3oDmcJFRmE/pwHSGZnqIlH1FQ1k9W0IxIqbEq2uW2VpeCr6iXBy5RRip2bRFLbO1mtYw4WDMKqBiC7PM6DbEWQmxfat4isP+AFmxeaGBpnctmNIltp8oyrJj+3o8br8ds7XEbZye/vGT/UAkmq19G6HN066+gh8fOxjd7eWhmSs48k+f8uotR/HWCddw9It/pGHdl5xiLselCb7IPpT2+kruOmU0n/93JRMyPLSPPZXH52+kvb6SotH7cUAGbPpgDc1Rk2E+F7mTx7O2MczaDU2EGqsBbLM1H/sXpZGf4kDWbKK1vIZATdcCKrqw4vo+h8Cd5rZahg891YeW4sd0pmA6PXZM3zJai5uthWOWMCsSMTAMsyOWb9iGa/F4fmIBlW2ZrW0vnq9EWNvGctnstUG/CChPON5sn9v6dYUYBAwG5iWc9gghFgkh5gshztzFP6kLKryjUCgUXRA7U90tRwixKOH4MSnlY7v4wtOAl6SUid/Ig6SUFUKIIcA8IcTXUsq1u/j8gBr0FQqFoit2eCdJ6qSUE7dzvQIoSTguts/1xDTgqsQTUsoKe7tOCPEBVrx/twb9fhHeUSgUij1JL4Z3FgLDhRCDhRAurIF9q1U4QoiRQCbwWcK5TCGE297PAaYAK7rfu7P0i5l+uLWJu699ic/bTiLa3sJ/zr2HCyuX4j71bsp+8RPOOqiQXzy1mIGHHEfT43cBMOjKq/n0/o20bF7NxPMuIL9mKa+uaiDdqTHomJFsjKaytqyeUHMt3sx8cor8HDo0m1xHhNbVq2je2EKLve7a59DIcTvwDfDjLijATM3GTMmkpTFKrW22FglGiYYjttladJtma5rDaZmsJZit6XaLF0SPr9PXNYFL7yyk0t1sLb4+34rhW6+zLbO1jrg+du6g47zYeo39Xm62BvCk+202PvUas8JRAmUvMuOV50g1XuD1zS1sahtKyaGnMP+nv+XUgwq57vmlZJQewPjIap5sDHH5tNH895s6PvpsE5rDxeETihBfvcM3qxvQBQzaLxvXgUewYHMz9VtaiQSacXh8ttlaCsOyU0nXokSrNtC2uY62xhABozOm79U1PJpVQMXlc+JOc+NKS0HzZ6KlphFzea3CKfYa/XgLRgyCUauIStxszTCsJqXc2mgtSbO1ngqobO9x33WEAN3RO4kqKWVMCPFz4G1AB2ZIKZcLIe4EFkkp418A04CZUkqZcPso4FEhhIk1Qb83cdXPrtIvBn2FQqHYk/RmVTgp5RxgTrdzt3c7/m0P930KjOm1jtioQV+hUCgSEKL/qm2TQQ36CoVC0Y2dSOT2O9Sgr1AoFN3Ylwf9frF6p7AonyNyUlj4/H+44bZL+LI5zEkPL+DMS87muRdWcNgjt7Nq3pv8bNqBzP/ze0zJ9rIyZSRbln2M0HQuOmoIta/OZHVbmBE+F3nHHsP/NjRQu35zh9nahCHZjCtMw1lbRuPKjWxpCtEWMxPM1ixhlm4Ls1pjguq2CFuaQjS3RQgHY8SCbRjhIEa3qlndzda6irREF7M1XddwODTcDs2qmtXNcC3RbE1PSOZ2T+DurNlaL4Yw+9xsDeCmH87giEv/TvY9P+HI+W8zcPKpPHrfPM4YlM5dD77J76+cxEvzNzPpLzeybO4HHHjMIax78E8ADP/Jhcx4by1bli8mrXgEF0woovrNt1kbiJDrdlA0ZQjBvP34eE0tLVUbMGMR3P5My2yt0M+w7BT05graN2ygtcoyWwsaVtJfF3RUzPK5HXgyPbgz/Lgz/GipfqTTMluLV81qj5q0R5M3W4OtE67dzdZ2BZXETUD0IHTcRuuPqJm+QqFQJCAQaI5+MR/eJdSgr1AoFIkIVCJXoVAovkv05pLNvY1+8RsmN1THKcveZr/jzuEm8SmXTxvNgpkv8NiJBbTFTOZ6xyNNgyv39/FuTYBDf3ww9763mmigmawhYzlrVC6rXl5M0JCMGpMHY45m9ldVHWZrmUUDOKQ0kxFZXiJrllK3qnYrszV/oa/DbC2ke2kOGx1ma6H2KOFgFCMSxIiEdmi2pjtcHWZrmkPrYrYmEoRY3c3WXPECK7tgttZ94rIjs7Xtx/+/XbM1gOnHD0Fzunjw8SVM+csS3vztcehCcPycv1K3eiHnYpmtLS08kkBtOX866wA+fu5rJmR4CE48i3VLviFQW07JAaMZnwlr31pBc9RklN9F/pSDKGsMs3pdY4fZmjezgLScdA4sySA/xQHVG2gtr6Gtqo2GiEnQsDQ18eIpPZqt+TIw3T5Mp4eQbbZmFVCx4vntEWO7Zmvxz9WOzNbMHYi2VPx++1iGa8m1/kifd1sIoQshvhBCzLaPBwshFtgFBZ63pckKhUKxdyBU5azd5RfAyoTj+4AHpZTDgEbg0j3QB4VCoUgSgaZrSbX+SJ/2WghRDJwCPGEfC+Bo4CX7IU8CveIRrVAoFL2B2Mdn+n2dyP0L8CvAbx9nA01Syph9vL2CApcDlwP40Dn0wa9Z8LtjeCR/LBdVfEHK+Q+y/JKLmTa1lEufWMiQKSdS+9ffoAso+dl1fHTXN6TmljB04khyy+fz/Mp6slw6g08cQ1nIw9rVltlaSvYA8gemM67AT57WTtOy5TSta6IxasU9fQ6N3BQn/uJ03AUFGL5cmsMGzSGDLW1halpChAIRIsEg0VAb5jbW6CdrthaP57sc+o7N1jrWE4Ou9a7ZWsdxt+faVXrTbA2g5e/P83G6m5qaV5nx6kxE7RNccfsJ3Fs1gCFHnMGHP/w15xxdytVPLSZ72ATGNC7m8cYgV18yjueW1dC4YRm6y8vxkwbCotmsLGtEFzDwgFxc46fyWXkTdZUthFsbcHh8+PMKycpPZb9cH+kiTLR8Na2bamlu2NpszefQSHfquNNceDK8uDN8ltmaL4OYy9uxRr813Gm21haK9YnZWhwVx985lDhrFxBCnArUSCkX78r9UsrHpJQTpZQTvei93DuFQqHoGSHYWhS5jdYf6cuZ/hTgdCHEyYAHSAP+CmQIIRz2bH97BQUUCoXiW6G/DujJ0GczfSnlLVLKYillKZZX9Dwp5Q+A94Fz7YdNB17rqz4oFArFziJIbpbfX78Yvg1x1k3ATCHE3cAXwL++hT4oFApFjwgBrn3YhmGP/GVSyg+klKfa++uklIdIKYdJKc+TUoZ3dH9mipPlc15k0VFHUxmKcuy9/+O668/jqdlrmPjEXyj732zuuPgg5v39Q44t9POpUUz11x9SPO4Qrjx2OJUzn2VtIMIBaW5yjz+ZuWvrqFu/Hmka+PIHM3l4DoPSXehbVlG/fD2VLeEOs7VMp45/gC3Myh+ImZpNa9ikJhBmS1OI1kCEiG22ZkYjGNHtm61ptjDLEmdpW5mtuWyzte4zCpdD267ZWiI9ma1tDyF674Owp+Y+Z/z4HurPO5Xhb73DmFO/z0OPLKTh4j/wwJ9fZMYvD+flZTVMfOheVrw7l6mnHcqK3/8ZlyYYdtVPmfH2aoxIkMzSA7hoQjGbX5vD2kCEAR4nA48cSXPGUN5dUU1L1TqkaeBJzyEz38d+JRkMy0rB0VhO2/pNtJS30hAxaLMrrLk0gUcTpDs1vC4db6YHd6Yfd6YfzZ+BdFlmayFDEo51Vs0KxKtmRWIEI0aPZmvxBQLdTde6m62ZCZ+9ZJO3KsnbFSHAoYmkWn9E2TAoFApFAoJ9O6avBn2FQqFIRPTfeH0y7LuBK4VCodgFrJm+llRL6vmEOFEIscq2nrm5h+sXCyFqhRBL7XZZwrXpQog1dpveG39fvxj0XcNHcOwVl/Hs55Vcf89pLJ/zIjcXVpLp1PnrJh+u1HTOSavhk/ogk246gdtnLceMRTj7mKGcNSqHFS98QcSU7DepiNjoo5m1uIK26g04PD5yBuYzqTQLV/UqwssXUPdNPVtCBoa0hVlunbRiP/6B+Wh5AwngojoQpiZgma0FWyOEQ51ma90LWYjusfzE4im6hqZbW90hcCSaq3UUUtE64vbdzdbAEk0lY7YWn7fE4/fbcxHsbbO1vig2UXLQUTzz0SYmXT+bT2+azCi/m7PvmUd7fSXjFv+bEq+TmS0DCLc28MdTRzF3dhnH5PkoL5nC+kVL8BcOZciEkYzQ6il7czVtMZOxGR5yvjeFr2vaWbe2gfb6SoSmk5o7kKIBfg4sSacg1YFRWUbLhqqOAipxYZbLLp6S5rTi+VYBFR+6PwPdn4Hp8mE4PIRjklBsa7O19oiBERdlxWyBVszEiMWQhrFV3L5TqGV2eW/ioq2O412I83/X6a3VO0IIHXgIOAkYDVwghBjdw0Ofl1KOs1vcwSALuAM4FDgEuEMIkbm7f1u/GPQVCoViT6EJa9KVTEuCQ4AyewFLBJgJnJFkV04A5kopG6SUjcBc4MRd+qMSUIO+QqFQdEO3LU921IAcIcSihHZ5t6cqAsoTjrdlPXOOEOIrIcRLQoiSnbx3p1CJXIVCoUggbsOQJHVSyom7+ZKvA89JKcNCiCuwjCiP3s3n3Cb9Yqb/zcY6Zk1u45IThrD41FspOfQU3jrhGn50zRT+/M/3GH/aSSz71S0UeBz4Lv41Kz/6gszSA7j04GLEh8+woLyFEq+T4WdPZmFVO5tW1RFubSAlZwBDhmYxJi+V2JolNHy1irr1nWZraQ6d7EwP/uJMXEWDMH05NIUNtrSGqWoJUdUUJNQeJdIeIBrcvtma0LStzNbiJmu6w7JpjRdNcTl02zytM77fk9laYkH0+LZ70ZTEcHr32Lomul7fXbO13Y3c70zof9lNI/n170+h+usP+eSw47h49p2s/3gWh077Pi9c/i+m/fww7nhiIQMnnUz2xzNY3RbhoKuP4C8fbaBl82qKDxzPD48aQmTeM3xR0YrPoVFyeDHamKP437p66ivqiAaacaWmk56fw4RBmYzO9eELNxDdsJKWjQ00tIRpiVlma7oAr26t0Xenu/BkevBkpuLJ8KP5MhAp6Uh3KqGYScgwaYtYBmtt4ViH2VowYhCLGpgxE9OQmFJuZbZmJpitqfh839GLitwKoCTheCvrGSllfYJe6QngoGTv3RX6xaCvUCgUe4peFmctBIbbxaNcWJY0s7q+nihMODydzvojbwPHCyEy7QTu8fa53UKFdxQKhSIBgeg1GwYpZUwI8XOswVoHZkgplwsh7gQWSSlnAdcIIU4HYkADcLF9b4MQ4i6sLw6AO6WUDbvbJzXoKxQKRQI7GdPfIVLKOcCcbuduT9i/BbhlG/fOAGb0WmdQg75CoVB0YV+3YegXMX1pxPjb4T9n8AuzmX7LM8y64zhe39xC6m0PU/vNfP49/SBee30NJx85kMe/bqBh3Zfsd9hYBpR/yppWHz0lAAAgAElEQVR/v0xlKMZBhT5Sjz6Hl76spGH9CoSmk1Eygqmj8ijU22leupTaLzeyqT1G0DBxaaJDmJVWWohzQCmGL5fGoFUxa3NDkEBrhHAwSizYZomzejJb03V0W5iVKNKyErgJAq2Otb/6VmuBdVuU5dQETq3TbE3rSNp2CrOg03CtQ6TF9gVSiR+CjgRwD4/bnqBrT/PgiNN44Yjr+dWdV/PC1zXc2z6WIUecwVs/PYT5DUFy7niETfPncMOPJvDJLU9T4nWSc+mNzHm3DN3l5bQjB3PWyBxWP/8h5cEoQ1NdDDp2PJtFJvOWbaG1sgwAb/YAsgt9jClMY3CGB0fDRprXVtC0sZnasEHQ6DRbS9WtilmeDI9ltpbhx52Vjp6ejelOxXSlEox1NVtrC8Vot83WwhED05DEokYXcVaPVbM6BFpm0mZryZ77zqOKqCgUCsV3h7if/r6KGvQVCoWiG2rQVygUiu8I2j5eRKVfDPrDS/MJlrVx+G3v0LZlA+mPXM8Zg9I5+9EFFIydSv7cv1IZijH+rmv58XPLcKamc/1JI9n46LUsfmc9Xl0w4vRRVPiH8snSTwjUluP2Z1EwKJPJxZloGz+n5osy6lbVUxeJYUjIcmkUeBykF6eROrAImTmAxrBJlR3Pr2oOEmwLEw5GiYbaMGPRLuKsrYqnOF1WbN9pxfMdTt2K58cFWrYwS9cELr1rIRWnpuHUtQ5hVmLxlK0EV4guwqzECUui2Vr3iczOxut722xtZ9MFuW6dK6/7M3XXFrLm7P048g9P8vnMm1lzyTmcOSSTi579kpTsAVwyKMYtq+uZdtxg3qzzUPnlh+SMOJjpBxWTteET3v64HEPCqGGZpB11Cq9vambLhiaCjdXoLi/+/EGMKc1iv5wUClM0IouW07y2gtYtAZqjW5utpXodHWZrnuw0tPRsNH8GMbefKBphI0Z71KA10lk8pS1sxfXjRmuGYSJNaW87hViJwizYRox+O2ZriiTp5dU7exv9YtBXKBSKPYVg62p0+xJq0FcoFIpu9IUd+N6CGvQVCoUiAYFVs2JfpV9kK8Smtdww57es/3gWl9xwGf+8dx7Hz/kri//7CrddeQTv/PI5js1LZfmAI9jw+TwGHjyVEwtMvnr+a75sDjE23UPxuWfy5pp6qlZvxIxFSCsawWGj89gv201o2XxqV9RRUdNOc7SzIHpakZ+0wQU4BgzG8OfTGDKoaAmxpTlIfXOIUCBKNNCMEQ5ibMNszVqX7+xSEN3h1HssiN5lXb7W6endvSC6LjqLp3Q3W+upILomRI8x821NZhJP7ymztZ1lWvkiBk06njunzyDr8ZcRmkbqQ9cz48WVHPvSH/hg5mwmn30C626/kYgpOfC2K7hv1gqigWZGTx7OkMAaKmc+x7KWMAM8DoYcN5JA8QTeXFZFw6a1mLEInvQcsgr9TBiUQZHPibN+HYGyNTSua2JLKEZLzMSQiWv0NTyZHlJyUvBkp+PJTkdLz0Z605BuH8GoSSgmaYsYltlaKEZrONZRED0WMe01+rIjrm/GIlsZ+UFyBdF3FM9X8f5tILDyZ0m0/oia6SsUCkUCAnAmWQqxP6IGfYVCoUhgXw/vqEFfoVAoEhH9N3STDGrQVygUigR25FXV3+kXgava5jCXbd6P7/34x/yltJxUXePeqgE4vT5+klPN29UBjr3rDH4xcymxYBsXnTqS9pf+wSf1QYKGZNxRA4lNOJ2Zn22kqXwlDo+P/CFFTB2eg7dmFdWfr6Bqcyub2qNETInPoVHkdZAxKI30oUXoBYMJCA+VrWEqm4JUN4UItkYIh6LEQm0YkRBmD2ZrurMziRs3XXO4nJ0ma7pluuZINFuzhVmdSVxr1qELuiZ07eRtotlah8FaQvWsLklZthZh9WS21hOJ920l7NrGPX35H2f4FS/y1W8PZZTfzdRb3+a231zMo/fNY4DHyVPGaELNdcy4YCyznl3GSSVpbBpxEt98+Bn+wqFcd8xw6l78NyteWEpz1OSgnBQKTj6BhZVtrPimlkBtOULT8eUPZsigDMbmp+Fp2oSxaSVNa8pp2dxKQ6Sr2ZrPoZHpcthJXD+e7DQcGVno/gxMlw/D4SEYkwQiBq3hGK0Ru2JWxKA9YhBJEGfFjdaMWKxDmCXNrhWzrGZ2eU+6C7O6XFNJ250i/v9tR60/omb6CoVCkYAQ4NT7xXx4l1CDvkKhUCSwr4d31KCvUCgU3eivoZtk6Be/YQryfbzw4KO8c1YGM469nqsfuoAH/vwip1x8Fp9Nv54RPhfGBb/m67kfkjd6ClcdWsySf7xLW8xkhM/FiAuP4931TaxfVkU00IyvoJQxo/IYX+gjsuwTtiyuYH0gSmPUintmOnWyc1NJH5yHq3gIRnoB9UGDqtYwG+vbCbSEaW+LEG5tIRpsIxYJYsYiHf2NC7M6xFlOu3CK29vVZM2hodnCrHgc391NoKUJy3DNoWt2LB+cutgqtp8Yx9foKsaKG63F0QTdrvf8Cd9TCxh2ZVLVVr2e54dP5aIvX2Lzwre4xvgUXQh+8sC53P7gXEYedzrOp3/L2kCEw+88i9veWElr1VqGTTqEqbkxlv9nAZ9XtpLu1Bh6whDk2OOZvbya2vWbiQaa8aTnkl2Sx2HDcyjNcCHLVxJavYzGNbXUNoc6hFm6AJ9DI8ul28IsL57sdFLyMtHSssGXjfT4CcZMgjHTiuVHbGFWKEZrKGoJs6JWMw1LmGUaXYunmObWBVR6IllhlmLbCETXXNl2WlLPJ8SJQohVQogyIcTNPVy/TgixQgjxlRDiPSHEoIRrhhBiqd1mdb93V1AzfYVCoUikF102hRA68BBwHLAZWCiEmCWlXJHwsC+AiVLKdiHElcAfgfPta0Ep5bhe6YxNv5jpKxQKxZ7Ciukn15LgEKBMSrlOShkBZgJnJD5ASvm+lLLdPpwPFPfin7MVatBXKBSKBOI2DMk0IEcIsSihXd7t6YqA8oTjzfa5bXEp8GbCscd+3vlCiDN74+/rF4N+W1YRw448nVcmTmNla5hPJl9Fe30l/3f6IJ7/bDNn/2wy1762grbqDRx/yljc857gwzUNlKY4OXRsPo5jfsST8zfSuO5LNIeLvKEjOHH/fHLaK6mbv4SasgYaowZBw1qjX+Cx1uhnjijBOXAEQXcmW9oibGpsp6opSLAtQigQsdfoB3tcoy903Vqj7+xco687HHY8v+eC6LoQHfF8l0PDpWs49c41+s6OuH6n0VriGv0uhmti9wqia9uI+Se7Rr+v+fw/N7A2EOV7T23h+CsuYcbZ93DF7Sew5sQbqVnxCf931WG8fsdsJmV5Mc7+FR+9uRhvZgE/O2Ukodce4bOyRipDMSZkeBh0+tGsbNX45MsqWqvWApCaW8KAgRlMKEwnLVRHuOwrGr7ZSOP6JraEDNpi3Quia6TkePFm+0jJy8SZkYGemYvp8WO4fQSiJqGYacXz7TX6bWFrnX4wFCMWTVyfb2KasuNz1X2NPmxdEH1n1+irmP92EFj/v5JoQJ2UcmJCe2yXX1aIi4CJwP0JpwdJKScCFwJ/EUIM3Z0/Dfpw0BdCeIQQnwshvhRCLBdC/M4+P1gIscBOajwvhHD1VR8UCoViZ4lPlnopkVsBlCQcF9vnur6mEMcCtwGnSynD8fNSygp7uw74ABi/y3+YTV/O9MPA0VLKscA44EQhxCTgPuBBKeUwoBHr54xCoVDsJdi/ppNoSbAQGG5Pdl3ANKDLKhwhxHjgUawBvybhfKYQwm3v5wBTgMQE8C7RZ4O+tGizD512k8DRwEv2+SeBXolTKRQKRW/QmzN9KWUM+DnwNrASeEFKuVwIcacQ4nT7YfcDPuDFbkszRwGLhBBfAu8D93Zb9bNL9OmSTXu50mJgGNaypbVAk/1GwHaSGnZC5HKA7IIiUvqyowqFQmEjbC1MbyGlnAPM6Xbu9oT9Y7dx36fAmF7riE2fJnKllIa9xrQYa+nSyJ2497F4cqSxNcqSu47iw7p2fnnjUVz2u9c4dNr3WXn5dLJcOoW/+Rtvv/whWUPGcsfxw1nyxxfZEopx2AG5jLl0Kp/Va3y1uJJg4xZ8BaXsNzqXw0rSiX39IZUL1lHWFu1IzGU6dQqzvWQOz8VTOhQjfQD1wRjlzUE21rfT0hSivTVMONBGJNCMEQltlcRNNFiLbzWnC03XcDh1q7msbaIgq0sS19GZtNW0uBCLDsFWZyWtrslb2E5FLCGSFmbtLskLV3bt+TdOPZpb593H4hef4bVjdFa3hWm4+A9ccO/7DDrsNPZb+G/mNwQ56aZjuWPuWupWL2TwpMOZNjKDr//1PuXBKD6HxsijBuGYfCavLNtC5ZoKQs21uP1ZZJWUMGV4DsOyPIjNK2hYtp7GVVXU1gVpjBpETJkgzNLwZXpIzU/Fm5uJKzsLPTMPzZ9lCbOiljCr2U7etoUtYVYwEiOcIMyKRU2rYpaUHdWyzFikizALVBJ2TxBfFLGj1h/ZI+IsKWWTEOJ9YDKQIYRw2LP9HpMaCoVC8W2ifWvr0vqevly9kyuEyLD3vViKtJVYsalz7YdNB17rqz4oFArFziJQM/1dpRB40o7ra1gJjNlCiBXATCHE3Vjy43/1YR8UCoVip9mHC2f16eqdr6SU46WUB0opD5BS3mmfXyelPERKOUxKeV7imtRt4fD6mLf/4fzyl4dTfeUD1K1eyFs/PYSnX1nFDy4ex/Vvb6RpwzKOPG0yeYue573FVQzwOBh7+dF4T72MRz9ZT+2qxWgOF7nDRnPmuCIKo7XUfTKf6mW1VIetvLJXFxR5HWQOySBrZCmu0pGEU3MtYVZTkI11AdpbrHh+NNCMEQkSC/dgtpYgzNIcLnSXF4fLjcOlbyXM8rr0HounxIVZTs1utjDLqXUKszqKqCQIszoKqWBdi5utJVM8pb8IswDeWl3PSQvzmHzRj3jm0Olcc+3hnH3PPDZ9NptHf3k4b1zxBGPTPaRdcz///e9i3P4srjh9NMbsf/Dp0mq8umBsupvh501ldSyDdxZX0FKxGgBffikFpRlMHpRJdqyRyOovqF9ZQf2aRraEYl2EWWkOnSyXTmpeKql5flLyMtEz89Az8zC96ZhuP+1Rk2DUpDkcozVi0Nwe7YjrR8JdhVnxrTS3XzylJ2FWTzF/JczaBZKc5e/zM30hxGFAaeI9Usqn+qBPCoVC8a0hSHoNfr8kqUFfCPE0MBRYCsSnCRJQg75Codjn2JfDO8nO9CcCo6WUsi87o1AoFHsD+/CYn/SgvwwoAKr6sC8KhULxrbOvl0tMNpGbA6wQQrwthJgVb33ZsUQOKEnnzfIWqq/+K2fd8l8mXfgD1lxyDj6HxsA/PsFLz75P1pCx3H/6aJb8/kkqQzGOOjCPlNMvZ35rKgsXbKa9vhJfQSmjx+RzxKAMzK8/oOLTMla1RmiLmXh1QY7LQWG2l+z98vAOHY6RWUJNe4wNjUHW1QY6hFnRQHNSwiyHy4vu8iYtzEpsyQiz4ola6CrM2tZP031FmAVwz7x7+Ojf/+b9s3wsaQoRvOEh1n88i4GTT2Xyiud4tybAmTcdw81vrqF62YcMOexofnxgLl/8fQ5rAxEmZHg48OhSnEdN4+VlVVSstsR7bn8W2YNKmToqj1E5KWgVK6hbupr6NY3U1ASoi2xfmOXOy7GEWek5mN502mOSQIIwqyUUpTUUoy0UtYVZVvI2LswyDNMSZEUj2xBmmUm/Ryphu+uoRC78ti87oVAoFHsT/cJzfhdJatCXUv5PCJEPHGyf+jzRDU6hUCj2FUQvlkvcG0nqC00I8X3gc+A84PvAAiHEudu/S6FQKPonKrxjmfsfHJ/dCyFygXfptEjuU5q/XslNt/+IiTc8S+OGZax9+CxuvmklV189mSteX0fDui+58Mafk/vpk8z4vJLSFCcTrjmRj5q9PPRhGTUrF6I5XOQP35/zDiqmKFJF1QcfU/l1TYcwK8floMjrIHtYJtn7D8E1ZH8CqblUbGlnfUN7F2FWJAlhlu72dhit9ZUwKy7GShRmJVbMShRmJU5c+rswC+DoT/OZ+pNLeeKgi7jhN8dz+O3vMOSIM3j6+iN4acJhHJzpIeWaP/HSZU/jSc/lF+ceQPSl+/lgyRZ8Do1xxw1m2PnHsTKazpwFq2nasAwAf+FQioZkcnhpFjnRekLL5lO7bDM1NQEqgtsXZqUWZqNn5iEy8jA9fkuYFTR2IMwythJmbatiVqL4KhlhVk+oOP+OEajwDoDWLZxTz779vigUiu8wfbXIYW8g2UH/LSHE28Bz9vH5dPOHVigUin2C7ayA2xdINpF7oxDiHKxyXQCPSSlf6btuKRQKxbeDAHqxhspeR9IhGinly1LK6+y2Rwf8NsPkozNvp3nzas646hIWn3YmAzxOMu58gllPzSZv9BQeOG0k83/zFFtCMaYeVozz9Gv407trWDK/nGDjFtKKRzBhQiFHDsoguvgdyj9a07FG3+fQGJjioCgvhezRA/AOG0ksayDVgRgbmqw1+s0NQQItISKtDcRCAaKhwFbx/Pgafd3l7dg6XO7O9fkJa/S9Lh23HddPcel2fN+K51vxew2HrnWs0XfqPZRrsyPrWkJsv6M/PRit7cwa/V39ebsn1ugDLHzhWV4fU055MMrKC++mYuEcXr11KsPfup9P6oOce/+5XPnyMmq/mc9+U4/hoqEuFv5pDuXBKJOyvAyffib61B/yfwvLKV++jlBzLZ70XHIHD+KEMQWMzk2BDUup/WINdavqqQjGuhRPSXfqZLk0/Nkp+Af4SCnIxp2Xi55dYBmtpWQSiEnaoiYNwSjNoRiN7RGa2qM0tUcIhiyjtZi9Vj9eSGX7xVPM7Rqo7choTZE8QoikWn9ku4O+EOJje9sqhGhJaK1CiJY900WFQqHYc1gLIZJrST2fECcKIVYJIcqEEDf3cN0thHjevr5ACFGacO0W+/wqIcQJvfH3bTe8I6U83N76e+PFFAqFoj/QW3N4u57IQ1hFpDYDC4UQs7oVOL8UaJRSDhNCTAPuA84XQowGpgH7AwOAd4UQI6SUu/UzLtl1+k8nc06hUCj6Pz2EUrfRkuAQoMyuIxIBZgJndHvMGcCT9v5LwDHCih2dAcyUUoallOuBMvv5dotkY/r7Jx4IIRzAQbv74gqFQrHXsXNFVHKEEIsS2uXdnq0IKE843myf6/Exdu3wZiA7yXt3mu2Gd4QQtwC3At6EGL4AIsBju/viyVI0rIArfvkQP7/1Cu4dHeBnP97EvY9eyJlPLCRQW86115+P9tzdvLGslgPS3Iy9/gJeWRdg2fy11JctweHxUXLAaC6cWEJe0xo2zP2IDSvqqAzF0AXkux0UDfCTNTyTnAOH4hh8AM3ODDY1BCirbWNDTRttTSHCrS1EAs3EIsEOAU0czeFCd7rQXR40p53MdXsTkrhax9ZlJ229LgcuvavRmlOzTNZ0gZ3A7TRf6y7Mik80Ek3XenIITDRaS1aY1f3+RLY1v9mTzoS/+9OvuOu4E7n1hV8w6FdPc9B5P8D/yI08fv/7nFacRu3pN/H29L/hLxzK3dPG0fj4Xby/up5ct8648/aHI37Ax5XtzFuwiabylQhNJ71kFCNH5nBkaTaZbeW0fTGfmi83U1UfpC7SKczy6hppDo18jxP/AB+pBRn4inLRswsR6XkYKZkYzhTa2mO0hg2aQzGaw9EOYVZbKNaZuDUksYiBETMxYrEOo7XtCbOALsKsZFHJ3eQQUiKSf6/qpJQT+7I/vc12Z/pSyj/Y8fz7pZRpdvNLKbOllLfsoT4qFArFHkVIM6mWBBVAScJxsX2ux8fYUZR0LAFsMvfuNDtavTPS3n1RCDGhe9vdF1coFIq9DwnSTK7tmIXAcCHEYCGECysx292WfhYw3d4/F5hnF6yaBUyzV/cMBoZjeaDtFjsSZ10HXA78uYdrEjh6dzugUCgUex29VCRQShkTQvwceBvQgRlSyuVCiDuBRVLKWcC/gKeFEGVAA9YXA/bjXgBWADHgqt1duQM7XrJ5ub2dursvtDusi6TgTs/hrtTFvDj5Xk4u8LHmxBv5/Pw7GHbk6dwyzstrF71GxJQce94oWg+7iL/+4zNqV87HiATJGz2F4ycN5MhB6bS/+DAb31/H6rYIEVOS5dIZnOokb0wumSOK8ew3jljOEKraYqypb+ebqhZaGi1hVrjNEmbF465xNIerQ5zVUTzF7cXhcnYKslydAi2XQyPF1UMRFV3riOE77P3tCbO0jjh9YjGVHRutdRFs9fB+97XopDeeftpbd/Op381t8miC9f/HB9dcyt05l9MWM7n2pT/yvUcX0Fq1lhOu/AnHOTbw2gPzqA0bnDMym9JLL+H1dS3MXFROxfLlRAPN+PJLGTC8iJPHFDIqx4Px2QKqF31D3Tf1HUZrhowbrWnkunVS81PwF/rwFeXiyi9Ezy3CTM0i6vDSHjFoi1jCrJZwjOb2KE1BS5gVDseIhg1LmBUxrMIp8eIpcXFWouGaaXQRZpk9iLB2JMxS8fydQMpkZ/FJPp2cQzfbGinl7Qn7ISwH457u/T3w+17rDMkv2TxPCOG3938thPivEGJ8b3ZEoVAo9hZ6Maa/15Hsks3fSClbhRCHA8di/Rx5pO+6pVAoFN8WEsxYcq0fkuygH/9teAqW2dobgKtvuqRQKBTfIpLeTOTudSRrrVwhhHgUS0p8nxDCzR7002+uqWXpQ5fytxEHs6E9wt+/eYYR976P0+vjn1dNZu0tl/FuTYBTC/2MuOVWbv9kI2ULlmBEgqRkD2DYxGFcOKEI14r3WD57ASs2NlMbjuHSBCVeJ4XDs8gdO4S0EUMQJaOoizlZXd/CisoWKmsDtDYECTfXEg00dxROicdIhaYjNB2H24vu8qC7rWLousubYLBmr9F3abg7DNYceJ0JRmvxNfpCdBRQsfY19I5zWo9r9OPF0LcVKo/H+K39TpO2RPbUGv3eShfc+8f/8bemRVxy7K/5zb3X8flxJ6MLwSXnjWKmcyJfvfFHBhx0Ag+dO4YVV5/P+7XtjPK7GX/lUWwZdDgPPbuUDStqaK1ci8PjI3voGKaMLWTKwAw8lV9RvWAB1V9uYX1LmLpIDMPO6/kcGrluB7npHtKK0/AV5ZBalIueW4T052CmZNIaMQlETWttfjhGfXuE+rYIze0R2kJ2PD/aabRmGNYa/fiafMOO7SdqQRILpwA7vUZfsTNI2IkC9P2NZAfu72Nln0+QUjYBWcCNfdYrhUKh+BbZl2P6yfrptwsh1gIn2E5vH0kp3+nbrikUCsW3RD8d0JMh2dU7vwCeAfLs9h8hxNV92TGFQqH4VpASTCO51g9JNqZ/KXColDIAIIS4D/gM+HtfdUyhUCi+Lfpr6CYZko3pCzpX8GDv7zF3rdSsbLQbLyRgmFxz2QSu+drPps9mc+xFZzBp/eu88MwyBngcfO+uM/hEDOXFOato3rSStOIRFI45hEuPHMpIrYHq2bPY+FE5G9qjGNIyWhuSl0LBQUWkjxuHe/QhhDIGsrE5xKraNkuYVR+kvbmFSHuzJcyKdTVaE5qO5nShOZxozgRhllPH6XbgdHc1XPPaSVyX3inM8rp0nJolxooncZ26ldi19hMM17ROYZawK2bF/4F6Emb1lDjdntFaojBrb03iAvzq2sMY8+uPKT74eK4LzuWZ+RVcfttxDPv3f7n1wXfRnS5uuuxQcub+nTdfW4Mu4MjjSkmfdjUzFlewetF6ar9ZhBmLkF48gkGjcjl1/3wGimZCi95jy4I1bF7XRHU4RtCwqmV5dUGmU6fAo5NW7Cd9UCb+gfk48geiZw/ATM0mYOq0RAzaIgZ17VEag1Ea2iI0B6M0tUcJB6PEIkZHMtdK4nYKszrM1oyuwqxE4klcJczqK3rVhmGvI9mZ/r+BBUKIeJnEM7HW6isUCsW+Rz8d0JMh2UTuA0KID4DD7VM/llJ+0We9UigUim+LXrZh2NvYkZ++B/gpMAz4GvinbfKvUCgU+ySCfTumv6OZ/pNAFPgIOAkYBVzb153qzoh0yT+eXc6fn72Mzcdcw5Pn3snAyafy7Hn78e7on1AdjvHT80ejXXAbv354AZu/+B/O1HRKJ4xnyrgBnDYii+gbf2XN61+xtClEW8wk3akxzOekYFw++YeMxjniIGKZxWxujbKipo3lFc001AZoawoSaq4lGmjpEGbFiZusOWwxltPjw+H14fR4cLkdCYVT9I54viXM6tx6XbpttCYSYvjbN1oTCfH8uDCrezw/kZ6M1npie/H8bbEnC6ck8urZd7Hphgeoeu9+Hsgby1nDs2i67D4ufHgB1cs+ZMr0i/lJcYC3z3uOtYEIZwxKZ/QNlzOvMYWX31tB3aqFxEJtpGQPoGj0cKYdUsLBA3yw+D0qP/qCLUurWR+I0hCx4uFeXcPn0Cjw6GQU+kgr9uMfmI+npARHwUAMXw4Rl5/WoEFLyKA5HKMxGKWuLUx9IEJTe4SgLcyKhGMdZmuxSNQSXdkmftsyWuswYdvJeL5iV5CwD4vfdjToj5ZSjgEQQvyLnfByFkKUAE8B+VjC5seklH8VQmQBzwOlwAbg+1LKxp3vukKhUPQBcRuGfZQdrd6Jxnd2IawTA66XUo4GJgFX2dXdbwbek1IOB96zjxUKhWKv4busyB3brTZuvFauAKSUMm1bN0opq4Aqe79VCLESq6jvGcBR9sOeBD4AbtrVP0ChUCh6l+9wIldKqffGiwghSoHxwAIg3/5CANiCFf7p6Z7Lsap2kS4c/PPYw3lq8EXcd+ub6C4Pz908lTU//QGvb27hzCGZjP7DPdw4dy3L3vuEaKCZkkNP4YfHD+e4oTmkLn+H5S98wLI1DVTbRmv/396dx8dVlg0f/12zTxaSJgrXMjkAACAASURBVGnTvWm60N0CBSlLoaUs1SKIPoKPiPqAiK/66kdBtvf1URFFEUEfQagiiCIghbIIUrZCKbKV0pZC6b4lTZql2TN77uePc2Y6STPNlLaZmeb6fj7nkznLzDkH0jtnrvu+rrsiz8OoyWUMO2kivmknEyk/loZAjA/qWlm9q4Vt1W207Q0QaKoj0tFCJNDeezw/RaE1t8+Jxx6n73Q58Ptc+xVaixdbczsEnz1uPzE+v0ehNbdzXyzf6egez+8tqr5vHH/iv2diO+w/Rr/PeP8B9/btcIf+r//eLdz2+xtYdcqZxIxh3vJHmXbzy+x8+wVGz17IQ187gXX/dRHPVrcy7Rgvs2/4NDUTz+WWv65i56q3iAbbcfkKKJ88i3mzRnJWZQn5VauoffVVqt7cxZamYKLQmschlHmcFLmdDC7yUTymiKKxQykcMxxX+ShMUTld+aW0hbtoDcdo6AzvV2ituT1MOBglEkouuBZLFFbriob3K7TWM55/IDo+/zAbqI3+4SAiBcBjwPeMMa3JjYsxxohIr/OSGWMWAYsARjh8h2fuMqWU6ku8DMNR6oiWRxYRN1aD/6Ax5nF78x4RGWbvHwbUHclrUEqpg2Mw0Uhay6EQkRIReUFENtk/B/VyzEwReUNEPhCRtSJycdK++0Vkm4istpeZ6Zz3iDX6Yj3S3wusN8b8JmlX8szvXwGePFLXoJRSB83QXwXX0hnU0glcZoyZCpwH3CEixUn7rzHGzLSX1emc9EiGd04Fvgy8LyLxi7kBuAX4h4hcDuzAqtWvlFJZwWD6a5KaPge1GGM2Jr3eLSJ1wGCg+eOe9Ig1+saYFaTu/zvrYD7L5YChDz/Ndf/xc4It9dx4y9VMeO5WfvaP9Uw7xsuZd36TR1sGs3jJy7TVbKF0/PGcM388l84YSnHjRrb//WE+XL6Lje1WR+wov5tjRx/DyFPGUfzJ2XSNmcmOtgjVrSHW7m5lfXULzfUddOxtIthST7izlVg40G22rJ6duPHELKvz1pU0a5YTj91pW+Bz43fvS8zyuBx2B64Tl3NfJ65D9i+0JgJOu4haz07cvgqt9dWJ21M2F1qLO/5zl/DZ52/hpvfruH3Jd1mwuIZtK56icNg47vzuacg91/HYM5sp8Tg578ufwHfpjVz/7GY+en0tHfW7yCsdTuGw8cw8YTgXzxzBqPBu2l77F7te/Yjt25rZFYgkCq2VeJwM9bko87oYVFlM0dgyisaNwDV8LI7Bo4kWltMac9ISilLfEaahM0JLKEJ9a4i9HVZnbjgUtZKy7Nmyenbi9lZoDXokX8VimozVHwwHM3NWmYisTFpfZPdHpiOtQS1xInIS1jS1W5I23ywiP8L+pmCMCfV10iPekauUUrnloDpyG4wxs1LtFJEXgaG97Lqx2xkPMKjF/pxhwF+BrxiTGFp0PdYfCw/WoJdrgZ/2dcHa6CulVDJjDrmTdt9Hmfmp9onIHhEZZoypOdCgFhE5BngGuNEY82bSZ8e/JYRE5D7g6nSuqd8mN1dKqdxgetQ/Sr0coj4HtYiIB1gCPGCMWdxjX3wUpGCVu1+Xzklz4km/bOoETvveYly+fE67cAHXF2/gju8vxu8ULv7xp9g442Ju+vVy9ry/nILyCmbMPY7vz6mkcPVT1K14jY8e/5A1LUHCXYbhPhfTyvyMOnU0Q04/CZn4SXbH8lhT28qOpk5W7WiisbaNtr2tBJpriXS2EgvtH893uD37xfPdXg9urwuPd98EKn6fC4/LQWGPeL7f48TncnafOMVOynLYxdbiSVk9J05JN56fXHzt406ckkom4/kAr85t5v+espQffu8Uflu0kBU330blnAv48mcmc8aWx7jnZ8/TEuni0rPHUnHDTfzu3Vr+9dxH7N26Bnd+EUOnnsiwsYP46sljmF4YJvzS02xf+i671taxpSNMS8T6Bl3kdjLc52JYqZ+CIfmUjC+laNwIvKPG4hpeSbRoKAGHj+bOGPUdEeo6wtR3hGjpjFDXFqKxPUQwECEcsBKzrLh+jGg4RMwu4JdIzEokZe1LzAK6FVqL04lTjqD46J0jr9dBLSIyC7jKGHOFvW0OUCoiX7Xf91V7pM6DIjIY65/1aqyKyH3KiUZfKaX6jzmYjtyPfxZjGullUIsxZiVwhf36b8DfUrx/3sc5rzb6SimVzNBfQzYzQht9pZTq5uguw5ATjf6He4I4tq3hvruu4aKyNh6acSW7gxG+ddWJhL/6M77+P/9m6+vP4S0sYfKZp/GzhVOobHiXDX98kN3v1vJmfQctkS5KPE6mF3kZM2c0I+adhGvGHBp8Q3h/dzsrdzSxo7GDmupWWho66WysJtzW1K3QWvL4fIfL0+vEKV6/C4/fjdfvwut1UWjH9HubOMXnsoqseeNj9JPG6fecOKXnWP1U8fy4A8Xzk/UVz++9mFtm4/kA//+Ma/jK3DFsuuoObv76ryibeCJP3DCXCY2rWHzm/7C+LcQXpg/hhN/8iEfrC/jj4++y5/3lOFwehkw5lbmnV3D6uFLmjjmGrtf+zs5/rWDXiio+bA0lJk4pcjsY7nMxqshL6fhB5JfnUzxxFPmVlbhHTyR2zFBC3iL2dkZpDESoaQ+xpz1EbXOQtlCUxvYQbR1hQoEooWCESHDfxCnJ4/OT4/nWeP1DmzhF4/mH6DCO3slGOdHoK6VU/9EnfaWUGjj6b/RORmijr5RSSQwG0w+jdzJFG32llEqmT/qZF2pr5te/+DbzXrmNpbe+wJt7A1x18RTKf/UXFv7hLdY9/ywOt4eJZ8zjJ5+bzgnRLWy96y7efXYz2zoi1IdiFLkdfKLIS+Wc0Yw+90S8J55Dc9FY1tV28Ob2vbyzpZHO1hBNe9rpqN+5XycukOjEdfnycbg8ePKLcOcX4cnLx+tz4/G7EslZXq+LAp+LAp/bSs5KrFszZ3ntGbPiCVm++LozXnDNkSi4lkjIInUnblzybFnQeydub7NlHe4ia0favIpiiv7+NJ/+6h34BpXz4E8voPDua3juT2+wrL6TC8YUcdo91/Kicwq/eGAlO958EdMVY8jUU5l92hi+MXsM4wZ5cax8kp1PLWXbi9tY0xxkT8iaLavA5WC4z01FvoeSCSWUHFtO/rBSCiaMx10xmVjxCEL5g9kbiNHYGaWmLURdh9WJW9MSoDMco6U9TLAjQihgdeKGQ1EioTCxUIBYOJDoxE102monbnYwBhMJ931cjsqJRl8ppfpP/yRnZYo2+kop1dNR/I1JG32llEpmzFEdJsuJRn/oiHIu33gfP796CS2RLr5xwUTG3/c4Cxe9w8olT2JiMY6dt4AfXzKTuZ7dbPvNr3n7kXWsag4SiBk7nu/j2NNHUbnwk/hPWUhL6UTW7Ongta2NvLGpgfqqVoKdYTrqqwi1NBDuaCEWDiSuwenxJ+L5Ln8BTpcHl6+gWzzfaydl+fxuCnwuivM8FHhdeF0OK5bvcSbi+dbkKdYEKvti+1Ys3yHSLZ7vdLAvQYve4/kO6R7PT07WykQ8/0iH/if8+1VO+tqdiMPJA7+8jEmP/YTf/+JF6kMxFg4rZN79P+SNIWdw3Z/fYfOKF4iFAwyZciqzzzyWH8ydwDRHPV3vvceuxU+w+V+bWFPf2SOe72JcgYfBU8sYPG0YZTPG4y4tw1Mxia7SMUQKh9LYGaWhM0pVa5Da9hDVewPUtASpaw0RDscIdlrx/HAgmjKer0lZ2UlH7yil1EBhDCamjb5SSg0Ixhi6ItFMX8YRo42+UkolM+iTfqYNCTZw01V/Z1y+h1POGcu4+x9nwR/e4p3HnsDEYkye/yl+funxzPdUse3WW3jj4fd5pylIzFjx/OOLfUw6cwyVCz9J3pwLaS6dyHu1HbyyuYHXN9RTX9VKc80ewp0tacXzPXlFOL3+tOL58YJryePzk+P5yePz42PzHXL44/npTpqSC/F8gFmX3o7D7eHR313JpId/xG9veh6nwPkjj+Hsh/8fy4fM5ep732bjsueIhQOUT5/DafMm8cOzJjBN9tD+9F9oWLuZTf/cwJr6TnYFIt3i+RMLvd3i+b6J03AOGkJXWQWRwqHUd0ap64hQ1Rqkui1I9d4AVU2d1LWG6GgLE43E0ornJyZE13h+VtFGXymlBghjDF1aT18ppQaOo3n0jk6MrpRSyezRO+ksh0JESkTkBRHZZP8clOK4mIistpenkraPFZG3RGSziDxiT6LeJ230lVIqSXz0TjrLIboOeMkYMwF4yV7vTcAYM9NePpO0/ZfA7caY8UATcHk6J82J8M7uXU2cOLiEzy39DXsqTuesX69g7TNP4PYXMH3hudzxn8dxfPsaNvz3bax4ehNrWoIATCzwMjrPxbHnVFJx/ul4Zn+a+sIKVla1sXxzA29trKeuqpXW2lo6G6uJhYOEO1p6nSnL5cu3i6tZRdacLgdenxtfvrvbTFnFeW4KfO5EJ25BfOYst5M8uyM3PlNWb524TsfBz5TVW8cu9H8nbn/WYvMPGspLd1yC66YruPXudyj3urjs+vmUX3Qxj0Ym8JO73mD7v5cCMPyEczl7/ni+f0YlEwJb2bvkL2x8bCVNW5tZ1RRIJGUVuR2M8rsZN8jH4ClllE0fSdmMcXgqp+IYNYkubyHB/MHUd0So64iwsyVIjd2JW9MSoKY5SLAjQrDT6shNVWQtGg5gYjHtxM1iXf3TkXsBcKb9+i/AK8C16bxRrH/I84D/THr/j4E/9PVefdJXSqlk9pDNNMM7ZSKyMmm58iDOVG6MqbFf1wLlKY7z2Z/9pohcaG8rBZqNMfGvG1XAiHROmhNP+kop1W8OLiO3wRgzK9VOEXkRGNrLrhu7n9IYETEpPmaMMaZaRCqBl0XkfaAl3QvsSRt9pZRKYjh8o3eMMfNT7RORPSIyzBhTIyLDgLoUn1Ft/9wqIq8AxwGPAcUi4rKf9kcC1elcU040+oPy3Fy07lm+9nwDb//5BbateIrCYeM45cJ5/O6iaQxfu4R3f3U/K16vYmN7GL9TmHaMl+knDaf02CGMWDAP5/HnsMtRylvbm3l5Qz0fbN1LQ3UrrbVVBJpqCbU1JQpfgRXPT07K8uQX4c4rwpNfiMfvxul04Mt34/W78fhc+H29x/P9HiduhxW/j8fzfS4rpm/F9vfF87vF8NOI58dj6OnE86VHwD2X4/kAm++7jPfOPYcHlu/k5BI/X7jrMraf8S3u+6CWe/76MnveX44nv4jRs87g4gUTuXzWSMp3vs7uRx9hw5K1rN3ZQlMkRn0ohlNgsNfJKL+bsUPzGTyljMEzKhg0ZRye8TNg6DiixSPpjBoa26PsbgtR3RqkujVI1d4AtS0BGlpDBDsjBDvChAJRYrEuIqEokWAwEc+PRa1krH1F1iLd4vYHiuenittrPP8IMIaucL+UYXgK+Apwi/3zyZ4H2CN6Oo0xIREpA04FfmV/M1gGfB54ONX7e6MxfaWUSmagq6srreUQ3QKcLSKbgPn2OiIyS0T+ZB8zGVgpImuAZcAtxpgP7X3XAt8Xkc1YMf570zlpTjzpK6VUfzH0T5VNY0wjcFYv21cCV9iv/w1MT/H+rcBJB3tebfSVUiqZIRFmOxrlRKPvnTCR2XduYN2zS+iKhhl23Hyu/NIsrj55GJ0P3Mzy373A8m3N1IdiDPY6OXGQnwnnVTJm4Rw8FZOJTZrD+pYulu9oYNn6OrZva2Lvnnba92xLFFjrOQG60+vH5fHjzj8Gt68gMQG6L8+D1+/CYY/T9/pdFOa5KfS5KPJ7KLTj+AU+F/keFz6XNSmK12XH9XvE8ZMnQI+PzXdgx+/tuP6BxuZDj8JrSf/dDiWen62x/LjFI4/j9cYAl5wwjDkP386DrSP52c0v07DlA9pqtlA4bByT5szmOwuO5cIJxbD8QTY98k82PbeV1UkToHscQrnXxdh8NyMri63x+TPGUTh5Mp7KqURLxhDKK6W+I0ogYhIF1qqaAlQ1BahrDdLcFkqMz48EY4SCEUyXIRLsJBbaNzb/QBOmgNXQ6Nj8bGC0DMPHISJ/FpE6EVmXtC2ttGOllMqYgxunn3OOZEfu/cB5Pbalm3aslFIZYYwhFo6mteSiI9boG2OWA3t7bL4AK10Y++eFKKVUVjF2+K3vJRf1d0w/3bRj7HTmKwFGjBzVa0qbUkoddjpz1pHRR9oxxphFwCIA96DRpu6pRxj6ibmMmjQiUWBt47ev5rUnNiYKrE0u9HLc5FLGn/8JBp+7gK7JZ9AQc7FyZ3uvBdZCbU3EwoFEp9iBCqxZM2PZs2T53Lg8jpQF1gp8Lnt2LKvAmlVULXWBtXgSVqLTto+ErN46cOHoLrDWU3Ugyo9uWoD3u7dx0SNrWfHk32it2ojT42fEiZ/qXmDtnl+z8bGVrF1Xz5aOMO3RLjwOocAlKQusOUdOJDJoNE0xF40t1gxZLaFoygJroUDUSsYKRYkEOzGxWMoCa/GkrOQOXEivwJp24PYDAyaWsmnKef3d6KeVdqyUUpliMP1VZTMj+jsjN552DAeRNqyUUv3GgOkyaS256Ig96YvIQ1i1ostEpAr4b6w043+IyOXADuALR+r8Sin1cRgDsfDRG0Y7Yo2+MeaLKXbtl3bc52fFopxx+X9x5xdmMNbdSfO9P+a53y5j+Z52WiJdDPW5OLEsj/ELxjP6M2fhmnUeNZ5y3tnWyo7mAMvW11G1o5m9NU101O8k1NJAJNC+32QpDrcHty8fl78gEcv3+P12PN+VmCwlz+/G43JQnOfZr7haPCErubiaQ6w4vhXTt2L5DumekHU4i6vBgWP5ye9Jlgux/LirNzzB3bvyuO0Hz7L73aW4/AVUzrmAoRXFXH3eJM4Z7iS27F4+fOQFNry8g3WtIWqD1hC7Eo9VXG2w10l5ZTFDppdTNmMc+RMn4Rk3neigkbR5imkIxKwYfluQ3a1BWjoj1LQEqWkO0GonZIWCkX3xfLu4WpddWC3Wrbja/glZOllKljJGY/pKKTWQdGmjr5RSA4QO2VRKqYHDAF052kmbDm30lVIqmTHakZtpEyqGsHRelI3XXsryt2t4dcte6kMxSjxOzi3PZ8JZFVReeAae2Z+mobCClbvbWb55B29trKejNURjTRsd9TsJNu3pVlGzZzKWw+WxZsiyK2p6fW58+W48fjcerxOf351IxvK4HBR69yVj+d1O8tzORAducjJWvCM3VUVNpyN1By7QbRvs34HbbdtR3oEbN/22LWz/91IAhp9wbiIZq+IYN7z2d7be9jSbn93CqqZAoqJmkdvRLRkrvzyf0qljOWbKJNyV0+gqHUNH/mDqO6PUNdozY7XuS8ZqC0b3q6gZDkWJhMKJ2bGSk7G0Azc3GU3OUkqpAUQbfaWUGkg0I1cppQaOfsrITWd+ERGZKyKrk5agiFxo77tfRLYl7ZuZznlz4klfdm7l9yd/g/VtIQCG+lycP/KY/ZOxqltZ9tYWVm9upGF3K621uwl3tqRMxnL7C3AlJWM5vf6UyViFPhdFSclYHpcjZTKW22nF8r12MpbTQUaTsXK5sFoqO99ZxpiTz+Gz50zgqpNHM7L+PWrvvoZNH+1KmYxVOSSPIVPKKJs2itLp43EMGrJ/MlZtZyIZq2pvgNqWAHuagwQ7I0TDsZTJWFE7nh9PxrIWjeXnIkO/jdOPzy9yi4hcZ69f2+1ajFkGzATrjwSwGXg+6ZBrjDGLD+akOdHoK6VUvzGGrv4ZvXMBVqkasOYXeYUejX4Pnwf+ZYzpPJSTanhHKaWSGGM96aezHKK05xexXQI81GPbzSKyVkRuFxFvOifVJ32llOrhIGbFKhORlUnri+y5QAAQkReh1zmgbux2vj7mF7FL0U8HliZtvh7rj4UHa+6Ra4Gf9nXBOdHo17eEaPHFuGBMESUTShh3/vEMmn8+obEns64+wCsbGlm2fi27dzbTVNvcrahaPKYK4HB5cHr9KYuquTwOvD57ohS/mwKfa7+iagU+Fz6X0yqg5rRi+W5nfGx+96JqTofgwIrXOx3sey19x/Ghx1h9e1uqOH7Pfcnv6SmdWH42xvGTLf7TdZw1VIi+9ACbvvkSb75ixfHbo10EYga/U6jIczO+wMOwCSUMmV5OydSxFEyagnvsVKIlo+nyFlITgsZAlJ172qhuDbK7OUBVU4C61uB+RdW6ol2EQ1Fi4UBiXH5fRdWAxJh90Dh+TjAH9RTfYIyZlfqjzPxU+0TkYOYX+QKwxBgTSfrs+LeEkIjcB1ydzgVreEcppZLZ4/TTWQ7Rwcwv8kV6hHbsPxSI9fR3IbAunZPmxJO+Ukr1F0O/FVzrdX4REZkFXGWMucJerwBGAa/2eP+DIjIY60v9auCqdE6qjb5SSiUzhlj4yDf6xphGeplfxBizErgiaX07MKKX4+Z9nPNqo6+UUkmMgS6jZRgyauiQAq598EZk5tkE/KWs3dPJ8m2NLHt5JfVVrTTVNtJRt5Nwe9N+SVjicOLyF+D25ePOL8LtK8CdX4QvPy+RfOX1u/H4XDhdDory3BT63BTZCVl+jzPReRsvqOZ2SCIBy0rGkv06bzUJ68gacs2lPPJGFevbwuwNx3CKlYQ13Ofm2EIPZRNLGDJ9KGUzxuOfOBXXmMnEBo2kzVlAQyBK7d4wLSGr87a6aV/nbVtbiGBnhHAgahdT25eEZbpi3TpvrY5bTcI6GsW00VdKqYHBAEdxvTVt9JVSqid90ldKqQGiy0BYZ87KrI7SEfyfhpl8uGgDna2hA8bwnR4/nvwiXL58PPlFVmG1FDH8gjy3nXTlptjvThRR6y2G7+uRhOW0J0bpK4bvTJrcRGP4h8+fn9lEicfJuHw388aXMHhqGYNnVJA3ZNB+MfztgSi1bWGqtwWpbt2dKKTWFoweMIafiN+nUUgtVdxeY/i5ScM7Sik1QBiMhneUUmqg0I5cpZQaYLTRz7AdO/fwt1vv6hYLdXr8uLx+/IPKuxVP8/q9ePzWhOZenxunS/ClKJ7m9zjJdzvxuqzYvVPA63ImJjTvOf4+Hq932sHwA01ofijF0zR237df3HsZvonTcI48luigUbQYLw2BGNXhGDtbAtTUhqj+sIGqpp3UtYboaAsTCkYIdkSsuH0oSiwa7TaheW/j7+P9RTr+fuAwRkfvKKXUgGHQ0TtKKTVgaExfKaUGGA3vKKXUAGHF9DN9FUdOTjT6Ln8BY09baM1u5XbsS7LyuijOc1PQW4E0pwOvPcOVlVDl6LODNt0Cacmds6DJVZlwlfN86t4LEVyxl2BnLaFAlHAgQizWRTQcSXTQRu1OWhOLJTpou6KRRCerdtCq3uiTvlJKDRAG6JcpVDJEG32llEpiMDp6RymlBgpr9I42+hk1dXQxr//y3Exfhsoii2//Q6YvQR2tjvKOXEffhxx+InKeiGwQkc0icl0mrkEppXoTf9JPZzkUIvIfIvKBiHTZk6GnOq7X9lJExorIW/b2R0TEk855+73RFxEncCewAJgCfFFEpvT3dSilVCoxk95yiNYBFwHLUx3QR3v5S+B2Y8x4oAm4PJ2TZuJJ/yRgszFmqzEmDDwMXJCB61BKqf10YZVhSGc5FMaY9caYDX0c1mt7KdZY8HnAYvu4vwAXpnPeTMT0RwC7ktargE/2PEhErgSutFdDeX7/un64tv5SBjRk+iIOo6PtfuDou6eBdD9jDuWDGwgvvYcdZWke7hORlUnri4wxiw7l/D2kai9LgWZjTDRp+4h0PjBrO3Lt/3CLAERkpTEmZcwr1+j9ZL+j7Z70ftJnjDnvcH2WiLwIDO1l143GmCcP13kORiYa/WpgVNL6SHubUkodVYwx8w/xI1K1l41AsYi47Kf9tNvRTMT03wEm2D3PHuAS4KkMXIdSSmW7XttLY4wBlgGft4/7CpDWN4d+b/Ttv0rfBpYC64F/GGM+6ONthzNGlg30frLf0XZPej9ZRkQ+KyJVwGzgGRFZam8fLiLPQp/t5bXA90VkM1aM/960zmuO4swzpZRS3WUkOUsppVRmaKOvlFIDSFY3+rlarkFE/iwidSKyLmlbiYi8ICKb7J+D7O0iIr+z73GtiByfuSvvnYiMEpFlIvKhnTb+XXt7Tt6TiPhE5G0RWWPfz0/s7b2mtYuI117fbO+vyOT1pyIiThF5T0T+aa/n+v1sF5H3RWR1fCx8rv7OZZOsbfRzvFzD/UDPsb7XAS8ZYyYAL9nrYN3fBHu5EsjGSmJR4AfGmCnAycC37P8XuXpPIWCeMeYTwEzgPBE5mdRp7ZcDTfb22+3jstF3sTr74nL9fgDmGmNmJo3Jz9XfuexhjMnKBatHe2nS+vXA9Zm+roO4/gpgXdL6BmCY/XoYsMF+fQ/wxd6Oy9YFa2jY2UfDPQF5wCqsLMcGwGVvT/z+YY2cmG2/dtnHSaavvcd9jMRqBOcB/8SamC1n78e+tu1AWY9tOf87l+kla5/06T39OK004yxVboypsV/XAuX265y6TzsUcBzwFjl8T3YoZDVQB7wAbCF1Wnvifuz9LVhD5LLJHcAP2Tfp04HS9HPhfsAqePm8iLxrl2WBHP6dyxZZW4bhaGaMMSKSc2NlRaQAeAz4njGmVZIm6c21ezLGxICZIlIMLAEmZfiSPjYRWQjUGWPeFZEzM309h9FpxphqERkCvCAiHyXvzLXfuWyRzU/6R1u5hj0iMgzA/llnb8+J+xQRN1aD/6Ax5nF7c07fE4Axphkrs3E2dlq7vSv5mhP3Y+8vwkqDzxanAp8Rke1YVRjnAb8ld+8HAGNMtf2zDusP80kcBb9zmZbNjf7RVq7hKaxUaeieMv0UcJk9+uBkoCXp62tWEOuR/l5gvTHmN0m7cvKeRGSw/YSPiPix+ifWkzqtPfk+Pw+8bOzAcTYwxlxvjBlpjKnA+nfysjHmS+To/QCISL6IOYcM9AAAAmhJREFUFMZfA+dg1Z/Pyd+5rJLpToUDLcCngI1Y8dYbM309B3HdDwE1QAQrtng5Vsz0JWAT8CJQYh8rWKOUtgDvA7Myff293M9pWPHVtcBqe/lUrt4TMAN4z76fdcCP7O2VwNvAZuBRwGtv99nrm+39lZm+hwPc25nAP3P9fuxrX2MvH8T//efq71w2LVqGQSmlBpBsDu8opZQ6zLTRV0qpAUQbfaWUGkC00VdKqQFEG32llBpAtNFXGSciMbuS4gd25csfiMjH/t0UkRuSXldIUrVTpQY6bfRVNggYq5LiVKxEqQXAfx/C593Q9yFKDUza6KusYqyU+yuBb9vZlU4RuVVE3rHrpH8DQETOFJHlIvKMWHMu3C0iDhG5BfDb3xwetD/WKSJ/tL9JPG9n4So1IGmjr7KOMWYr4ASGYGUztxhjTgROBL4uImPtQ08CvoM138I44CJjzHXs++bwJfu4CcCd9jeJZuBz/Xc3SmUXbfRVtjsHq6bKaqxyzqVYjTjA28aYrcaqmPkQVrmI3mwzxqy2X7+LNdeBUgOSllZWWUdEKoEYVgVFAb5jjFna45gzseoBJUtVUySU9DoGaHhHDVj6pK+yiogMBu4Gfm+swlBLgW/apZ0RkYl21UWAk+wqrA7gYmCFvT0SP14p1Z0+6ats4LfDN26s+Xj/CsRLOP8JKxyzyi7xXA9caO97B/g9MB6rjPASe/siYK2IrAJu7I8bUCpXaJVNlZPs8M7VxpiFmb4WpXKJhneUUmoA0Sd9pZQaQPRJXymlBhBt9JVSagDRRl8ppQYQbfSVUmoA0UZfKaUGkP8FDDDoBdR2Fq0AAAAASUVORK5CYII=%0A" alt="img"></p>
<h2 id="掩码">3.掩码</h2>
<p>为了避免输入中padding的token对句子语义的影响，需要将<code>padding位mark掉，原来为0的padding项的mark输出为1</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def create_padding_mark(seq):</span><br><span class="line">    # 获取为0的padding项</span><br><span class="line">    seq = tf.cast(tf.math.equal(seq, 0), tf.float32) #将seq的编码逐个与0比较，相等为1不等为0</span><br><span class="line">    </span><br><span class="line">    # 扩充维度以便用于attention矩阵</span><br><span class="line">    return seq[:, np.newaxis, np.newaxis, :] # (batch_size,1,1,seq_len)</span><br><span class="line"></span><br><span class="line"># mark 测试</span><br><span class="line">create_padding_mark([[1,2,0,0,3],[3,4,5,0,0]])</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tf.Tensor: id=311819, shape=(2, 1, 1, 5), dtype=float32, numpy=</span><br><span class="line">array([[[[0., 0., 1., 1., 0.]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       [[[0., 0., 0., 1., 1.]]]], dtype=float32)&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>look-ahead mask 用于对未预测的token进行掩码 这意味着要预测第三个单词，只会使用第一个和第二个单词。 要预测第四个单词，仅使用第一个，第二个和第三个单词，依此类推。 ？？？？？？</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def create_look_ahead_mark(size):</span><br><span class="line">    # 1 - 对角线和取下三角的全部对角线（-1-&gt;全部）</span><br><span class="line">    # 这样就可以构造出每个时刻未预测token的掩码</span><br><span class="line">    mark = 1 - tf.linalg.band_part(tf.ones((size, size)), -1, 0)</span><br><span class="line">    return mark  # (seq_len, seq_len)</span><br></pre></td></tr></tbody></table></figure>
<p>In [16]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># x = tf.random.uniform((1,3))</span><br><span class="line">temp = create_look_ahead_mark(3)</span><br><span class="line">print(temp)</span><br><span class="line">tf.Tensor(</span><br><span class="line">[[0. 1. 1.]</span><br><span class="line"> [0. 0. 1.]</span><br><span class="line"> [0. 0. 0.]], shape=(3, 3), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="scaled-dot-product-attention">4.Scaled dot product attention</h2>
<p><img src="https://camo.githubusercontent.com/22371733ed7ffa9065a60e80d3b83b10d832072a/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f7363616c65645f617474656e74696f6e2e706e67" alt="img">进行attention计算的时候有3个输入 Q (query), K (key), V (value)。计算公式如下：<img src="https://render.githubusercontent.com/render/math?math=%5CLarge%7BAttention%28Q%2C%20K%2C%20V%29%20%3D%20softmax_k%28%5Cfrac%7BQK%5ET%7D%7B%5Csqrt%7Bd_k%7D%7D%29%20V%7D&amp;mode=display" alt="\Large{Attention(Q, K, V) = softmax_k(\frac{QK^T}{\sqrt{d_k}}) V} "></p>
<p>点积注意力通过深度d_k的平方根进行缩放,因为较大的深度会使点积变大，由于使用softmax，会使梯度变小。 例如，考虑Q和K的均值为0且方差为1.它们的矩阵乘法的均值为0，方差为dk。我们使用dk的根用于缩放（而不是任何其他数字），因为Q和K的matmul应该具有0的均值和1的方差。</p>
<p>在这里我们将<code>被掩码的token乘以-1e9(表示负无穷)</code>,这样softmax之后就为0,不对其他token产生影响。</p>
<p>In [17]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def scaled_dot_product_attention(q, k, v, mask):</span><br><span class="line">    # query key 相乘获取匹配关系</span><br><span class="line">    matmul_qk = tf.matmul(q, k, transpose_b=True)  # transpose_b=True表示b项在运算前要进行转置运算</span><br><span class="line">    </span><br><span class="line">    # 使用dk进行缩放</span><br><span class="line">    dk = tf.cast(tf.shape(k)[-1], tf.float32)</span><br><span class="line">    scaled_attention_logits = matmul_qk / tf.math.sqrt(dk)</span><br><span class="line">    </span><br><span class="line">    # 掩码</span><br><span class="line">    if mask is not None:</span><br><span class="line">        scaled_attention_logits += (mask * -1e9)</span><br><span class="line">        </span><br><span class="line">    # 通过softmax获取attention权重</span><br><span class="line">    attention_weights = tf.nn.softmax(scaled_attention_logits, axis=-1)</span><br><span class="line">    </span><br><span class="line">    # attention 乘上value</span><br><span class="line">    output = tf.matmul(attention_weights, v) # （.., seq_len_v, depth）</span><br><span class="line">    </span><br><span class="line">    return output, attention_weights</span><br></pre></td></tr></tbody></table></figure>
<p>使用attention获取需要关注的语义</p>
<p>In [18]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def print_out(q, k, v):</span><br><span class="line">    temp_out, temp_att = scaled_dot_product_attention(</span><br><span class="line">    q, k, v, None)</span><br><span class="line">    print('attention weight:')</span><br><span class="line">    print(temp_att)</span><br><span class="line">    print('output:')</span><br><span class="line">    print(temp_out)</span><br></pre></td></tr></tbody></table></figure>
<p>attention测试</p>
<p>In [19]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 显示为numpy类型</span><br><span class="line">np.set_printoptions(suppress=True)</span><br><span class="line"></span><br><span class="line">temp_k = tf.constant([[10,0,0],</span><br><span class="line">                      [0,10,0],</span><br><span class="line">                      [0,0,10],</span><br><span class="line">                      [0,0,10]], dtype=tf.float32)  # (4, 3)</span><br><span class="line"></span><br><span class="line">temp_v = tf.constant([[   1,0],</span><br><span class="line">                      [  10,0],</span><br><span class="line">                      [ 100,5],</span><br><span class="line">                      [1000,6]], dtype=tf.float32)  # (4, 3)</span><br><span class="line"># 关注第2个key, 返回对应的value</span><br><span class="line">temp_q = tf.constant([[0,10,0]], dtype=tf.float32)</span><br><span class="line">print_out(temp_q, temp_k, temp_v)</span><br><span class="line">attention weight:</span><br><span class="line">tf.Tensor([[0. 1. 0. 0.]], shape=(1, 4), dtype=float32)</span><br><span class="line">output:</span><br><span class="line">tf.Tensor([[10.  0.]], shape=(1, 2), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<p>In [20]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 关注重复的key(第3、4个), 返回对应的value（平均）</span><br><span class="line">temp_q = tf.constant([[0,0,10]], dtype=tf.float32)</span><br><span class="line">print_out(temp_q, temp_k, temp_v)</span><br><span class="line">attention weight:</span><br><span class="line">tf.Tensor([[0.  0.  0.5 0.5]], shape=(1, 4), dtype=float32)</span><br><span class="line">output:</span><br><span class="line">tf.Tensor([[550.    5.5]], shape=(1, 2), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<p>In [21]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 关注第1、2个key, 返回对应的value（平均）</span><br><span class="line">temp_q = tf.constant([[10,10,0]], dtype=tf.float32)</span><br><span class="line">print_out(temp_q, temp_k, temp_v)</span><br><span class="line">attention weight:</span><br><span class="line">tf.Tensor([[0.5 0.5 0.  0. ]], shape=(1, 4), dtype=float32)</span><br><span class="line">output:</span><br><span class="line">tf.Tensor([[5.5 0. ]], shape=(1, 2), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<p>In [22]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 依次放入每个query</span><br><span class="line">temp_q = tf.constant([[0, 0, 10], [0, 10, 0], [10, 10, 0]], dtype=tf.float32)  # (3, 3)</span><br><span class="line">print_out(temp_q, temp_k, temp_v)</span><br><span class="line">attention weight:</span><br><span class="line">tf.Tensor(</span><br><span class="line">[[0.  0.  0.5 0.5]</span><br><span class="line"> [0.  1.  0.  0. ]</span><br><span class="line"> [0.5 0.5 0.  0. ]], shape=(3, 4), dtype=float32)</span><br><span class="line">output:</span><br><span class="line">tf.Tensor(</span><br><span class="line">[[550.    5.5]</span><br><span class="line"> [ 10.    0. ]</span><br><span class="line"> [  5.5   0. ]], shape=(3, 2), dtype=float32)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="mutil-head-attention">5.Mutil-Head Attention</h2>
<p><img src="https://camo.githubusercontent.com/5464abc4535579fdb88afb7117617f6f23ff50af/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f6d756c74695f686561645f617474656e74696f6e2e706e67" alt="img"></p>
<p>mutil-head attention包含3部分：</p>
<ul>
<li>线性层与分头</li>
<li>缩放点积注意力</li>
<li>头连接</li>
<li>末尾线性层</li>
</ul>
<p>每个多头注意块有三个输入; Q（查询），K（密钥），V（值）。 它们<code>通过第一层线性层并分成多个头</code>。</p>
<p>注意:点积注意力时需要使用mask， 多头输出需要使用tf.transpose调整各维度。</p>
<p>Q，K和V不是一个单独的注意头，而是分成多个头，因为<code>它允许模型共同参与来自不同表征空间的不同信息。 在拆分之后，每个头部具有降低的维度，总计算成本与具有全维度的单个头部注意力相同。</code></p>
<p>python 中<code>assert断言</code>是声明其布尔值必须为真的判定，如果发生异常就说明表达式为假。可以理解assert断言语句为<strong>raise-if-not</strong>，用来测试表示式，其返回值为假，则会抛出AssertError并且包含错误信息。如果它为真，就不做任何事</p>
<p>"//"不管两者出现任何数，都以整除结果为准，不对小数部分进行处理，直接抛弃，也就是整除法</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"># 构造mutil head attention层</span><br><span class="line">class MutilHeadAttention(tf.keras.layers.Layer):</span><br><span class="line">    def __init__(self, d_model, num_heads):</span><br><span class="line">        super(MutilHeadAttention, self).__init__()</span><br><span class="line">        self.num_heads = num_heads</span><br><span class="line">        self.d_model = d_model</span><br><span class="line">        </span><br><span class="line">        # d_model 必须可以正确分为各个头</span><br><span class="line">        assert d_model % num_heads == 0</span><br><span class="line">        # 分头后的维度</span><br><span class="line">        self.depth = d_model // num_heads</span><br><span class="line">        </span><br><span class="line">        self.wq = tf.keras.layers.Dense(d_model)</span><br><span class="line">        self.wk = tf.keras.layers.Dense(d_model)</span><br><span class="line">        self.wv = tf.keras.layers.Dense(d_model)</span><br><span class="line">        </span><br><span class="line">        self.dense = tf.keras.layers.Dense(d_model)</span><br><span class="line">        </span><br><span class="line">    def split_heads(self, x, batch_size):</span><br><span class="line">        # 分头, 将头个数的维度 放到 seq_len 前面</span><br><span class="line">        x = tf.reshape(x, (batch_size, -1, self.num_heads, self.depth))</span><br><span class="line">        return tf.transpose(x, perm=[0, 2, 1, 3])</span><br><span class="line">    </span><br><span class="line">    def call(self, v, k, q, mask):</span><br><span class="line">        batch_size = tf.shape(q)[0]</span><br><span class="line">        </span><br><span class="line">        # 分头前的前向网络，获取q、k、v语义</span><br><span class="line">        q = self.wq(q)  # (batch_size, seq_len, d_model)</span><br><span class="line">        k = self.wk(k)</span><br><span class="line">        v = self.wv(v)</span><br><span class="line">        </span><br><span class="line">        # 分头</span><br><span class="line">        q = self.split_heads(q, batch_size) # (batch_size, num_heads, seq_len_q, depth)</span><br><span class="line">        k = self.split_heads(k, batch_size)</span><br><span class="line">        v = self.split_heads(v, batch_size)</span><br><span class="line">        # scaled_attention.shape == (batch_size, num_heads, seq_len_v, depth)</span><br><span class="line">        # attention_weights.shape == (batch_size, num_heads, seq_len_q, seq_len_k)</span><br><span class="line">        </span><br><span class="line">        # 通过缩放点积注意力层</span><br><span class="line">        scaled_attention, attention_weights = scaled_dot_product_attention(</span><br><span class="line">        q, k, v, mask)</span><br><span class="line">        # 把多头维度后移</span><br><span class="line">        scaled_attention = tf.transpose(scaled_attention, [0, 2, 1, 3]) # (batch_size, seq_len_v, num_heads, depth)</span><br><span class="line"></span><br><span class="line">        # 合并多头</span><br><span class="line">        concat_attention = tf.reshape(scaled_attention, </span><br><span class="line">                                      (batch_size, -1, self.d_model))</span><br><span class="line">        </span><br><span class="line">        # 全连接重塑</span><br><span class="line">        output = self.dense(concat_attention)</span><br><span class="line">        return output, attention_weights</span><br></pre></td></tr></tbody></table></figure>
<p>测试多头attention</p>
<p>In [24]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">temp_mha = MutilHeadAttention(d_model=512, num_heads=8)</span><br><span class="line">y = tf.random.uniform((1, 60, 512))</span><br><span class="line">output, att = temp_mha(y, k=y, q=y, mask=None)</span><br><span class="line">print(output.shape, att.shape)</span><br><span class="line">(1, 60, 512) (1, 8, 60, 60)</span><br></pre></td></tr></tbody></table></figure>
<p>point wise前向网络</p>
<p>In [25]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def point_wise_feed_forward_network(d_model, diff):</span><br><span class="line">    return tf.keras.Sequential([</span><br><span class="line">        tf.keras.layers.Dense(diff, activation='relu'),</span><br><span class="line">        tf.keras.layers.Dense(d_model)</span><br><span class="line">    ])</span><br></pre></td></tr></tbody></table></figure>
<p>In [26]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sample_fnn = point_wise_feed_forward_network(512, 2048)</span><br><span class="line">sample_fnn(tf.random.uniform((64, 50, 512))).shape</span><br></pre></td></tr></tbody></table></figure>
<p>Out[26]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorShape([64, 50, 512])</span><br></pre></td></tr></tbody></table></figure>
<h2 id="编码器和解码器">6.编码器和解码器</h2>
<p><img src="https://camo.githubusercontent.com/ce5d9e0b508ffa8c84c943258c677b7576f35757/68747470733a2f2f7777772e74656e736f72666c6f772e6f72672f696d616765732f7475746f7269616c732f7472616e73666f726d65722f7472616e73666f726d65722e706e67" alt="img"></p>
<ul>
<li>通过N个编码器层，为序列中的每个字/令牌生成输出。</li>
<li>解码器连接编码器的输出和它自己的输入（自我注意）以预测下一个字。</li>
</ul>
<h3 id="编码层">编码层</h3>
<p>每个编码层包含以下子层</p>
<ul>
<li>Multi-head attention（带掩码）</li>
<li>Point wise feed forward networks</li>
</ul>
<p>每个子层中都有残差连接，并最后通过一个正则化层。残差连接有助于避免深度网络中的梯度消失问题。 每个子层输出是LayerNorm(x + Sublayer(x))，规范化是在d_model维的向量上。Transformer一共有n个编码层。</p>
<p>In [27]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class LayerNormalization(tf.keras.layers.Layer):</span><br><span class="line">    def __init__(self, epsilon=1e-6, **kwargs):</span><br><span class="line">        self.eps = epsilon</span><br><span class="line">        super(LayerNormalization, self).__init__(**kwargs)</span><br><span class="line">    def build(self, input_shape):</span><br><span class="line">        self.gamma = self.add_weight(name='gamma', shape=input_shape[-1:],</span><br><span class="line">                                     initializer=tf.ones_initializer(), trainable=True)</span><br><span class="line">        self.beta = self.add_weight(name='beta', shape=input_shape[-1:],</span><br><span class="line">                                    initializer=tf.zeros_initializer(), trainable=True)</span><br><span class="line">        super(LayerNormalization, self).build(input_shape)</span><br><span class="line">    def call(self, x):</span><br><span class="line">        mean = tf.keras.backend.mean(x, axis=-1, keepdims=True)</span><br><span class="line">        std = tf.keras.backend.std(x, axis=-1, keepdims=True)</span><br><span class="line">        return self.gamma * (x - mean) / (std + self.eps) + self.beta</span><br><span class="line">    def compute_output_shape(self, input_shape):</span><br><span class="line">        return input_shape</span><br></pre></td></tr></tbody></table></figure>
<p>In [28]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class EncoderLayer(tf.keras.layers.Layer):</span><br><span class="line">    def __init__(self, d_model, n_heads, ddf, dropout_rate=0.1):</span><br><span class="line">        super(EncoderLayer, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.mha = MutilHeadAttention(d_model, n_heads)</span><br><span class="line">        self.ffn = point_wise_feed_forward_network(d_model, ddf)</span><br><span class="line">        </span><br><span class="line">        self.layernorm1 = LayerNormalization(epsilon=1e-6)</span><br><span class="line">        self.layernorm2 = LayerNormalization(epsilon=1e-6)</span><br><span class="line">        </span><br><span class="line">        self.dropout1 = tf.keras.layers.Dropout(dropout_rate)</span><br><span class="line">        self.dropout2 = tf.keras.layers.Dropout(dropout_rate)</span><br><span class="line">        </span><br><span class="line">    def call(self, inputs, training, mask):</span><br><span class="line">        # 多头注意力网络</span><br><span class="line">        att_output, _ = self.mha(inputs, inputs, inputs, mask)</span><br><span class="line">        att_output = self.dropout1(att_output, training=training)</span><br><span class="line">        out1 = self.layernorm1(inputs + att_output)  # (batch_size, input_seq_len, d_model)</span><br><span class="line">        # 前向网络</span><br><span class="line">        ffn_output = self.ffn(out1)</span><br><span class="line">        ffn_output = self.dropout2(ffn_output, training=training)</span><br><span class="line">        out2 = self.layernorm2(out1 + ffn_output)  # (batch_size, input_seq_len, d_model)</span><br><span class="line">        return out2</span><br></pre></td></tr></tbody></table></figure>
<p>encoder层测试</p>
<p>In [29]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sample_encoder_layer = EncoderLayer(512, 8, 2048)</span><br><span class="line">sample_encoder_layer_output = sample_encoder_layer(</span><br><span class="line">tf.random.uniform((64, 43, 512)), False, None)</span><br><span class="line"></span><br><span class="line">sample_encoder_layer_output.shape</span><br></pre></td></tr></tbody></table></figure>
<p>Out[29]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorShape([64, 43, 512])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="解码层">解码层</h3>
<p>每个编码层包含以下子层：</p>
<ul>
<li>Masked muti-head attention（带padding掩码和look-ahead掩码）</li>
<li>Muti-head attention（带padding掩码）value和key来自encoder输出，query来自Masked muti-head attention层输出</li>
<li>Point wise feed forward network</li>
</ul>
<p>每个子层中都有残差连接，并最后通过一个正则化层。残差连接有助于避免深度网络中的梯度消失问题。</p>
<p>每个子层输出是LayerNorm(x + Sublayer(x))，规范化是在d_model维的向量上。Transformer一共有n个解码层。</p>
<p>当Q从解码器的第一个注意块接收输出，并且K接收编码器输出时，注意权重表示基于编码器输出给予解码器输入的重要性。 换句话说，解码器通过查看编码器输出并自我关注其自己的输出来预测下一个字。</p>
<p>ps：因为padding在后面所以look-ahead掩码同时掩padding</p>
<p>In [30]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class DecoderLayer(tf.keras.layers.Layer):</span><br><span class="line">    def __init__(self, d_model, num_heads, dff, drop_rate=0.1):</span><br><span class="line">        super(DecoderLayer, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.mha1 = MutilHeadAttention(d_model, num_heads)</span><br><span class="line">        self.mha2 = MutilHeadAttention(d_model, num_heads)</span><br><span class="line">        </span><br><span class="line">        self.ffn = point_wise_feed_forward_network(d_model, dff)</span><br><span class="line">        </span><br><span class="line">        self.layernorm1 = LayerNormalization(epsilon=1e-6)</span><br><span class="line">        self.layernorm2 = LayerNormalization(epsilon=1e-6)</span><br><span class="line">        self.layernorm3 = LayerNormalization(epsilon=1e-6)</span><br><span class="line">        </span><br><span class="line">        self.dropout1 = layers.Dropout(drop_rate)</span><br><span class="line">        self.dropout2 = layers.Dropout(drop_rate)</span><br><span class="line">        self.dropout3 = layers.Dropout(drop_rate)</span><br><span class="line">        </span><br><span class="line">    def call(self,inputs, encode_out, training, </span><br><span class="line">             look_ahead_mask, padding_mask):</span><br><span class="line">        # masked muti-head attention</span><br><span class="line">        att1, att_weight1 = self.mha1(inputs, inputs, inputs,look_ahead_mask)</span><br><span class="line">        att1 = self.dropout1(att1, training=training)</span><br><span class="line">        out1 = self.layernorm1(inputs + att1)</span><br><span class="line">        # muti-head attention</span><br><span class="line">        att2, att_weight2 = self.mha2(encode_out, encode_out, inputs, padding_mask)</span><br><span class="line">        att2 = self.dropout2(att2, training=training)</span><br><span class="line">        out2 = self.layernorm2(out1 + att2)</span><br><span class="line">        </span><br><span class="line">        ffn_out = self.ffn(out2)</span><br><span class="line">        ffn_out = self.dropout3(ffn_out, training=training)</span><br><span class="line">        out3 = self.layernorm3(out2 + ffn_out)</span><br><span class="line">        </span><br><span class="line">        return out3, att_weight1, att_weight2</span><br></pre></td></tr></tbody></table></figure>
<p>测试解码层</p>
<p>In [31]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sample_decoder_layer = DecoderLayer(512, 8, 2048)</span><br><span class="line"></span><br><span class="line">sample_decoder_layer_output, _, _ = sample_decoder_layer(</span><br><span class="line">tf.random.uniform((64, 50, 512)), sample_encoder_layer_output,</span><br><span class="line">    False, None, None)</span><br><span class="line">sample_decoder_layer_output.shape</span><br></pre></td></tr></tbody></table></figure>
<p>Out[31]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorShape([64, 50, 512])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="编码器">编码器</h3>
<p>编码器包含：</p>
<ul>
<li>Input Embedding</li>
<li>Positional Embedding</li>
<li>N个编码层</li>
</ul>
<p>In [32]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">class Encoder(layers.Layer):</span><br><span class="line">    def __init__(self, n_layers, d_model, n_heads, ddf,</span><br><span class="line">                input_vocab_size, max_seq_len, drop_rate=0.1):</span><br><span class="line">        super(Encoder, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.n_layers = n_layers</span><br><span class="line">        self.d_model = d_model</span><br><span class="line">        </span><br><span class="line">        self.embedding = layers.Embedding(input_vocab_size, d_model)</span><br><span class="line">        self.pos_embedding = positional_encoding(max_seq_len, d_model)</span><br><span class="line">        </span><br><span class="line">        self.encode_layer = [EncoderLayer(d_model, n_heads, ddf, drop_rate)</span><br><span class="line">                            for _ in range(n_layers)]</span><br><span class="line">        </span><br><span class="line">        self.dropout = layers.Dropout(drop_rate)</span><br><span class="line">    def call(self, inputs, training, mark):</span><br><span class="line">        </span><br><span class="line">        seq_len = inputs.shape[1]</span><br><span class="line">        word_emb = self.embedding(inputs)</span><br><span class="line">        word_emb *= tf.math.sqrt(tf.cast(self.d_model, tf.float32))</span><br><span class="line">        emb = word_emb + self.pos_embedding[:,:seq_len,:]</span><br><span class="line">        x = self.dropout(emb, training=training)</span><br><span class="line">        for i in range(self.n_layers):</span><br><span class="line">            x = self.encode_layer[i](x, training, mark)</span><br><span class="line">        </span><br><span class="line">        return x</span><br></pre></td></tr></tbody></table></figure>
<p>编码器测试</p>
<p>In [33]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sample_encoder = Encoder(2, 512, 8, 1024, 5000, 200)</span><br><span class="line">sample_encoder_output = sample_encoder(tf.random.uniform((64, 120)),</span><br><span class="line">                                      False, None)</span><br><span class="line">sample_encoder_output.shape</span><br></pre></td></tr></tbody></table></figure>
<p>Out[33]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorShape([64, 120, 512])</span><br></pre></td></tr></tbody></table></figure>
<h3 id="解码器">解码器</h3>
<p>解码器包含以下部分：1、输出嵌入；2、位置编码；3、n个解码层</p>
<p>输出嵌入和位置编码叠加后输入解码器，解码器最后的输出送给一个全连接</p>
<p>In [34]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># import pdb</span><br><span class="line"># pdb.set_trace()</span><br><span class="line">class Decoder(layers.Layer):</span><br><span class="line">    def __init__(self, n_layers, d_model, n_heads, ddf,</span><br><span class="line">                target_vocab_size, max_seq_len, drop_rate=0.1):</span><br><span class="line">        super(Decoder, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.d_model = d_model</span><br><span class="line">        self.n_layers = n_layers</span><br><span class="line">        </span><br><span class="line">        self.embedding = layers.Embedding(target_vocab_size, d_model)</span><br><span class="line">        self.pos_embedding = positional_encoding(max_seq_len, d_model)</span><br><span class="line">        </span><br><span class="line">        self.decoder_layers= [DecoderLayer(d_model, n_heads, ddf, drop_rate)</span><br><span class="line">                             for _ in range(n_layers)]</span><br><span class="line">        </span><br><span class="line">        self.dropout = layers.Dropout(drop_rate)</span><br><span class="line">        </span><br><span class="line">    def call(self, inputs, encoder_out,training,</span><br><span class="line">             look_ahead_mark, padding_mark):</span><br><span class="line">    </span><br><span class="line">        seq_len = tf.shape(inputs)[1]</span><br><span class="line">        attention_weights = {}</span><br><span class="line">        h = self.embedding(inputs)</span><br><span class="line">        h *= tf.math.sqrt(tf.cast(self.d_model, tf.float32))</span><br><span class="line">        h += self.pos_embedding[:,:seq_len,:]</span><br><span class="line">        </span><br><span class="line">        h = self.dropout(h, training=training)</span><br><span class="line">#         print('--------------------\n',h, h.shape)</span><br><span class="line">        # 叠加解码层</span><br><span class="line">        for i in range(self.n_layers):</span><br><span class="line">            h, att_w1, att_w2 = self.decoder_layers[i](h, encoder_out,</span><br><span class="line">                                                   training, look_ahead_mark,</span><br><span class="line">                                                   padding_mark)</span><br><span class="line">            attention_weights['decoder_layer{}_att_w1'.format(i+1)] = att_w1</span><br><span class="line">            attention_weights['decoder_layer{}_att_w2'.format(i+1)] = att_w2</span><br><span class="line">        </span><br><span class="line">        return h, attention_weights</span><br></pre></td></tr></tbody></table></figure>
<p>解码器测试</p>
<p>In [35]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sample_decoder = Decoder(2, 512,8,1024,5000, 200)</span><br><span class="line">sample_decoder_output, attn = sample_decoder(tf.random.uniform((64, 100)),</span><br><span class="line">                                            sample_encoder_output, False,</span><br><span class="line">                                            None, None)</span><br><span class="line">sample_decoder_output.shape, attn['decoder_layer1_att_w1'].shape</span><br></pre></td></tr></tbody></table></figure>
<p>Out[35]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(TensorShape([64, 100, 512]), TensorShape([64, 8, 100, 100]))</span><br></pre></td></tr></tbody></table></figure>
<h3 id="创建transformer">创建Transformer</h3>
<p>Transformer包含编码器、解码器和最后的线性层，解码层的输出经过线性层后得到Transformer的输出</p>
<p>In [36]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Transformer(tf.keras.Model):</span><br><span class="line">    def __init__(self, n_layers, d_model, n_heads, diff,</span><br><span class="line">                input_vocab_size, target_vocab_size,</span><br><span class="line">                max_seq_len, drop_rate=0.1):</span><br><span class="line">        super(Transformer, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.encoder = Encoder(n_layers, d_model, n_heads,diff,</span><br><span class="line">                              input_vocab_size, max_seq_len, drop_rate)</span><br><span class="line">        </span><br><span class="line">        self.decoder = Decoder(n_layers, d_model, n_heads, diff,</span><br><span class="line">                              target_vocab_size, max_seq_len, drop_rate)</span><br><span class="line">        </span><br><span class="line">        self.final_layer = tf.keras.layers.Dense(target_vocab_size)</span><br><span class="line">    def call(self, inputs, targets, training, encode_padding_mask, </span><br><span class="line">            look_ahead_mask, decode_padding_mask):</span><br><span class="line">        </span><br><span class="line">        encode_out = self.encoder(inputs, training, encode_padding_mask)</span><br><span class="line">        print(encode_out.shape)</span><br><span class="line">        decode_out, att_weights = self.decoder(targets, encode_out, training, </span><br><span class="line">                                               look_ahead_mask, decode_padding_mask)</span><br><span class="line">        print(decode_out.shape)</span><br><span class="line">        final_out = self.final_layer(decode_out)</span><br><span class="line">        </span><br><span class="line">        return final_out, att_weights</span><br></pre></td></tr></tbody></table></figure>
<p>Transformer测试</p>
<p>In [37]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sample_transformer = Transformer(</span><br><span class="line">n_layers=2, d_model=512, n_heads=8, diff=1024,</span><br><span class="line">input_vocab_size=8500, target_vocab_size=8000, max_seq_len=120</span><br><span class="line">)</span><br><span class="line">temp_input = tf.random.uniform((64, 62))</span><br><span class="line">temp_target = tf.random.uniform((64, 26))</span><br><span class="line">fn_out, _ = sample_transformer(temp_input, temp_target, training=False,</span><br><span class="line">                              encode_padding_mask=None,</span><br><span class="line">                               look_ahead_mask=None,</span><br><span class="line">                               decode_padding_mask=None,</span><br><span class="line">                              )</span><br><span class="line">fn_out.shape</span><br><span class="line">(64, 62, 512)</span><br><span class="line">(64, 26, 512)</span><br></pre></td></tr></tbody></table></figure>
<p>Out[37]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TensorShape([64, 26, 8000])</span><br></pre></td></tr></tbody></table></figure>
<h2 id="实验设置">7.实验设置</h2>
<h3 id="设置超参">设置超参</h3>
<p>In [38]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num_layers = 4</span><br><span class="line">d_model = 128</span><br><span class="line">dff = 512</span><br><span class="line">num_heads = 8</span><br><span class="line"></span><br><span class="line">input_vocab_size = tokenizer_pt.vocab_size + 2</span><br><span class="line">target_vocab_size = tokenizer_en.vocab_size + 2</span><br><span class="line">max_seq_len = 40</span><br><span class="line">dropout_rate = 0.1</span><br></pre></td></tr></tbody></table></figure>
<h3 id="优化器">优化器</h3>
<p>带自定义学习率调整的Adam优化器<img src="https://render.githubusercontent.com/render/math?math=%5CLarge%7Blrate%20%3D%20d_%7Bmodel%7D%5E%7B-0.5%7D%20%2A%20min%28step%7B%5C_%7Dnum%5E%7B-0.5%7D%2C%20step%7B%5C_%7Dnum%20%2A%20warmup%7B%5C_%7Dsteps%5E%7B-1.5%7D%29%7D&amp;mode=display" alt="\Large{lrate = d_{model}^{-0.5} * min(step{\_}num^{-0.5}, step{\_}num * warmup{\_}steps^{-1.5})}"></p>
<p>In [39]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class CustomSchedule(tf.keras.optimizers.schedules.LearningRateSchedule):</span><br><span class="line">    def __init__(self, d_model, warmup_steps=4000):</span><br><span class="line">        super(CustomSchedule, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.d_model = tf.cast(d_model, tf.float32)</span><br><span class="line">        self.warmup_steps = warmup_steps</span><br><span class="line">    </span><br><span class="line">    def __call__(self, step):</span><br><span class="line">        arg1 = tf.math.rsqrt(step)</span><br><span class="line">        arg2 = step * (self.warmup_steps ** -1.5)</span><br><span class="line">        </span><br><span class="line">        return tf.math.rsqrt(self.d_model) * tf.math.minimum(arg1, arg2)</span><br></pre></td></tr></tbody></table></figure>
<p>In [40]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">learing_rate = CustomSchedule(d_model)</span><br><span class="line">optimizer = tf.keras.optimizers.Adam(learing_rate, beta_1=0.9, </span><br><span class="line">                                    beta_2=0.98, epsilon=1e-9)</span><br></pre></td></tr></tbody></table></figure>
<p>In [41]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 测试</span><br><span class="line">temp_learing_rate = CustomSchedule(d_model)</span><br><span class="line">plt.plot(temp_learing_rate(tf.range(40000, dtype=tf.float32)))</span><br><span class="line">plt.xlabel('learning rate')</span><br><span class="line">plt.ylabel('train step')</span><br></pre></td></tr></tbody></table></figure>
<p>Out[41]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(0, 0.5, 'train step')</span><br></pre></td></tr></tbody></table></figure>
<p><img src="data:image/png;base64,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%0A" alt="img"></p>
<h3 id="损失和指标">损失和指标</h3>
<p>由于目标序列是填充的，因此在计算损耗时应用填充掩码很重要。 padding的掩码为0，没padding的掩码为1</p>
<p>In [42]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">loss_object = tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True,</span><br><span class="line">                                                           reduction='none')</span><br><span class="line"></span><br><span class="line">def loss_fun(y_ture, y_pred):</span><br><span class="line">    mask = tf.math.logical_not(tf.math.equal(y_ture, 0))  # 为0掩码标1</span><br><span class="line">    loss_ = loss_object(y_ture, y_pred)</span><br><span class="line">    </span><br><span class="line">    mask = tf.cast(mask, dtype=loss_.dtype)</span><br><span class="line">    loss_ *= mask</span><br><span class="line">    return tf.reduce_mean(loss_)</span><br></pre></td></tr></tbody></table></figure>
<p>In [43]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">train_loss = tf.keras.metrics.Mean(name='train_loss')</span><br><span class="line">train_accuracy = tf.keras.metrics.SparseCategoricalAccuracy(name='train_accuracy')</span><br></pre></td></tr></tbody></table></figure>
<h2 id="训练和保持模型">8、训练和保持模型</h2>
<p>In [44]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">transformer = Transformer(num_layers, d_model, num_heads, dff,</span><br><span class="line">                          input_vocab_size, target_vocab_size,</span><br><span class="line">                          max_seq_len, dropout_rate)</span><br></pre></td></tr></tbody></table></figure>
<p>In [45]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 构建掩码</span><br><span class="line">def create_mask(inputs,targets):</span><br><span class="line">    encode_padding_mask = create_padding_mark(inputs)</span><br><span class="line">    # 这个掩码用于掩输入解码层第二层的编码层输出</span><br><span class="line">    decode_padding_mask = create_padding_mark(inputs)</span><br><span class="line">    </span><br><span class="line">    # look_ahead 掩码， 掩掉未预测的词</span><br><span class="line">    look_ahead_mask = create_look_ahead_mark(tf.shape(targets)[1])</span><br><span class="line">    # 解码层第一层得到padding掩码</span><br><span class="line">    decode_targets_padding_mask = create_padding_mark(targets)</span><br><span class="line">    </span><br><span class="line">    # 合并解码层第一层掩码</span><br><span class="line">    combine_mask = tf.maximum(decode_targets_padding_mask, look_ahead_mask)</span><br><span class="line">    </span><br><span class="line">    return encode_padding_mask, combine_mask, decode_padding_mask</span><br></pre></td></tr></tbody></table></figure>
<p>创建checkpoint管理器</p>
<p>In [46]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">checkpoint_path = './checkpoint/train'</span><br><span class="line">ckpt = tf.train.Checkpoint(transformer=transformer,</span><br><span class="line">                          optimizer=optimizer)</span><br><span class="line"># ckpt管理器</span><br><span class="line">ckpt_manager = tf.train.CheckpointManager(ckpt, checkpoint_path, max_to_keep=3)</span><br><span class="line"></span><br><span class="line">if ckpt_manager.latest_checkpoint:</span><br><span class="line">    ckpt.restore(ckpt_manager.latest_checkpoint)</span><br><span class="line">    print('last checkpoit restore')</span><br></pre></td></tr></tbody></table></figure>
<p>target分为target_input和target real. target_input是传给解码器的输入，target_real是其左移一个位置的结果，每个target_input位置对应下一个预测的标签</p>
<p>如句子=“SOS A丛林中的狮子正在睡觉EOS”</p>
<p>target_input =“SOS丛林中的狮子正在睡觉”</p>
<p>target_real =“丛林中的狮子正在睡觉EOS”</p>
<p>transformer是个自动回归模型：它一次预测一个部分，并使用其到目前为止的输出，决定下一步做什么。</p>
<p>在训练期间使用teacher-forcing，即无论模型当前输出什么都强制将正确输出传给下一步。</p>
<p>而预测时则根据前一个的输出预测下一个词</p>
<p>为防止模型在预期输出处达到峰值，模型使用look-ahead mask</p>
<p>In [47]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@tf.function</span><br><span class="line">def train_step(inputs, targets):</span><br><span class="line">    tar_inp = targets[:,:-1]</span><br><span class="line">    tar_real = targets[:,1:]</span><br><span class="line">    # 构造掩码</span><br><span class="line">    encode_padding_mask, combined_mask, decode_padding_mask = create_mask(inputs, tar_inp)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    with tf.GradientTape() as tape:</span><br><span class="line">        predictions, _ = transformer(inputs, tar_inp,</span><br><span class="line">                                    True,</span><br><span class="line">                                    encode_padding_mask,</span><br><span class="line">                                    combined_mask,</span><br><span class="line">                                    decode_padding_mask)</span><br><span class="line">        loss = loss_fun(tar_real, predictions)</span><br><span class="line">    # 求梯度</span><br><span class="line">    gradients = tape.gradient(loss, transformer.trainable_variables)</span><br><span class="line">    # 反向传播</span><br><span class="line">    optimizer.apply_gradients(zip(gradients, transformer.trainable_variables))</span><br><span class="line">    </span><br><span class="line">    # 记录loss和准确率</span><br><span class="line">    train_loss(loss)</span><br><span class="line">    train_accuracy(tar_real, predictions)</span><br></pre></td></tr></tbody></table></figure>
<p>葡萄牙语用作输入语言，英语是目标语言。</p>
<p>In [48]:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">EPOCHS = 20</span><br><span class="line">for epoch in range(EPOCHS):</span><br><span class="line">    start = time.time()</span><br><span class="line">    </span><br><span class="line">    # 重置记录项</span><br><span class="line">    train_loss.reset_states()</span><br><span class="line">    train_accuracy.reset_states()</span><br><span class="line">    </span><br><span class="line">    # inputs 葡萄牙语， targets英语</span><br><span class="line">    </span><br><span class="line">    for batch, (inputs, targets) in enumerate(train_dataset):</span><br><span class="line">        # 训练</span><br><span class="line">        train_step(inputs, targets)</span><br><span class="line">        </span><br><span class="line">        if batch % 500 == 0:</span><br><span class="line">            print('epoch {}, batch {}, loss:{:.4f}, acc:{:.4f}'.format(</span><br><span class="line">            epoch+1, batch, train_loss.result(), train_accuracy.result()</span><br><span class="line">            ))</span><br><span class="line">            </span><br><span class="line">    if (epoch + 1) % 2 == 0:</span><br><span class="line">        ckpt_save_path = ckpt_manager.save()</span><br><span class="line">        print('epoch {}, save model at {}'.format(</span><br><span class="line">        epoch+1, ckpt_save_path</span><br><span class="line">        ))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    print('epoch {}, loss:{:.4f}, acc:{:.4f}'.format(</span><br><span class="line">    epoch+1, train_loss.result(), train_accuracy.result()</span><br><span class="line">    ))</span><br><span class="line">    </span><br><span class="line">    print('time in 1 epoch:{} secs\n'.format(time.time()-start))</span><br><span class="line">(64, 40, 128)</span><br><span class="line">(64, 39, 128)</span><br><span class="line">(64, 40, 128)</span><br><span class="line">(64, 39, 128)</span><br><span class="line">epoch 1, batch 0, loss:4.0259, acc:0.0000</span><br><span class="line">epoch 1, batch 500, loss:3.4436, acc:0.0340</span><br><span class="line">(31, 40, 128)</span><br><span class="line">(31, 39, 128)</span><br><span class="line">epoch 1, loss:3.2112, acc:0.0481</span><br><span class="line">time in 1 epoch:467.3876633644104 secs</span><br><span class="line"></span><br><span class="line">epoch 2, batch 0, loss:2.4443, acc:0.0982</span><br><span class="line">epoch 2, batch 500, loss:2.3006, acc:0.1139</span><br><span class="line">epoch 2, save model at ./checkpoint/train/ckpt-1</span><br><span class="line">epoch 2, loss:2.2473, acc:0.1184</span><br><span class="line">time in 1 epoch:429.6356120109558 secs</span><br><span class="line"></span><br><span class="line">epoch 3, batch 0, loss:2.0709, acc:0.1306</span><br><span class="line">epoch 3, batch 500, loss:2.0279, acc:0.1412</span><br><span class="line">epoch 3, loss:1.9927, acc:0.1443</span><br><span class="line">time in 1 epoch:426.3838963508606 secs</span><br><span class="line"></span><br><span class="line">epoch 4, batch 0, loss:1.8720, acc:0.1571</span><br><span class="line">epoch 4, batch 500, loss:1.8020, acc:0.1678</span><br><span class="line">epoch 4, save model at ./checkpoint/train/ckpt-2</span><br><span class="line">epoch 4, loss:1.7664, acc:0.1714</span><br><span class="line">time in 1 epoch:387.37333059310913 secs</span><br><span class="line"></span><br><span class="line">epoch 5, batch 0, loss:1.6616, acc:0.1807</span><br><span class="line">epoch 5, batch 500, loss:1.5908, acc:0.1936</span><br><span class="line">epoch 5, loss:1.5610, acc:0.1961</span><br><span class="line">time in 1 epoch:389.60524225234985 secs</span><br><span class="line"></span><br><span class="line">epoch 6, batch 0, loss:1.4435, acc:0.2087</span><br><span class="line">epoch 6, batch 500, loss:1.4117, acc:0.2127</span><br><span class="line">epoch 6, save model at ./checkpoint/train/ckpt-3</span><br><span class="line">epoch 6, loss:1.3852, acc:0.2147</span><br><span class="line">time in 1 epoch:438.03212571144104 secs</span><br><span class="line"></span><br><span class="line">epoch 7, batch 0, loss:1.3070, acc:0.2183</span><br><span class="line">epoch 7, batch 500, loss:1.2383, acc:0.2320</span><br><span class="line">epoch 7, loss:1.2111, acc:0.2346</span><br><span class="line">time in 1 epoch:378.90994358062744 secs</span><br><span class="line"></span><br><span class="line">epoch 8, batch 0, loss:1.1545, acc:0.2332</span><br><span class="line">epoch 8, batch 500, loss:1.0854, acc:0.2508</span><br><span class="line">epoch 8, save model at ./checkpoint/train/ckpt-4</span><br><span class="line">epoch 8, loss:1.0658, acc:0.2525</span><br><span class="line">time in 1 epoch:377.7305886745453 secs</span><br><span class="line"></span><br><span class="line">epoch 9, batch 0, loss:1.0109, acc:0.2532</span><br><span class="line">epoch 9, batch 500, loss:0.9780, acc:0.2645</span><br><span class="line">epoch 9, loss:0.9624, acc:0.2656</span><br><span class="line">time in 1 epoch:378.3708670139313 secs</span><br><span class="line"></span><br><span class="line">epoch 10, batch 0, loss:0.9245, acc:0.2576</span><br><span class="line">epoch 10, batch 500, loss:0.8940, acc:0.2749</span><br><span class="line">epoch 10, save model at ./checkpoint/train/ckpt-5</span><br><span class="line">epoch 10, loss:0.8820, acc:0.2757</span><br><span class="line">time in 1 epoch:378.5437033176422 secs</span><br><span class="line"></span><br><span class="line">epoch 11, batch 0, loss:0.8609, acc:0.2728</span><br><span class="line">epoch 11, batch 500, loss:0.8305, acc:0.2833</span><br><span class="line">epoch 11, loss:0.8222, acc:0.2835</span><br><span class="line">time in 1 epoch:378.56798672676086 secs</span><br><span class="line"></span><br><span class="line">epoch 12, batch 0, loss:0.8031, acc:0.2821</span><br><span class="line">epoch 12, batch 500, loss:0.7770, acc:0.2905</span><br><span class="line">epoch 12, save model at ./checkpoint/train/ckpt-6</span><br><span class="line">epoch 12, loss:0.7700, acc:0.2906</span><br><span class="line">time in 1 epoch:378.8077425956726 secs</span><br><span class="line"></span><br><span class="line">epoch 13, batch 0, loss:0.7457, acc:0.2857</span><br><span class="line">epoch 13, batch 500, loss:0.7311, acc:0.2971</span><br><span class="line">epoch 13, loss:0.7257, acc:0.2969</span><br><span class="line">time in 1 epoch:378.34697437286377 secs</span><br><span class="line"></span><br><span class="line">epoch 14, batch 0, loss:0.7159, acc:0.2925</span><br><span class="line">epoch 14, batch 500, loss:0.6931, acc:0.3026</span><br><span class="line">epoch 14, save model at ./checkpoint/train/ckpt-7</span><br><span class="line">epoch 14, loss:0.6874, acc:0.3025</span><br><span class="line">time in 1 epoch:379.3904767036438 secs</span><br><span class="line"></span><br><span class="line">epoch 15, batch 0, loss:0.6885, acc:0.2905</span><br><span class="line">epoch 15, batch 500, loss:0.6594, acc:0.3072</span><br><span class="line">epoch 15, loss:0.6546, acc:0.3070</span><br><span class="line">time in 1 epoch:377.10075068473816 secs</span><br><span class="line"></span><br><span class="line">epoch 16, batch 0, loss:0.6465, acc:0.2961</span><br><span class="line">epoch 16, batch 500, loss:0.6306, acc:0.3117</span><br><span class="line">epoch 16, save model at ./checkpoint/train/ckpt-8</span><br><span class="line">epoch 16, loss:0.6257, acc:0.3115</span><br><span class="line">time in 1 epoch:379.0886535644531 secs</span><br><span class="line"></span><br><span class="line">epoch 17, batch 0, loss:0.6033, acc:0.3021</span><br><span class="line">epoch 17, batch 500, loss:0.6023, acc:0.3162</span><br><span class="line">epoch 17, loss:0.5984, acc:0.3159</span><br><span class="line">time in 1 epoch:377.6911520957947 secs</span><br><span class="line"></span><br><span class="line">epoch 18, batch 0, loss:0.5469, acc:0.3225</span><br><span class="line">epoch 18, batch 500, loss:0.5791, acc:0.3195</span><br><span class="line">epoch 18, save model at ./checkpoint/train/ckpt-9</span><br><span class="line">epoch 18, loss:0.5755, acc:0.3191</span><br><span class="line">time in 1 epoch:378.4746241569519 secs</span><br><span class="line"></span><br><span class="line">epoch 19, batch 0, loss:0.5287, acc:0.3209</span><br><span class="line">epoch 19, batch 500, loss:0.5575, acc:0.3229</span><br><span class="line">epoch 19, loss:0.5546, acc:0.3224</span><br><span class="line">time in 1 epoch:378.284138917923 secs</span><br><span class="line"></span><br><span class="line">epoch 20, batch 0, loss:0.5182, acc:0.3193</span><br><span class="line">epoch 20, batch 500, loss:0.5374, acc:0.3263</span><br><span class="line">epoch 20, save model at ./checkpoint/train/ckpt-10</span><br><span class="line">epoch 20, loss:0.5344, acc:0.3257</span><br><span class="line">time in 1 epoch:377.9467544555664 secs</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    </div>

    
    
    

      <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fab fa-gratipay"></i>感谢阅读-------------</div>
        <div class="reward-container">
  <div>卑微博主，在线求赏</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="李思建 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>

    
      
   
    

      <footer class="post-footer">
         
          <div class="post-tags">
              <a href="/tags/transformer/" rel="tag"<i class="fab fa-envira"></i>transformer</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/07/23/2020-07-23-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="prev" title="2020-07-23-深度学习杂记">
      <i class="fa fa-chevron-left"></i> 2020-07-23-深度学习杂记
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/07/25/2020-07-25-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BF%83%E5%BE%97/" rel="next" title="2020-07-25-服务器心得">
      2020-07-25-服务器心得 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  





          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#tensorflow-2.0-教程-transformer"><span class="nav-number">1.</span> <span class="nav-text">TensorFlow 2.0 教程-Transformer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据输入pipeline"><span class="nav-number">1.1.</span> <span class="nav-text">1.数据输入pipeline</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#构造数据集"><span class="nav-number">1.1.1.</span> <span class="nav-text">构造数据集</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位置嵌入"><span class="nav-number">1.2.</span> <span class="nav-text">2.位置嵌入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#掩码"><span class="nav-number">1.3.</span> <span class="nav-text">3.掩码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scaled-dot-product-attention"><span class="nav-number">1.4.</span> <span class="nav-text">4.Scaled dot product attention</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mutil-head-attention"><span class="nav-number">1.5.</span> <span class="nav-text">5.Mutil-Head Attention</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编码器和解码器"><span class="nav-number">1.6.</span> <span class="nav-text">6.编码器和解码器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#编码层"><span class="nav-number">1.6.1.</span> <span class="nav-text">编码层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解码层"><span class="nav-number">1.6.2.</span> <span class="nav-text">解码层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编码器"><span class="nav-number">1.6.3.</span> <span class="nav-text">编码器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解码器"><span class="nav-number">1.6.4.</span> <span class="nav-text">解码器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建transformer"><span class="nav-number">1.6.5.</span> <span class="nav-text">创建Transformer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实验设置"><span class="nav-number">1.7.</span> <span class="nav-text">7.实验设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设置超参"><span class="nav-number">1.7.1.</span> <span class="nav-text">设置超参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化器"><span class="nav-number">1.7.2.</span> <span class="nav-text">优化器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#损失和指标"><span class="nav-number">1.7.3.</span> <span class="nav-text">损失和指标</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#训练和保持模型"><span class="nav-number">1.8.</span> <span class="nav-text">8、训练和保持模型</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="李思建"
      src="/images/touxiang.jpg">
  <p class="site-author-name" itemprop="name">李思建</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element">
    <a onclick="tidioChatApi.open();"><i class="fa fa-comment"></i>
    Chat
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/OopsAaron" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;OopsAaron" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:li1574468139@outlook.com" title="E-Mail → mailto:li1574468139@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5871697996" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5871697996" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/AaronLe48891280" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;AaronLe48891280" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://ife.baidu.com/" title="http:&#x2F;&#x2F;ife.baidu.com&#x2F;" rel="noopener" target="_blank">百度前端技术学院</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://wf.uisdc.com/cn/" title="http:&#x2F;&#x2F;wf.uisdc.com&#x2F;cn&#x2F;" rel="noopener" target="_blank">google前端开发基础</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>

 


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fas fa-atom"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李思建</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">218k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">3:18</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>


        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>
  
        
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>



  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>






  <script src="//code.tidio.co/6hx5cq5nmltu08pt7pfkqy85wvgnhr1r.js"></script>







    <div id="pjax">
  

  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'V06xtKF2qonsMYpPA6OqiRH0-gzGzoHsz',
      appKey     : 'Q8gXivQlmWVnr48ahETG2v5X',
      placeholder: "Just go go",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
  


</body>


</html>
